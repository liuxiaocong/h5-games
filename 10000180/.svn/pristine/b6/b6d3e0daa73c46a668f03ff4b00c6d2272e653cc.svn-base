// helper.js ----------------------------------------------
// desktop loading and fallback test
Modernizr.mobile?($("#footer").remove(),window.trace=function(){}):($("html").css({backgroundImage:'url("assets/images/desktop_background.jpg")'}),$("#loaded-content").load("desktop_version.html"),Modernizr.canvas||$("#loaded-content").load("fallback_version.html"),function(e,t,n){var r,i=e.getElementsByTagName(t)[0];if(e.getElementById(n))return;r=e.createElement(t),r.id=n,r.src="//connect.facebook.net/en_US/all.js#xfbml=1&appId=326307477419185",i.parentNode.insertBefore(r,i)}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){FB&&FB.Event&&FB.Event.subscribe&&(FB.init({appId:"326307477419185",channelUrl:"//luxahoy.com/channel.html"}),FB.Event.subscribe("edge.create",function(e){console.log("like",e),luxanimals.trackSocial("facebook","like",location.href,location.pathname)}),FB.Event.subscribe("edge.remove",function(e){console.log("unlike",e),luxanimals.trackSocial("facebook","unlike",location.href,location.pathname)}),FB.Event.subscribe("message.send",function(e){console.log("send",e),luxanimals.trackSocial("facebook","send",location.href,location.pathname)}))},window.twttr=function(e,t,n){var r,i,s=e.getElementsByTagName(t)[0];if(e.getElementById(n))return;return i=e.createElement(t),i.id=n,i.src="//platform.twitter.com/widgets.js",s.parentNode.insertBefore(i,s),window.twttr||(r={_e:[],ready:function(e){r._e.push(e)}})}(document,"script","twitter-wjs"),window.twttr.ready(function(e){e.events.bind("tweet",function(e){e&&(console.log("tweet",e),luxanimals.trackSocial("twitter","tweet",location.href,location.pathname))})}),$("#footer").show()),function(e){e.hideAddressbar=function(t){function v(){p()}t=typeof t=="string"?document.querySelector(t):t;var n=navigator.userAgent,r=~n.indexOf("iPhone")||~n.indexOf("iPod"),i=~n.indexOf("iPad"),s=r||i,o=/android/i.test(n),u=o&&/mobile/i.test(n),a=o&&!u,f=/\bsilk\b/i.test(n),l=Infinity,c=0,h=$("#container");if(!(s||o||f)||!t)return;o&&e.addEventListener("scroll",function(){t.style.height=e.innerHeight+"px"},!1);var p=e.setupScroll=function(){var n=e.innerWidth,i=document.documentElement.clientHeight,o=e.navigator.standalone,a=matchMedia("(orientation:landscape)").matches,f=a?Math.min(screen.availWidth,screen.availHeight):Math.max(screen.availWidth,screen.availHeight);s?(i=document.documentElement.clientHeight,r&&!o&&(i=Math.min(f,i+60))):u&&(i=f-38),i!=l&&(t.style.height=i+"px",c=n,l=i,setTimeout(scrollTo,0,0,1)),d()},d=e.resizeGame=function(n){var r=o?screen.availWidth:e.innerWidth,i=parseInt(t.style.height),s=Math.min(r/960,i/640).toFixed(3);h.css("scale")!=s&&h.css({scale:s})};e.addEventListener("resize",v,!1),$(e).ready(v)},$("#span-year").html((new Date).getFullYear()),/[?&]fps/i.test(location.search)&&function(){var e=document.createElement("script");e.src="http://github.com/mrdoob/stats.js/raw/master/build/stats.min.js",document.body.appendChild(e),e=document.createElement("script"),e.innerHTML='var interval=setInterval(function(){if(typeof Stats=="function"){clearInterval(interval);var stats=new Stats();stats.domElement.style.position="fixed";stats.domElement.style.left="0px";stats.domElement.style.top="0px";stats.domElement.style.zIndex="10000";document.body.appendChild(stats.domElement);setInterval(function(){stats.update();},1000/60);}},100);',document.body.appendChild(e)}()}(this),Modernizr.load({test:Modernizr.ios&&!Modernizr.standalone,yep:"assets/libs/bookmark_bubble.js",nope:!1,complete:function(){if(!Modernizr.ios||!window.google)return;window.setTimeout(function(){var e=window.bubble=new google.bookmarkbubble.Bubble;e.hasHashParameter=function(){return!1},e.setHashParameter=function(){},e.getVisibleYPosition_=function(){return this.isIpad_()?window.pageYOffset+17:window.pageYOffset-this.element_.offsetHeight+window.innerHeight-17},e.iconUrl_="apple-touch-icon-precomposed.png";var t=e.closeClickHandler_;e.closeClickHandler_=function(){luxanimals.trackEvent("Dialog","Dismiss","Bookmark Bubble"),t.apply(e)};var n=e.autoDestruct_;e.autoDestruct_=function(){luxanimals.trackEvent("Dialog","Hide","Bookmark Bubble"),n.apply(e)},e.showIfAllowed()&&luxanimals.trackEvent("Dialog","Show","Bookmark Bubble")},3600)}}),hideAddressbar(document.body);;
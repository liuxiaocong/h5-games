var requirejs,require,define;!function(global){function isFunction(a){return"[object Function]"===ostring.call(a)}function isArray(a){return"[object Array]"===ostring.call(a)}function each(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function hasProp(a,b){return hasOwn.call(a,b)}function getOwn(a,b){return hasProp(a,b)&&a[b]}function eachProp(a,b){var c;for(c in a)if(hasProp(a,c)&&b(a[c],c))break}function mixin(a,b,c,d){return b&&eachProp(b,function(b,e){(c||!hasProp(a,e))&&(d&&"string"!=typeof b?(a[e]||(a[e]={}),mixin(a[e],b,c,d)):a[e]=b)}),a}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(a){throw a}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function b(a){var b,c;for(b=0;a[b];b+=1)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;b>0&&(a.splice(b-1,2),b-=2)}}function c(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p=c&&c.split("/"),q=p,r=x.map,s=r&&r["*"];if(a&&"."===a.charAt(0)&&(c?(q=getOwn(x.pkgs,c)?p=[c]:p.slice(0,p.length-1),a=q.concat(a.split("/")),b(a),f=getOwn(x.pkgs,e=a[0]),a=a.join("/"),f&&a===e+"/"+f.main&&(a=e)):0===a.indexOf("./")&&(a=a.substring(2))),d&&r&&(p||s)){for(h=a.split("/"),i=h.length;i>0;i-=1){if(k=h.slice(0,i).join("/"),p)for(j=p.length;j>0;j-=1)if(g=getOwn(r,p.slice(0,j).join("/")),g&&(g=getOwn(g,k))){l=g,m=i;break}if(l)break;!n&&s&&getOwn(s,k)&&(n=getOwn(s,k),o=i)}!l&&n&&(l=n,m=o),l&&(h.splice(0,m,l),a=h.join("/"))}return a}function d(a){isBrowser&&each(scripts(),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===u.contextName?(b.parentNode.removeChild(b),!0):void 0})}function e(a){var b=getOwn(x.paths,a);return b&&isArray(b)&&b.length>1?(b.shift(),u.require.undef(a),u.require([a]),!0):void 0}function f(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function g(a,b,d,e){var g,h,i,j,k=null,l=b?b.name:null,m=a,n=!0,o="";return a||(n=!1,a="_@r"+(E+=1)),j=f(a),k=j[0],a=j[1],k&&(k=c(k,l,e),h=getOwn(C,k)),a&&(k?o=h&&h.normalize?h.normalize(a,function(a){return c(a,l,e)}):c(a,l,e):(o=c(a,l,e),j=f(o),k=j[0],o=j[1],d=!0,g=u.nameToUrl(o))),i=!k||h||d?"":"_unnormalized"+(F+=1),{prefix:k,name:o,parentMap:b,unnormalized:!!i,url:g,originalName:m,isDefine:n,id:(k?k+"!"+o:o)+i}}function h(a){var b=a.id,c=getOwn(y,b);return c||(c=y[b]=new u.Module(a)),c}function i(a,b,c){var d=a.id,e=getOwn(y,d);!hasProp(C,d)||e&&!e.defineEmitComplete?(e=h(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(C[d])}function j(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=getOwn(y,b);c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function k(){globalDefQueue.length&&(apsp.apply(B,[B.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function l(a){delete y[a],delete z[a]}function m(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,each(a.depMaps,function(d,e){var f=d.id,g=getOwn(y,f);!g||a.depMatched[e]||c[f]||(getOwn(b,f)?(a.defineDep(e,C[f]),a.check()):m(g,b,c))}),c[d]=!0)}function n(){var a,b,c,f,g=1e3*x.waitSeconds,h=g&&u.startTime+g<(new Date).getTime(),i=[],k=[],l=!1,o=!0;if(!s){if(s=!0,eachProp(z,function(c){if(a=c.map,b=a.id,c.enabled&&(a.isDefine||k.push(c),!c.error))if(!c.inited&&h)e(b)?(f=!0,l=!0):(i.push(b),d(b));else if(!c.inited&&c.fetched&&a.isDefine&&(l=!0,!a.prefix))return o=!1}),h&&i.length)return c=makeError("timeout","Load timeout for modules: "+i,null,i),c.contextName=u.contextName,j(c);o&&each(k,function(a){m(a,{},{})}),h&&!f||!l||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,n()},50)),s=!1}}function o(a){hasProp(C,a[0])||h(g(a[0],null,!0)).init(a[1],a[2])}function p(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function q(a){var b=a.currentTarget||a.srcElement;return p(b,u.onScriptLoad,"load","onreadystatechange"),p(b,u.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}function r(){var a;for(k();B.length;){if(a=B.shift(),null===a[0])return j(makeError("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));o(a)}}var s,t,u,v,w,x={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},y={},z={},A={},B=[],C={},D={},E=1,F=1;return v={require:function(a){return a.require?a.require:a.require=u.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?a.exports:a.exports=C[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){var b,c=getOwn(x.pkgs,a.map.id);return b=c?getOwn(x.config,a.map.id+"/"+c.main):getOwn(x.config,a.map.id),b||{}},exports:C[a.map.id]}}},t=function(a){this.events=getOwn(A,a.id)||{},this.map=a,this.shim=getOwn(x.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},t.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,u.startTime=(new Date).getTime();var a=this.map;return this.shim?void u.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return a.prefix?this.callPlugin():this.load()})):a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;D[a]||(D[a]=!0,u.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id,d=this.depExports,e=this.exports,f=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(f)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{e=u.execCb(c,f,d,e)}catch(g){a=g}else e=u.execCb(c,f,d,e);if(this.map.isDefine&&(b=this.module,b&&void 0!==b.exports&&b.exports!==this.exports?e=b.exports:void 0===e&&this.usingExports&&(e=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",j(this.error=a)}else e=f;this.exports=e,this.map.isDefine&&!this.ignore&&(C[c]=e,req.onResourceLoad&&req.onResourceLoad(u,this.map,this.depMaps)),l(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,d=g(a.prefix);this.depMaps.push(d),i(d,"defined",bind(this,function(d){var e,f,k,m=this.map.name,n=this.map.parentMap?this.map.parentMap.name:null,o=u.makeRequire(a.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(d.normalize&&(m=d.normalize(m,function(a){return c(a,n,!0)})||""),f=g(a.prefix+"!"+m,this.map.parentMap),i(f,"defined",bind(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),k=getOwn(y,f.id),void(k&&(this.depMaps.push(f),this.events.error&&k.on("error",bind(this,function(a){this.emit("error",a)})),k.enable()))):(e=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(y,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&l(a.map.id)}),j(a)}),e.fromText=bind(this,function(c,d){var f=a.name,i=g(f),k=useInteractive;d&&(c=d),k&&(useInteractive=!1),h(i),hasProp(x.config,b)&&(x.config[f]=x.config[b]);try{req.exec(c)}catch(l){return j(makeError("fromtexteval","fromText eval for "+b+" failed: "+l,l,[b]))}k&&(useInteractive=!0),this.depMaps.push(i),u.completeLoad(f),o([f],e)}),void d.load(a.name,o,e,x))})),u.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){z[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(a,b){var c,d,e;if("string"==typeof a){if(a=g(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,e=getOwn(v,a.id))return void(this.depExports[b]=e(this));this.depCount+=1,i(a,"defined",bind(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&i(a,"error",bind(this,this.errback))}c=a.id,d=y[c],hasProp(v,c)||!d||d.enabled||u.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=getOwn(y,a.id);b&&!b.enabled&&u.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},u={config:x,contextName:a,registry:y,defined:C,urlFetched:D,defQueue:B,Module:t,makeModuleMap:g,nextTick:req.nextTick,onError:j,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=x.pkgs,c=x.shim,d={paths:!0,config:!0,map:!0};eachProp(a,function(a,b){d[b]?"map"===b?(x.map||(x.map={}),mixin(x[b],a,!0,!0)):mixin(x[b],a,!0):x[b]=a}),a.shim&&(eachProp(a.shim,function(a,b){isArray(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=u.makeShimExports(a)),c[b]=a}),x.shim=c),a.packages&&(each(a.packages,function(a){var c;a="string"==typeof a?{name:a}:a,c=a.location,b[a.name]={name:a.name,location:c||a.name,main:(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),x.pkgs=b),eachProp(y,function(a,b){a.inited||a.map.unnormalized||(a.map=g(b))}),(a.deps||a.callback)&&u.require(a.deps||[],a.callback)},makeShimExports:function(a){function b(){var b;return a.init&&(b=a.init.apply(global,arguments)),b||a.exports&&getGlobal(a.exports)}return b},makeRequire:function(b,e){function f(c,d,i){var k,l,m;return e.enableBuildCallback&&d&&isFunction(d)&&(d.__requireJsBuild=!0),"string"==typeof c?isFunction(d)?j(makeError("requireargs","Invalid require call"),i):b&&hasProp(v,c)?v[c](y[b.id]):req.get?req.get(u,c,b,f):(l=g(c,b,!1,!0),k=l.id,hasProp(C,k)?C[k]:j(makeError("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a+(b?"":". Use require([])")))):(r(),u.nextTick(function(){r(),m=h(g(null,b)),m.skipMap=e.skipMap,m.init(c,d,i,{enabled:!0}),n()}),f)}return e=e||{},mixin(f,{isBrowser:isBrowser,toUrl:function(a){var d,e=a.lastIndexOf("."),f=a.split("/")[0],g="."===f||".."===f;return-1!==e&&(!g||e>1)&&(d=a.substring(e,a.length),a=a.substring(0,e)),u.nameToUrl(c(a,b&&b.id,!0),d,!0)},defined:function(a){return hasProp(C,g(a,b,!1,!0).id)},specified:function(a){return a=g(a,b,!1,!0).id,hasProp(C,a)||hasProp(y,a)}}),b||(f.undef=function(a){k();var c=g(a,b,!0),e=getOwn(y,a);d(a),delete C[a],delete D[c.url],delete A[a],e&&(e.events.defined&&(A[a]=e.events),l(a))}),f},enable:function(a){var b=getOwn(y,a.id);b&&h(a).enable()},completeLoad:function(a){var b,c,d,f=getOwn(x.shim,a)||{},g=f.exports;for(k();B.length;){if(c=B.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);o(c)}if(d=getOwn(y,a),!b&&!hasProp(C,a)&&d&&!d.inited){if(!(!x.enforceDefine||g&&getGlobal(g)))return e(a)?void 0:j(makeError("nodefine","No define call for "+a,null,[a]));o([a,f.deps||[],f.exportsFn])}n()},nameToUrl:function(a,b,c){var d,e,f,g,h,i,j,k,l;if(req.jsExtRegExp.test(a))k=a+(b||"");else{for(d=x.paths,e=x.pkgs,h=a.split("/"),i=h.length;i>0;i-=1){if(j=h.slice(0,i).join("/"),f=getOwn(e,j),l=getOwn(d,j)){isArray(l)&&(l=l[0]),h.splice(0,i,l);break}if(f){g=a===f.name?f.location+"/"+f.main:f.location,h.splice(0,i,g);break}}k=h.join("/"),k+=b||(/^data\:|\?/.test(k)||c?"":".js"),k=("/"===k.charAt(0)||k.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+k}return x.urlArgs?k+((-1===k.indexOf("?")?"?":"&")+x.urlArgs):k},load:function(a,b){req.load(u,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=q(a);u.completeLoad(b.id)}},onScriptError:function(a){var b=q(a);return e(b.id)?void 0:j(makeError("scripterror","Script error for: "+b.id,a,[b.id]))}},u.require=u.makeRequire(),u}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(a){return"interactive"===a.readyState?interactiveScript=a:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.9",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(a,b,c,d){var e,f,g=defContextName;return isArray(a)||"string"==typeof a||(f=a,isArray(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(g=f.context),e=getOwn(contexts,g),e||(e=contexts[g]=req.s.newContext(g)),f&&e.configure(f),e.require(a,b,c)},req.config=function(a){return req(a)},req.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(a){req[a]=function(){var b=contexts[defContextName];return b.require[a].apply(b,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(a){var b=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return b.type=a.scriptType||"text/javascript",b.charset="utf-8",b.async=!0,b},req.load=function(a,b,c){var d,e=a&&a.config||{};if(isBrowser)return d=req.createNode(e,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&d.attachEvent.toString().indexOf("[native code")<0||isOpera?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(useInteractive=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,currentlyAddingScript=d,baseElement?head.insertBefore(d,baseElement):head.appendChild(d),currentlyAddingScript=null,d;if(isWebWorker)try{importScripts(c),a.completeLoad(b)}catch(f){a.onError(makeError("importscripts","importScripts failed for "+b+" at "+c,f,[b]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(a){return head||(head=a.parentNode),dataMain=a.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),isArray(b)||(c=b,b=null),!b&&isFunction(c)&&(b=[],c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),useInteractive&&(d=currentlyAddingScript||getInteractiveScript(),d&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")])),(e?e.defQueue:globalDefQueue).push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this);var spine={};spine.BoneData=function(a,b){this.name=a,this.parent=b},spine.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0},spine.SlotData=function(a,b){this.name=a,this.boneData=b},spine.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},spine.Bone=function(a,b){this.data=a,this.parent=b,this.setToSetupPose()},spine.Bone.yDown=!1,spine.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(a,b){var c=this.parent;null!=c?(this.worldX=this.x*c.m00+this.y*c.m01+c.worldX,this.worldY=this.x*c.m10+this.y*c.m11+c.worldY,this.data.inheritScale?(this.worldScaleX=c.worldScaleX*this.scaleX,this.worldScaleY=c.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?c.worldRotation+this.rotation:this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var d=this.worldRotation*Math.PI/180,e=Math.cos(d),f=Math.sin(d);this.m00=e*this.worldScaleX,this.m10=f*this.worldScaleX,this.m01=-f*this.worldScaleY,this.m11=e*this.worldScaleY,a&&(this.m00=-this.m00,this.m01=-this.m01),b!=spine.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY}},spine.Slot=function(a,b,c){this.data=a,this.skeleton=b,this.bone=c,this.setToSetupPose()},spine.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(a){this.attachment=a,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(a){this._attachmentTime=this.skeleton.time-a},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var a=this.data;this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a;for(var b=this.skeleton.data.slots,c=0,d=b.length;d>c;c++)if(b[c]==a){this.setAttachment(a.attachmentName?this.skeleton.getAttachmentBySlotIndex(c,a.attachmentName):null);break}}},spine.Skin=function(a){this.name=a,this.attachments={}},spine.Skin.prototype={addAttachment:function(a,b,c){this.attachments[a+":"+b]=c},getAttachment:function(a,b){return this.attachments[a+":"+b]},_attachAll:function(a,b){for(var c in b.attachments){var d=c.indexOf(":"),e=parseInt(c.substring(0,d)),f=c.substring(d+1),g=a.slots[e];if(g.attachment&&g.attachment.name==f){var h=this.getAttachment(e,f);h&&g.setAttachment(h)}}}},spine.Animation=function(a,b,c){this.name=a,this.timelines=b,this.duration=c},spine.Animation.prototype={apply:function(a,b,c,d,e){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var f=this.timelines,g=0,h=f.length;h>g;g++)f[g].apply(a,b,c,e,1)},mix:function(a,b,c,d,e,f){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var g=this.timelines,h=0,i=g.length;i>h;h++)g[h].apply(a,b,c,e,f)}},spine.binarySearch=function(a,b,c){var d=0,e=Math.floor(a.length/c)-2;if(0==e)return c;for(var f=e>>>1;;){if(a[(f+1)*c]<=b?d=f+1:e=f,d==e)return(d+1)*c;f=d+e>>>1}},spine.linearSearch=function(a,b,c){for(var d=0,e=a.length-c;e>=d;d+=c)if(a[d]>b)return d;return-1},spine.Curves=function(a){this.curves=[],this.curves.length=6*(a-1)},spine.Curves.prototype={setLinear:function(a){this.curves[6*a]=0},setStepped:function(a){this.curves[6*a]=-1},setCurve:function(a,b,c,d,e){var f=.1,g=f*f,h=g*f,i=3*f,j=3*g,k=6*g,l=6*h,m=2*-b+d,n=2*-c+e,o=3*(b-d)+1,p=3*(c-e)+1,q=6*a,r=this.curves;r[q]=b*i+m*j+o*h,r[q+1]=c*i+n*j+p*h,r[q+2]=m*k+o*l,r[q+3]=n*k+p*l,r[q+4]=o*l,r[q+5]=p*l},getCurvePercent:function(a,b){b=0>b?0:b>1?1:b;var c=6*a,d=this.curves,e=d[c];if(!e)return b;if(-1==e)return 0;for(var f=d[c+1],g=d[c+2],h=d[c+3],i=d[c+4],j=d[c+5],k=e,l=f,m=8;;){if(k>=b){var n=k-e,o=l-f;return o+(l-o)*(b-n)/(k-n)}if(0==m)break;m--,e+=g,f+=h,g+=i,h+=j,k+=e,l+=f}return l+(1-l)*(b-k)/(1-k)}},spine.RotateTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=2*a},spine.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.bones[this.boneIndex];if(c>=f[f.length-2]){for(var h=g.data.rotation+f[f.length-1]-g.rotation;h>180;)h-=360;for(;-180>h;)h+=360;return void(g.rotation+=h*e)}var i=spine.binarySearch(f,c,2),j=f[i-1],k=f[i],l=1-(c-k)/(f[i-2]-k);l=this.curves.getCurvePercent(i/2-1,l);for(var h=f[i+1]-j;h>180;)h-=360;for(;-180>h;)h+=360;for(h=g.data.rotation+(j+h*l)-g.rotation;h>180;)h-=360;for(;-180>h;)h+=360;g.rotation+=h*e}}},spine.TranslateTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=3*a},spine.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.bones[this.boneIndex];if(c>=f[f.length-3])return g.x+=(g.data.x+f[f.length-2]-g.x)*e,void(g.y+=(g.data.y+f[f.length-1]-g.y)*e);var h=spine.binarySearch(f,c,3),i=f[h-2],j=f[h-1],k=f[h],l=1-(c-k)/(f[h+-3]-k);l=this.curves.getCurvePercent(h/3-1,l),g.x+=(g.data.x+i+(f[h+1]-i)*l-g.x)*e,g.y+=(g.data.y+j+(f[h+2]-j)*l-g.y)*e}}},spine.ScaleTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=3*a},spine.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.bones[this.boneIndex];if(c>=f[f.length-3])return g.scaleX+=(g.data.scaleX-1+f[f.length-2]-g.scaleX)*e,void(g.scaleY+=(g.data.scaleY-1+f[f.length-1]-g.scaleY)*e);var h=spine.binarySearch(f,c,3),i=f[h-2],j=f[h-1],k=f[h],l=1-(c-k)/(f[h+-3]-k);l=this.curves.getCurvePercent(h/3-1,l),g.scaleX+=(g.data.scaleX-1+i+(f[h+1]-i)*l-g.scaleX)*e,g.scaleY+=(g.data.scaleY-1+j+(f[h+2]-j)*l-g.scaleY)*e}}},spine.ColorTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=5*a},spine.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(a,b,c,d,e,f){a*=5,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,this.frames[a+4]=f},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.slots[this.slotIndex];if(c>=f[f.length-5]){var h=f.length-1;return g.r=f[h-3],g.g=f[h-2],g.b=f[h-1],void(g.a=f[h])}var i=spine.binarySearch(f,c,5),j=f[i-4],k=f[i-3],l=f[i-2],m=f[i-1],n=f[i],o=1-(c-n)/(f[i-5]-n);o=this.curves.getCurvePercent(i/5-1,o);var p=j+(f[i+1]-j)*o,q=k+(f[i+2]-k)*o,r=l+(f[i+3]-l)*o,s=m+(f[i+4]-m)*o;1>e?(g.r+=(p-g.r)*e,g.g+=(q-g.g)*e,g.b+=(r-g.b)*e,g.a+=(s-g.a)*e):(g.r=p,g.g=q,g.b=r,g.a=s)}}},spine.AttachmentTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=a,this.attachmentNames=[],this.attachmentNames.length=a},spine.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},apply:function(a,b,c){var d=this.frames;if(!(c<d[0])){var e;e=c>=d[d.length-1]?d.length-1:spine.binarySearch(d,c,1)-1;var f=this.attachmentNames[e];a.slots[this.slotIndex].setAttachment(f?a.getAttachmentBySlotIndex(this.slotIndex,f):null)}}},spine.EventTimeline=function(a){this.frames=[],this.frames.length=a,this.events=[],this.events.length=a},spine.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.events[a]=c},apply:function(a,b,c,d,e){if(d){var f=this.frames,g=f.length;if(!(b>=f[g-1])){b>c&&(this.apply(a,b,Number.MAX_VALUE,d,e),b=0);var h;if(b<=f[0]||1==g)h=0;else{h=spine.binarySearch(f,b,1);for(var i=f[h];h>0&&f[h-1]==i;)h--}for(var j=this.events;g>h&&c>=f[h];h++)d.push(j[h])}}}},spine.DrawOrderTimeline=function(a){this.frames=[],this.frames.length=a,this.drawOrders=[],this.drawOrders.length=a},spine.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.drawOrders[a]=c},apply:function(a,b,c){var d=this.frames;if(!(c<d[0])){var e;e=c>=d[d.length-1]?d.length-1:spine.binarySearch(d,c,1)-1;var f=a.drawOrder,g=a.slots,h=this.drawOrders[e];if(h)for(var i=0,j=h.length;j>i;i++)f[i]=a.slots[h[i]];else for(var i=0,j=g.length;j>i;i++)f[i]=g[i]}}},spine.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[]},spine.SkeletonData.prototype={defaultSkin:null,findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return slot[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSkin:function(a){for(var b=this.skins,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findEvent:function(a){for(var b=this.events,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findAnimation:function(a){for(var b=this.animations,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null}},spine.Skeleton=function(a){this.data=a,this.bones=[];for(var b=0,c=a.bones.length;c>b;b++){var d=a.bones[b],e=d.parent?this.bones[a.bones.indexOf(d.parent)]:null;this.bones.push(new spine.Bone(d,e))}this.slots=[],this.drawOrder=[];for(var b=0,c=a.slots.length;c>b;b++){var f=a.slots[b],g=this.bones[a.bones.indexOf(f.boneData)],h=new spine.Slot(f,this,g);this.slots.push(h),this.drawOrder.push(h)}},spine.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var a=this.flipX,b=this.flipY,c=this.bones,d=0,e=c.length;e>d;d++)c[d].updateWorldTransform(a,b)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var a=this.bones,b=0,c=a.length;c>b;b++)a[b].setToSetupPose()},setSlotsToSetupPose:function(){for(var a=this.slots,b=0,c=a.length;c>b;b++)a[b].setToSetupPose(b)},getRootBone:function(){return 0==this.bones.length?null:this.bones[0]},findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},setSkinByName:function(a){var b=this.data.findSkin(a);if(!b)throw"Skin not found: "+a;this.setSkin(b)},setSkin:function(a){this.skin&&a&&a._attachAll(this,this.skin),this.skin=a},getAttachmentBySlotName:function(a,b){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(a),b)},getAttachmentBySlotIndex:function(a,b){if(this.skin){var c=this.skin.getAttachment(a,b);if(c)return c}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(a,b):null},setAttachment:function(a,b){for(var c=this.slots,d=0,e=c.size;e>d;d++){var f=c[d];if(f.data.name==a){var g=null;if(b&&(g=this.getAttachment(d,b),!g))throw"Attachment not found: "+b+", for slot: "+a;return void f.setAttachment(g)}}throw"Slot not found: "+a},update:function(a){time+=a}},spine.EventData=function(a){this.name=a},spine.EventData.prototype={intValue:0,floatValue:0,stringValue:null},spine.Event=function(a){this.data=a},spine.Event.prototype={intValue:0,floatValue:0,stringValue:null},spine.AttachmentType={region:0,boundingbox:1},spine.RegionAttachment=function(a){this.name=a,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},spine.RegionAttachment.prototype={type:spine.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(a,b,c,d,e){var f=this.uvs;e?(f[2]=a,f[3]=d,f[4]=a,f[5]=b,f[6]=c,f[7]=b,f[0]=c,f[1]=d):(f[0]=a,f[1]=d,f[2]=a,f[3]=b,f[4]=c,f[5]=b,f[6]=c,f[7]=d)},updateOffset:function(){var a=this.width/this.regionOriginalWidth*this.scaleX,b=this.height/this.regionOriginalHeight*this.scaleY,c=-this.width/2*this.scaleX+this.regionOffsetX*a,d=-this.height/2*this.scaleY+this.regionOffsetY*b,e=c+this.regionWidth*a,f=d+this.regionHeight*b,g=this.rotation*Math.PI/180,h=Math.cos(g),i=Math.sin(g),j=c*h+this.x,k=c*i,l=d*h+this.y,m=d*i,n=e*h+this.x,o=e*i,p=f*h+this.y,q=f*i,r=this.offset;r[0]=j-m,r[1]=l+k,r[2]=j-q,r[3]=p+k,r[4]=n-q,r[5]=p+o,r[6]=n-m,r[7]=l+o},computeVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.offset;d[0]=i[0]*e+i[1]*f+a,d[1]=i[0]*g+i[1]*h+b,d[2]=i[2]*e+i[3]*f+a,d[3]=i[2]*g+i[3]*h+b,d[4]=i[4]*e+i[5]*f+a,d[5]=i[4]*g+i[5]*h+b,d[6]=i[6]*e+i[7]*f+a,d[7]=i[6]*g+i[7]*h+b}},spine.BoundingBoxAttachment=function(a){this.name=a,this.vertices=[]},spine.BoundingBoxAttachment.prototype={type:spine.AttachmentType.boundingBox,computeWorldVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;for(var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.vertices,j=0,k=i.length;k>j;j+=2){var l=i[j],m=i[j+1];d[j]=l*e+m*f+a,d[j+1]=l*g+m*h+b}}},spine.AnimationStateData=function(a){this.skeletonData=a,this.animationToMixTime={}},spine.AnimationStateData.prototype={defaultMix:0,setMixByName:function(a,b,c){var d=this.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;var e=this.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;this.setMix(d,e,c)},setMix:function(a,b,c){this.animationToMixTime[a.name+":"+b.name]=c},getMix:function(a,b){var c=this.animationToMixTime[a.name+":"+b.name];return c?c:this.defaultMix}},spine.TrackEntry=function(){},spine.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:0,endTime:0,timeScale:1,mixTime:0,mixDuration:0,onStart:null,onEnd:null,onComplete:null,onEvent:null},spine.AnimationState=function(a){this.data=a,this.tracks=[],this.events=[]},spine.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(a){a*=this.timeScale;for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){var d=a*c.timeScale,e=c.time+d,f=c.endTime;if(c.time=e,c.previous&&(c.previous.time+=d,c.mixTime+=d),c.loop?c.lastTime%f>e%f:c.lastTime<f&&e>=f){var g=Math.floor(e/f);c.onComplete&&c.onComplete(b,g),this.onComplete&&this.onComplete(b,g)}var h=c.next;h?e-d>h.delay&&this.setCurrent(b,h):!c.loop&&c.lastTime>=c.endTime&&this.clearTrack(b)}}},apply:function(a){for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){this.events.length=0;var d=c.time,e=c.loop;!e&&d>c.endTime&&(d=c.endTime);var f=c.previous;if(f){var g=f.time;!f.loop&&g>f.endTime&&(g=f.endTime),f.animation.apply(a,g,g,f.loop,null);var h=c.mixTime/c.mixDuration;h>=1&&(h=1,c.previous=null),c.animation.mix(a,c.lastTime,d,e,this.events,h)}else c.animation.apply(a,c.lastTime,d,e,this.events);
for(var i=0,j=this.events.length;j>i;i++){var k=this.events[i];null!=c.onEvent&&c.onEvent(b,k),null!=this.onEvent&&this.onEvent(b,k)}c.lastTime=c.time}}},clearTracks:function(){for(var a=0,b=this.tracks.length;b>a;a++)this.clearTrack(a);this.tracks.length=0},clearTrack:function(a){if(!(a>=this.tracks.length)){var b=this.tracks[a];b&&(null!=b.onEnd&&b.onEnd(a),null!=this.onEnd&&this.onEnd(a),this.tracks[a]=null)}},_expandToIndex:function(a){if(a<this.tracks.length)return this.tracks[a];for(;a>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(a,b){var c=this._expandToIndex(a);c&&(c.previous=null,null!=c.onEnd&&c.onEnd(a),null!=this.onEnd&&this.onEnd(a),b.mixDuration=this.data.getMix(c.animation,b.animation),b.mixDuration>0&&(b.mixTime=0,b.previous=c)),this.tracks[a]=b,null!=b.onStart&&b.onStart(a),null!=this.onStart&&this.onStart(a)},setAnimationByName:function(a,b,c){var d=this.data.skeletonData.findAnimation(b);if(!d)throw"Animation not found: "+b;return this.setAnimation(a,d,c)},setAnimation:function(a,b,c){var d=new spine.TrackEntry;return d.animation=b,d.loop=c,d.endTime=b.duration,this.setCurrent(a,d),d},addAnimationByName:function(a,b,c,d){var e=this.data.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;return this.addAnimation(a,e,c,d)},addAnimation:function(a,b,c,d){var e=new spine.TrackEntry;e.animation=b,e.loop=c,e.endTime=b.duration;var f=this._expandToIndex(a);if(f){for(;f.next;)f=f.next;f.next=e}else this.tracks[a]=e;return 0>=d&&(f?d+=f.endTime-this.data.getMix(f.animation,b):d=0),e.delay=d,e},getCurrent:function(a){return a>=this.tracks.length?null:this.tracks[a]}},spine.SkeletonJson=function(a){this.attachmentLoader=a},spine.SkeletonJson.prototype={scale:1,readSkeletonData:function(a){for(var b=new spine.SkeletonData,c=a.bones,d=0,e=c.length;e>d;d++){var f=c[d],g=null;if(f.parent&&(g=b.findBone(f.parent),!g))throw"Parent bone not found: "+f.parent;var h=new spine.BoneData(f.name,g);h.length=(f.length||0)*this.scale,h.x=(f.x||0)*this.scale,h.y=(f.y||0)*this.scale,h.rotation=f.rotation||0,h.scaleX=f.scaleX||1,h.scaleY=f.scaleY||1,h.inheritScale=f.inheritScale||!0,h.inheritRotation=f.inheritRotation||!0,b.bones.push(h)}for(var i=a.slots,d=0,e=i.length;e>d;d++){var j=i[d],h=b.findBone(j.bone);if(!h)throw"Slot bone not found: "+j.bone;var k=new spine.SlotData(j.name,h),l=j.color;l&&(k.r=spine.SkeletonJson.toColor(l,0),k.g=spine.SkeletonJson.toColor(l,1),k.b=spine.SkeletonJson.toColor(l,2),k.a=spine.SkeletonJson.toColor(l,3)),k.attachmentName=j.attachment,k.additiveBlending=j.additive,b.slots.push(k)}var m=a.skins;for(var n in m)if(m.hasOwnProperty(n)){var o=m[n],p=new spine.Skin(n);for(var q in o)if(o.hasOwnProperty(q)){var r=b.findSlotIndex(q),s=o[q];for(var t in s)if(s.hasOwnProperty(t)){var u=this.readAttachment(p,t,s[t]);null!=u&&p.addAttachment(r,t,u)}}b.skins.push(p),"default"==p.name&&(b.defaultSkin=p)}var v=a.events;for(var w in v)if(v.hasOwnProperty(w)){var x=v[w],y=new spine.EventData(w);y.intValue=x["int"]||0,y.floatValue=x["float"]||0,y.stringValue=x.string||null,b.events.push(y)}var z=a.animations;for(var A in z)z.hasOwnProperty(A)&&this.readAnimation(A,z[A],b);return b},readAttachment:function(a,b,c){b=c.name||b;var d=spine.AttachmentType[c.type||"region"],e=this.attachmentLoader.newAttachment(a,d,b);if(d==spine.AttachmentType.region)e.x=(c.x||0)*this.scale,e.y=(c.y||0)*this.scale,e.scaleX=c.scaleX||1,e.scaleY=c.scaleY||1,e.rotation=c.rotation||0,e.width=(c.width||32)*this.scale,e.height=(c.height||32)*this.scale,e.updateOffset();else if(d==spine.AttachmentType.boundingBox)for(var f=c.vertices,g=0,h=f.length;h>g;g++)e.vertices.push(f[g]*scale);return e},readAnimation:function(a,b,c){var d=[],e=0,f=b.bones;for(var g in f)if(f.hasOwnProperty(g)){var h=c.findBoneIndex(g);if(-1==h)throw"Bone not found: "+g;var i=f[g];for(var j in i)if(i.hasOwnProperty(j)){var k=i[j];if("rotate"==j){var l=new spine.RotateTimeline(k.length);l.boneIndex=h;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n];l.setFrame(m,p.time,p.angle),spine.SkeletonJson.readCurve(l,m,p),m++}d.push(l),e=Math.max(e,l.frames[2*l.getFrameCount()-2])}else{if("translate"!=j&&"scale"!=j)throw"Invalid timeline type for a bone: "+j+" ("+g+")";var l,q=1;"scale"==j?l=new spine.ScaleTimeline(k.length):(l=new spine.TranslateTimeline(k.length),q=this.scale),l.boneIndex=h;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n],r=(p.x||0)*q,s=(p.y||0)*q;l.setFrame(m,p.time,r,s),spine.SkeletonJson.readCurve(l,m,p),m++}d.push(l),e=Math.max(e,l.frames[3*l.getFrameCount()-3])}}}var t=b.slots;for(var u in t)if(t.hasOwnProperty(u)){var v=t[u],w=c.findSlotIndex(u);for(var j in v)if(v.hasOwnProperty(j)){var k=v[j];if("color"==j){var l=new spine.ColorTimeline(k.length);l.slotIndex=w;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n],x=p.color,y=spine.SkeletonJson.toColor(x,0),z=spine.SkeletonJson.toColor(x,1),A=spine.SkeletonJson.toColor(x,2),B=spine.SkeletonJson.toColor(x,3);l.setFrame(m,p.time,y,z,A,B),spine.SkeletonJson.readCurve(l,m,p),m++}d.push(l),e=Math.max(e,l.frames[5*l.getFrameCount()-5])}else{if("attachment"!=j)throw"Invalid timeline type for a slot: "+j+" ("+u+")";var l=new spine.AttachmentTimeline(k.length);l.slotIndex=w;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n];l.setFrame(m++,p.time,p.name)}d.push(l),e=Math.max(e,l.frames[l.getFrameCount()-1])}}}var C=b.events;if(C){for(var l=new spine.EventTimeline(C.length),m=0,n=0,o=C.length;o>n;n++){var D=C[n],E=c.findEvent(D.name);if(!E)throw"Event not found: "+D.name;var F=new spine.Event(E);F.intValue=D.hasOwnProperty("int")?D["int"]:E.intValue,F.floatValue=D.hasOwnProperty("float")?D["float"]:E.floatValue,F.stringValue=D.hasOwnProperty("string")?D.string:E.stringValue,l.setFrame(m++,D.time,F)}d.push(l),e=Math.max(e,l.frames[l.getFrameCount()-1])}var G=b.draworder;if(G){for(var l=new spine.DrawOrderTimeline(G.length),H=c.slots.length,m=0,n=0,o=G.length;o>n;n++){var I=G[n],J=null;if(I.offsets){J=[],J.length=H;for(var K=H-1;K>=0;K--)J[K]=-1;var L=I.offsets,M=[];M.length=H-L.length;for(var N=0,O=0,K=0,P=L.length;P>K;K++){var Q=L[K],w=c.findSlotIndex(Q.slot);if(-1==w)throw"Slot not found: "+Q.slot;for(;N!=w;)M[O++]=N++;J[N+Q.offset]=N++}for(;H>N;)M[O++]=N++;for(var K=H-1;K>=0;K--)-1==J[K]&&(J[K]=M[--O])}l.setFrame(m++,I.time,J)}d.push(l),e=Math.max(e,l.frames[l.getFrameCount()-1])}c.animations.push(new spine.Animation(a,d,e))}},spine.SkeletonJson.readCurve=function(a,b,c){var d=c.curve;d&&("stepped"==d?a.curves.setStepped(b):d instanceof Array&&a.curves.setCurve(b,d[0],d[1],d[2],d[3]))},spine.SkeletonJson.toColor=function(a,b){if(8!=a.length)throw"Color hexidecimal length must be 8, recieved: "+a;return parseInt(a.substring(2*b,2*b+2),16)/255},spine.Atlas=function(a,b){this.textureLoader=b,this.pages=[],this.regions=[];var c=new spine.AtlasReader(a),d=[];d.length=4;for(var e=null;;){var f=c.readLine();if(null==f)break;if(f=c.trim(f),0==f.length)e=null;else if(e){var g=new spine.AtlasRegion;g.name=f,g.page=e,g.rotate="true"==c.readValue(),c.readTuple(d);var h=parseInt(d[0]),i=parseInt(d[1]);c.readTuple(d);var j=parseInt(d[0]),k=parseInt(d[1]);g.u=h/e.width,g.v=i/e.height,g.rotate?(g.u2=(h+k)/e.width,g.v2=(i+j)/e.height):(g.u2=(h+j)/e.width,g.v2=(i+k)/e.height),g.x=h,g.y=i,g.width=Math.abs(j),g.height=Math.abs(k),4==c.readTuple(d)&&(g.splits=[parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3])],4==c.readTuple(d)&&(g.pads=[parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3])],c.readTuple(d))),g.originalWidth=parseInt(d[0]),g.originalHeight=parseInt(d[1]),c.readTuple(d),g.offsetX=parseInt(d[0]),g.offsetY=parseInt(d[1]),g.index=parseInt(c.readValue()),this.regions.push(g)}else{e=new spine.AtlasPage,e.name=f,e.format=spine.Atlas.Format[c.readValue()],c.readTuple(d),e.minFilter=spine.Atlas.TextureFilter[d[0]],e.magFilter=spine.Atlas.TextureFilter[d[1]];var l=c.readValue();e.uWrap=spine.Atlas.TextureWrap.clampToEdge,e.vWrap=spine.Atlas.TextureWrap.clampToEdge,"x"==l?e.uWrap=spine.Atlas.TextureWrap.repeat:"y"==l?e.vWrap=spine.Atlas.TextureWrap.repeat:"xy"==l&&(e.uWrap=e.vWrap=spine.Atlas.TextureWrap.repeat),b.load(e,f),this.pages.push(e)}}},spine.Atlas.prototype={findRegion:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},dispose:function(){for(var a=this.pages,b=0,c=a.length;c>b;b++)this.textureLoader.unload(a[b].rendererObject)},updateUVs:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++){var e=b[c];e.page==a&&(e.u=e.x/a.width,e.v=e.y/a.height,e.rotate?(e.u2=(e.x+e.height)/a.width,e.v2=(e.y+e.width)/a.height):(e.u2=(e.x+e.width)/a.width,e.v2=(e.y+e.height)/a.height))}}},spine.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},spine.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},spine.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},spine.AtlasPage=function(){},spine.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},spine.AtlasRegion=function(){},spine.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},spine.AtlasReader=function(a){this.lines=a.split(/\r\n|\r|\n/)},spine.AtlasReader.prototype={index:0,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var a=this.readLine(),b=a.indexOf(":");if(-1==b)throw"Invalid line: "+a;return this.trim(a.substring(b+1))},readTuple:function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw"Invalid line: "+b;for(var d=0,e=c+1;3>d;d++){var f=b.indexOf(",",e);if(-1==f){if(0==d)throw"Invalid line: "+b;break}a[d]=this.trim(b.substr(e,f-e)),e=f+1}return a[d]=this.trim(b.substring(e)),d+1}},spine.AtlasAttachmentLoader=function(a){this.atlas=a},spine.AtlasAttachmentLoader.prototype={newAttachment:function(a,b,c){switch(b){case spine.AttachmentType.boundingbox:return new spine.BoundingBoxAttachment(c);case spine.AttachmentType.region:var d=this.atlas.findRegion(c);if(!d)throw"Region not found in atlas: "+c+" ("+b+")";var e=new spine.RegionAttachment(c);return e.rendererObject=d,e.setUVs(d.u,d.v,d.u2,d.v2,d.rotate),e.regionOffsetX=d.offsetX,e.regionOffsetY=d.offsetY,e.regionWidth=d.width,e.regionHeight=d.height,e.regionOriginalWidth=d.originalWidth,e.regionOriginalHeight=d.originalHeight,e}throw"Unknown attachment type: "+b}},spine.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},spine.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(a,b){var c=a.slots,d=c.length,e=a.x,f=a.y,g=this.boundingBoxes,h=this.polygonPool,i=this.polygons;g.length=0;for(var j=0,k=i.length;k>j;j++)h.push(i[j]);i.length=0;for(var j=0;d>j;j++){var l=c[j],m=l.attachment;if(m.type==spine.AttachmentType.boundingBox){g.push(m);var n=h.length;n>0?(polygon=h[n-1],h.splice(n-1,1)):polygon=[],i.push(polygon),polygon.length=m.vertices.length,m.computeWorldVertices(e,f,l.bone,polygon)}}b&&this.aabbCompute()},aabbCompute:function(){for(var a=this.polygons,b=Number.MAX_VALUE,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=Number.MIN_VALUE,f=0,g=a.length;g>f;f++)for(var h=a[f],i=0,j=h.length;j>i;i+=2){var k=h[i],l=h[i+1];b=Math.min(b,k),c=Math.min(c,l),d=Math.max(d,k),e=Math.max(e,l)}this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},aabbContainsPoint:function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},aabbIntersectsSegment:function(a,b,c,d){var e=this.minX,f=this.minY,g=this.maxX,h=this.maxY;if(e>=a&&e>=c||f>=b&&f>=d||a>=g&&c>=g||b>=h&&d>=h)return!1;var i=(d-b)/(c-a),j=i*(e-a)+b;if(j>f&&h>j)return!0;if(j=i*(g-a)+b,j>f&&h>j)return!0;var k=(f-b)/i+a;return k>e&&g>k?!0:(k=(h-b)/i+a,k>e&&g>k?!0:!1)},aabbIntersectsSkeleton:function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},containsPoint:function(a,b){for(var c=this.polygons,d=0,e=c.length;e>d;d++)if(this.polygonContainsPoint(c[d],a,b))return this.boundingBoxes[d];return null},intersectsSegment:function(a,b,c,d){for(var e=this.polygons,f=0,g=e.length;g>f;f++)if(e[f].intersectsSegment(a,b,c,d))return boundingBoxes[f];return null},polygonContainsPoint:function(a,b,c){for(var d=a.length,e=d-2,f=!1,g=0;d>g;g+=2){var h=a[g+1],i=a[e+1];if(c>h&&i>=c||c>i&&h>=c){var j=a[g];j+(c-h)/(i-h)*(a[e]-j)<b&&(f=!f)}e=g}return f},intersectsSegment:function(a,b,c,d,e){for(var f=a.length,g=b-d,h=c-e,i=b*e-c*d,j=a[f-2],k=a[f-1],l=0;f>l;l+=2){var m=a[l],n=a[l+1],o=j*n-k*m,p=j-m,q=k-n,r=g*q-h*p,s=(i*p-g*o)/r;if((s>=j&&m>=s||s>=m&&j>=s)&&(s>=b&&d>=s||s>=d&&b>=s)){var t=(i*q-h*o)/r;if((t>=k&&n>=t||t>=n&&k>=t)&&(t>=c&&e>=t||t>=e&&c>=t))return!0}j=m,k=n}return!1},getPolygon:function(a){var b=this.boundingBoxes.indexOf(a);return-1==b?null:this.polygons[b]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},function(){var a={},b=null,c=!0,d=!1;if("undefined"!=typeof AudioContext)b=new AudioContext;else if("undefined"!=typeof webkitAudioContext)b=new webkitAudioContext;else if("undefined"!=typeof Audio){c=!1;try{new Audio}catch(e){d=!0}}else c=!1,d=!0;if(c){var f="undefined"==typeof b.createGain?b.createGainNode():b.createGain();f.gain.value=1,f.connect(b.destination)}var g=function(){this._volume=1,this._muted=!1,this.usingWebAudio=c,this._howls=[]};g.prototype={volume:function(a){var b=this;if(a=parseFloat(a),a>=0&&1>=a){b._volume=a,c&&(f.gain.value=a);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].volume=b._howls[d]._volume*b._volume;return b}return c?f.gain.value:b._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(a){var b=this;b._muted=a,c&&(f.gain.value=a?0:b._volume);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].muted=a}};var h=new g,i=null;if(!d){i=new Audio;var j={mp3:!!i.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var k=function(a){var b=this;b._autoplay=a.autoplay||!1,b._buffer=a.buffer||!1,b._duration=a.duration||0,b._format=a.format||null,b._loop=a.loop||!1,b._loaded=!1,b._sprite=a.sprite||{},b._src=a.src||"",b._pos3d=a.pos3d||[0,0,-.5],b._volume=void 0!==a.volume?a.volume:1,b._urls=a.urls||[],b._rate=a.rate||1,b._onload=[a.onload||function(){}],b._onloaderror=[a.onloaderror||function(){}],b._onend=[a.onend||function(){}],b._onpause=[a.onpause||function(){}],b._onplay=[a.onplay||function(){}],b._onendTimer=[],b._webAudio=c&&!b._buffer,b._audioNode=[],b._webAudio&&b._setupAudioNode(),h._howls.push(b),b.load()};if(k.prototype={load:function(){var b=this,c=null;if(d)return void b.on("loaderror");for(var e=0;e<b._urls.length;e++){var f,g;if(b._format)f=b._format;else{if(g=b._urls[e].toLowerCase().split("?")[0],f=g.match(/.+\.([^?]+)(\?|$)/),f=f&&f.length>=2?f:g.match(/data\:audio\/([^?]+);/),!f)return void b.on("loaderror");f=f[1]}if(j[f]){c=b._urls[e];break}}if(!c)return void b.on("loaderror");if(b._src=c,b._webAudio)l(b,c);else{var i=new Audio;b._audioNode.push(i),i.src=c,i._pos=0,i.preload="auto",i.volume=h._muted?0:b._volume*h.volume(),a[c]=b;var k=function(){b._duration=i.duration,0===Object.getOwnPropertyNames(b._sprite).length&&(b._sprite={_default:[0,1e3*b._duration]}),b._loaded||(b._loaded=!0,b.on("load")),b._autoplay&&b.play(),i.removeEventListener("canplaythrough",k,!1)};i.addEventListener("canplaythrough",k,!1),i.load()}return b},urls:function(a){var b=this;return a?(b.stop(),b._urls="string"==typeof a?[a]:a,b._loaded=!1,b.load(),b):b._urls},play:function(a,c){var d=this;return"function"==typeof a&&(c=a),a&&"function"!=typeof a||(a="_default"),d._loaded?d._sprite[a]?(d._inactiveNode(function(e){e._sprite=a;var f,g=e._pos>0?e._pos:d._sprite[a][0]/1e3,i=d._sprite[a][1]/1e3-e._pos,j=!(!d._loop&&!d._sprite[a][2]),k="string"==typeof c?c:Math.round(Date.now()*Math.random())+"";if(function(){var b={id:k,sprite:a,loop:j};f=setTimeout(function(){!d._webAudio&&j&&d.stop(b.id,b.timer).play(a,b.id),d._webAudio&&!j&&(d._nodeById(b.id).paused=!0,d._nodeById(b.id)._pos=0),d._webAudio||j||d.stop(b.id,b.timer),d.on("end",k)},1e3*i),d._onendTimer.push(f),b.timer=d._onendTimer[d._onendTimer.length-1]}(),d._webAudio){var l=d._sprite[a][0]/1e3,m=d._sprite[a][1]/1e3;e.id=k,e.paused=!1,n(d,[j,l,m],k),d._playStart=b.currentTime,e.gain.value=d._volume,"undefined"==typeof e.bufferSource.start?e.bufferSource.noteGrainOn(0,g,i):e.bufferSource.start(0,g,i)}else{if(4!==e.readyState)return d._clearEndTimer(f),function(){var b=d,f=a,g=c,h=e,i=function(){b.play(f,g),h.removeEventListener("canplaythrough",i,!1)};h.addEventListener("canplaythrough",i,!1)}(),d;e.id=k,e.currentTime=g,e.muted=h._muted,e.volume=d._volume*h.volume(),setTimeout(function(){e.play()},0)}return d.on("play"),"function"==typeof c&&c(k),d}),d):("function"==typeof c&&c(),d):(d.on("load",function(){d.play(a,c)}),d)},pause:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.pause(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=c.pos(null,a),c._webAudio){if(!d.bufferSource)return c;d.paused=!0,"undefined"==typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause();return c.on("pause"),c},stop:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.stop(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=0,c._webAudio){if(!d.bufferSource)return c;d.paused=!0,"undefined"==typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause(),d.currentTime=0;return c},mute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=0:c.volume=0),b},unmute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=b._volume:c.volume=b._volume),b},volume:function(a,b){var c=this;if(a=parseFloat(a),a>=0&&1>=a){if(c._volume=a,!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;var d=b?c._nodeById(b):c._activeNode();return d&&(c._webAudio?d.gain.value=a:d.volume=a*h.volume()),c}return c._volume},loop:function(a){var b=this;return"boolean"==typeof a?(b._loop=a,b):b._loop},sprite:function(a){var b=this;return"object"==typeof a?(b._sprite=a,b):b._sprite},pos:function(a,c){var d=this;if(!d._loaded)return d.on("load",function(){d.pos(a)}),"number"==typeof a?d:d._pos||0;a=parseFloat(a);var e=c?d._nodeById(c):d._activeNode();if(e)return d._webAudio?a>=0?(d.pause(c),e._pos=a,d.play(e._sprite,c),d):e._pos+(b.currentTime-d._playStart):a>=0?(e.currentTime=a,d):e.currentTime;if(a>=0)return d;for(var f=0;f<d._audioNode.length;f++)if(d._audioNode[f].paused&&4===d._audioNode[f].readyState)return d._webAudio?d._audioNode[f]._pos:d._audioNode[f].currentTime},pos3d:function(a,b,c,d){var e=this;if(b="undefined"!=typeof b&&b?b:0,c="undefined"!=typeof c&&c?c:-.5,!e._loaded)return e.on("play",function(){e.pos3d(a,b,c,d)}),e;if(!(a>=0||0>a))return e._pos3d;if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,b,c],f.panner.setPosition(a,b,c))}return e},fade:function(a,b,c,d,e){var f=this,g=Math.abs(a-b),h=a>b?"down":"up",i=g/.01,j=c/i;if(!f._loaded)return f.on("load",function(){f.fade(a,b,c,d,e)}),f;f.volume(a,e);for(var k=1;i>=k;k++)!function(){var a=f._volume+("up"===h?.01:-.01)*k,c=Math.round(1e3*a)/1e3,g=b;setTimeout(function(){f.volume(c,e),c===g&&d&&d()},j*k)}()},fadeIn:function(a,b,c){return this.volume(0).play().fade(0,a,b,c)},fadeOut:function(a,b,c,d){var e=this;return e.fade(e._volume,a,b,function(){c&&c(),e.pause(d),e.on("end")},d)},_nodeById:function(a){for(var b=this,c=b._audioNode[0],d=0;d<b._audioNode.length;d++)if(b._audioNode[d].id===a){c=b._audioNode[d];break}return c},_activeNode:function(){for(var a=this,b=null,c=0;c<a._audioNode.length;c++)if(!a._audioNode[c].paused){b=a._audioNode[c];break}return a._drainPool(),b},_inactiveNode:function(a){for(var b=this,c=null,d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState){a(b._audioNode[d]),c=!0;break}if(b._drainPool(),!c){var e;b._webAudio?(e=b._setupAudioNode(),a(e)):(b.load(),e=b._audioNode[b._audioNode.length-1],e.addEventListener("loadedmetadata",function(){a(e)}))}},_drainPool:function(){var a,b=this,c=0;for(a=0;a<b._audioNode.length;a++)b._audioNode[a].paused&&c++;for(a=b._audioNode.length-1;a>=0&&!(5>=c);a--)b._audioNode[a].paused&&(b._webAudio&&b._audioNode[a].disconnect(0),c--,b._audioNode.splice(a,1))},_clearEndTimer:function(a){var b=this,c=b._onendTimer.indexOf(a);c=c>=0?c:0,b._onendTimer[c]&&(clearTimeout(b._onendTimer[c]),b._onendTimer.splice(c,1))},_setupAudioNode:function(){var a=this,c=a._audioNode,d=a._audioNode.length;return c[d]="undefined"==typeof b.createGain?b.createGainNode():b.createGain(),c[d].gain.value=a._volume,c[d].paused=!0,c[d]._pos=0,c[d].readyState=4,c[d].connect(f),c[d].panner=b.createPanner(),c[d].panner.setPosition(a._pos3d[0],a._pos3d[1],a._pos3d[2]),c[d].panner.connect(c[d]),c[d]},on:function(a,b){var c=this,d=c["_on"+a];if("function"==typeof b)d.push(b);else for(var e=0;e<d.length;e++)b?d[e].call(c,b):d[e].call(c);return c},off:function(a,b){for(var c=this,d=c["_on"+a],e=b.toString(),f=0;f<d.length;f++)if(e===d[f].toString()){d.splice(f,1);break}return c},unload:function(){for(var b=this,c=b._audioNode,d=0;d<b._audioNode.length;d++)c[d].paused||b.stop(c[d].id),b._webAudio?c[d].disconnect(0):c[d].src="";var e=h._howls.indexOf(b);null!==e&&e>=0&&h._howls.splice(e,1),delete a[b._src],b=null}},c)var l=function(c,d){if(d in a)c._duration=a[d].duration,m(c);else{var e=new XMLHttpRequest;e.open("GET",d,!0),e.responseType="arraybuffer",e.onload=function(){b.decodeAudioData(e.response,function(b){b&&(a[d]=b,m(c,b))},function(){c.on("loaderror")})},e.onerror=function(){c._webAudio&&(c._buffer=!0,c._webAudio=!1,c._audioNode=[],delete c._gainNode,c.load())};try{e.send()}catch(f){e.onerror()}}},m=function(a,b){a._duration=b?b.duration:a._duration,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play()},n=function(c,d,e){var f=c._nodeById(e);f.bufferSource=b.createBufferSource(),f.bufferSource.buffer=a[c._src],f.bufferSource.connect(f.panner),f.bufferSource.loop=d[0],d[0]&&(f.bufferSource.loopStart=d[1],f.bufferSource.loopEnd=d[1]+d[2]),f.bufferSource.playbackRate.value=c._rate};"function"==typeof define&&define.amd&&define("howler",function(){return{Howler:h,Howl:k}}),window.Howler=h,window.Howl=k}();var modules=modules||{};modules.glue=modules.glue||{},modules.glue.sugar=function(a,b){"use strict";var c=function(a){return n(a.width)&&n(a.height)},d=function(a){return n(a.x)&&n(a.y)},e=function(a){return r(a,"get")&&j(a.get)&&r(a,"set")&&j(a.set)&&r(a,"transpose")&&j(a.transpose)&&r(a,"add")&&j(a.add)&&r(a,"multiply")&&j(a.multiply)?!0:void 0},f=function(a){return r(a,"get")&&j(a.get)&&r(a,"getValue")&&j(a.getValue)&&r(a,"iterate")&&j(a.iterate)&&r(a,"set")&&j(a.iterate)&&r(a,"unset")&&j(a.iterate)?!0:void 0},g=function(a){return"string"==typeof a||a instanceof String},h=Array.prototype.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},i=function(a){return"[object Object]"===Object.prototype.toString.call(a)},j=function(a){return"[object Function]"===Object.prototype.toString.call(a)},k=function(a,b){var c=a.length;if(c!=b.length)return!1;for(;c--;)if(a[c]!==b[c])return!1;return!0},l=function(b,c){var d,e,f,g,h,i,j,k=[],l=a;for(e=0,g=b.length;g>e;++e){if(l=a,i=b[e].split("."),1===i.length)j=a[i];else for(d=0,f=i.length;f>d;++d)h=i[d],d===f-1?j=l[h]:l[h]&&(l=l[h]);if(!j||!this.isFunction(j))throw"glue.sugar.imports: Module "+b[e]+" not found or not a function";k.push(j)}return c.apply(glue,k)},m=function(){},n=function(a){return"[object Number]"===Object.prototype.toString.call(a)},o=function(a){return a===!0||a===!1||"[object Boolean]"===Object.prototype.toString.call(a)},p=function(a){return"[object Date]"===Object.prototype.toString.call(a)},q=function(a){return parseFloat(a)===parseInt(a,10)&&!isNaN(a)},r=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},s=function(a){return void 0===a},t=function(a){return void 0!==a},u=function(a){var b;if(""===a||0===a||"0"===a||null===a||a===!1||this.isUndefined(a))return!0;if(this.isArray(a)&&0===a.length)return!0;if(this.isObject(a)){for(b in a)if(this.has(a,b))return!1;return!0}return!1},v=function(a){return"[object Arguments]"===Object.prototype.toString.call(a)},w=function(a,b){return a+Math.floor(Math.random()*(b-a+1))},x=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},y=function(){for(var a=this.toArray(arguments),b=this["is"+this.upperFirst(a.shift())],c=a.length;c--;)if(!b.call(null,a[c]))return!1;return!0},z=function(a,b){var c;if(this.multiIs("array",a,b))return a.concat(b);for(c in b)this.has(b,c)&&(this.has(a,c)&&(a.base=a.base||{},a.base[c]=a[c]),a[c]=this.isObject(b[c])?this.combine({},b[c]):b[c]);return a},A=function(a){return/^\[object (HTMLCollection|NodeList|Object)\]$/.test(toString.call(a))&&this.isNumber(a.length)&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},B=function(a){var b,c=[];if(!a)return[a];if(this.isArgument(a))return Array.prototype.slice.call(a);if(this.isString(a)&&a.split(""),this.isArray(a))return Array.prototype.slice.call(a);if(this.isDomList(a))return Array.prototype.slice.call(a);for(b in a)this.has(a,b)&&c.push(a[b]);return c},C=function(a,b){return this.isString(a)?-1!==a.indexOf(b)?!0:!1:this.isArray(a)?-1!==this.indexOf(a,b)?!0:!1:this.has(a,b)},D=function(a,b){var c=0;if(null===a)return-1;if(a.indexOf)return a.indexOf(b);for(c=a.length;c--;)if(a[c]===b)return c;return-1},E=function(a){return!(!a||1!==a.nodeType)},F=function(a){var b,c=0;if(!a)return 0;if(this.isObject(a))for(b in a)this.has(a,b)&&++c;return(this.isString(a)||this.isArray(a)||this.isArguments(a))&&(c=a.length),this.isNumber(a)&&(c=a.toString().length),c},G=function(a){return this.combine({},a,!0)},H=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},I=Object.prototype.keys||function(a){var b,c=[];if(a==Object(a))for(b in a)this.has(a,b)&&(c[c.length]=b);return c},J=function(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(a,arguments))}},K=function(a,b){var c={};return b=b||function(a){return a},function(){var d=b.apply(null,arguments);return this.has(c,d)?c[d]:c[d]=a.apply(a,arguments)}},L=function(a,b){var c,d;for(c=0,d=a.length;d>c;++c)if(a[c]===b){a.splice(c,1);break}},M=function(c,d,e){var f;return c.style&&this.isEmpty(c.style[d])?c.currentStyle?f=c.currentStyle[d]:a.getComputedStyle&&(f=b.defaultView.getComputedStyle(c,null).getPropertyValue(d)):c.style&&(f=c.style[d]),e?parseFloat(f):f},N=function(a){return typeof a==typeof Function},O=function(a,c,d){var e;return d&&(d.style.display="none"),e=b.elementFromPoint(a,c),e&&this&&this.containsClass(e,"omit")&&(e=O(a,c,e)),d&&(d.style.display=""),e},P=function(a,c,d){var e,f=!1,g=[];for(d&&(d.style.display="none"),f=b.elementFromPoint(a,c);f&&"BODY"!==f.tagName&&"HTML"!==f.tagName;)g.push(f),U(f,"animated"),f.style.display="none",f=b.elementFromPoint(a,c);for(e=0;e<g.length;++e)g[e].style.display="block";return d&&(d.style.display="block"),g},Q=function(a,b){return a.getAttribute("data-"+b)},R=function(a,b,c){return a.setAttribute("data-"+b,c)},S=function(a,c){return(S=b.documentElement.classList?function(a,b){return a.classList.contains(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return a.className.match(c)})(a,c)},T=function(a,c){var d,e,f=this;return(T=b.documentElement.classList?function(a,b){if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.classList.add(b[d]);else a.classList.add(b)}:function(a,b){if(!a)return!1;if(!S(a,b))if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.className+=(a.className?" ":"")+b[d];else a.className+=(a.className?" ":"")+b})(a,c)},U=function(a,c){return(U=b.documentElement.classList?function(a,b){a.classList.remove(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c,"$2")})(a,c)},V=function(a){a.className="",a.setAttribute("class","")},W=function(a,c){return(W=b.documentElement.classList&&b.documentElement.classList.toggle?function(a,b){return a.classList.toggle(b)}:function(a,b){return S(a,b)?(U(a,b),!1):(T(a,b),!0)})(a,c)},X=function(a,b){if(document.createEvent){var c=document.createEvent("MouseEvents");return c.initEvent(b,!0,!1),a.dispatchEvent(c),!0}return document.createEventObject?(a.fireEvent("on"+b),!0):"function"==typeof a["on"+b]?(a["on"+b](),!0):!1},Y=function(a){return b.querySelector(a)},Z=function(a,b){function c(){var f=(new Date).getTime();f-d>=b?a():e=requestAnimationFrame(c)}var d=(new Date).getTime(),e=null;return void 0===b&&(b=1),c(),{cancel:function(){"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame(e)}}},$=function(a,b,c,d){var e,f,g={start:["animationstart","animationstart","webkitAnimationStart","oanimationstart","MSAnimationStart"],iteration:["animationiteration","animationiteration","webkitAnimationIteration","oanimationiteration","MSAnimationIteration"],end:["animationend","animationend","webkitAnimationEnd","oanimationend","MSAnimationEnd"],tend:["transitionend","transitionend","webkitTransitionEnd","otransitionend","MSTransitionEnd"]},h=g[b]||[],d=d||"add";for(f=0,e=h.length;e>f;++f)"add"===d?a.addEventListener(h[f],c,!1):"remove"===d&&a.removeEventListener(h[f],c,!1)},_=function(c){var d=b.readyState;"complete"===d||"interactive"===d?c():a.addEventListener?a.addEventListener("DOMContentLoaded",c):a.attachEvent("onload",c)},ab=function(){var a=function(a,c){return b(a.slice(),c)},b=function(a,b){"function"!=typeof b&&(b=function(a,b){return String(a).localeCompare(b)});var d=a.length;if(1>=d)return a;for(var e=new Array(d),f=1;d>f;f*=2){c(a,b,f,e);var g=a;a=e,e=g}return a},c=function(a,b,c,d){var e,f,g,h,i,j=a.length,k=0,l=2*c;for(e=0;j>e;e+=l)for(f=e+c,g=f+c,f>j&&(f=j),g>j&&(g=j),h=e,i=f;;)if(f>h&&g>i)d[k++]=b(a[h],a[i])<=0?a[h++]:a[i++];else if(f>h)d[k++]=a[h++];else{if(!(g>i))break;d[k++]=a[i++]}};return a.inplace=function(a,d){var e=b(a,d);return e!==a&&c(e,null,a.length,a),a},a}();return Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){var b=obj.__proto__||obj.constructor.prototype;return a in this&&(!(a in b)||b[a]!==this[a])}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=window,d=0;d<b.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[b[d]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[b[d]+"CancelAnimationFrame"]||c[b[d]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=c.setTimeout(function(){b(d+e)},e);return a=d+e,f}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){clearTimeout(a)})}(),CanvasRenderingContext2D.prototype.clear=CanvasRenderingContext2D.prototype.clear||function(a){a&&(this.save(),this.setTransform(1,0,0,1,0,0)),this.clearRect(0,0,this.canvas.width,this.canvas.height),a&&this.restore()},{isVector:d,isDimension:c,isMatrix:e,isString:g,isArray:h,isArray2D:f,isObject:i,isFunction:j,emptyFn:m,isNumber:n,isBoolean:o,isDate:p,isInt:q,has:r,isUndefined:s,isDefined:t,isEmpty:u,isArgument:v,getRandom:w,upperFirst:x,multiIs:y,combine:z,imports:l,isDomList:A,toArray:B,contains:C,indexOf:D,isElement:E,size:F,clone:G,isRegex:H,keys:I,once:J,memoize:K,removeObject:L,getStyle:M,isFunctionByType:N,getNodeOnPoint:O,getNodesOnPoint:P,getData:Q,setData:R,containsClass:S,addClass:T,removeClass:U,removeClasses:V,toggleClass:W,triggerEvent:X,$:Y,setAnimationFrameTimeout:Z,animationEvent:$,domReady:_,arrayMatch:k,sort:{stable:ab}}
}(window,window.document);var adapters=adapters||{};adapters.glue=function(a,b){"use strict";return{module:{create:a.define,get:a.require,config:a.requirejs.config},sugar:b.sugar,audio:Howl}}(window,modules.glue),function(a){var b=function(a){"use strict";return{module:a.glue.module,sugar:a.glue.sugar,audio:a.glue.audio}}(adapters);a.glue={module:b.module},a.game={},b.module.create("glue",function(){return b})}(window),glue.module.create("glue/basecomponent",["glue"],function(a){"use strict";var b=a.sugar;return function(a,c){var d,e,f;return b.isString(a)&&(d=a,e=c||{}),{set:function(c){return b.isObject(c)?(f=c,e[a]=c,b.isFunction(c.register)&&c.register(),e):void 0},getName:function(){return d},getBaseObject:function(){return e},getComponent:function(){return f},register:function(a){e.register(a,f[a],d)},unregister:function(a){e.unregister(a,d)}}}}),glue.module.create("glue/baseobject",["glue","glue/math/vector","glue/math/rectangle","glue/math/dimension","glue/math/matrix"],function(a,b,c,d,e){var f=a.sugar,g=0;return function(){var a,h,i,j,k,l=!0,m=!0,n=Array.prototype.slice.call(arguments),o=null,p=b(0,0),q=b(0,0),r=d(0,0),s=n.length,t=0,u=["update","draw","pointerDown","pointerMove","pointerUp"],v=["animatable","spritable","spineable"],w=v.length,x={destroy:{},draw:{},update:{},pointerDown:{},pointerMove:{},pointerUp:{}},y=[],z=[],A=null,B=++g,C=function(a,b){var c;i=x[a];for(c in i)"draw"===a&&f.contains(v,c)||i[c].call(F,b)},D=function(a){var b,c,d,g=f.clone(a),h=g.position.toMatrix(),i=e(3,3),j=e(3,3),k=e(3,3);i.set(2,0,-p.x),i.set(2,1,-p.y),h.multiply(i);for(d in x.draw)"rotatable"===d&&(b=Math.sin(-F.rotatable.getAngleRadian()),c=Math.cos(-F.rotatable.getAngleRadian()),k.set(0,0,c),k.set(1,0,-b),k.set(0,1,b),k.set(1,1,c),h.multiply(k)),"scalable"===d&&(j.set(0,0,1/F.scalable.getScale().x),j.set(1,1,1/F.scalable.getScale().y),h.multiply(j));return g.position.x=h.get(0,0),g.position.y=h.get(0,1),g.parent=a,g},E=function(){var a,b;for(a=0;a<z.length;++a)b=z[a],f.isFunction(b.destroy)&&b.destroy(),f.removeObject(y,b);z.length=0},F={add:function(a){return f.combine(this,a)},setName:function(b){a=b},getName:function(){return a},update:function(a){var b,c;if(l)for(C("update",a),E(),b=0,c=y.length;c>b;++b)y[b].update(a)},count:0,updateWhenPaused:!1,draw:function(a){var c,d,e=a.scroll||b(0,0),f=a.context;if(m){for(f.save(),f.translate(Math.round(p.x),Math.round(p.y)),null===A&&f.translate(Math.round(-e.x),Math.round(-e.y)),C("draw",a),f.translate(Math.round(-q.x),Math.round(-q.y)),j=0;w>j;++j)k=x.draw[v[j]],k&&k(a);for(f.translate(Math.round(q.x),Math.round(q.y)),c=0,d=y.length;d>c;++c)y[c].draw(a);f.restore()}},pointerDown:function(a){var b,c,d=y.length;if(l&&(C("pointerDown",a),d))for(c=D(a),b=0;d>b;++b)y[b].pointerDown(c)},pointerMove:function(a){var b,c,d=y.length;if(l&&(C("pointerMove",a),d))for(c=D(a),b=0;d>b;++b)y[b].pointerMove(c)},pointerUp:function(a){var b,c,d=y.length;if(l&&(C("pointerUp",a),d))for(c=D(a),b=0;d>b;++b)y[b].pointerUp(c)},register:function(a,b,c){f.contains(u,a)&&f.isFunction(b)&&(x[a][c]=b)},unregister:function(a,b){f.contains(u,a)&&f.isFunction(x[a][b])&&delete x[a][b]},getPosition:function(){return p},setPosition:function(a){f.isVector(a)&&(p.x=a.x,p.y=a.y,this.updateBoundingBox())},setPositionObject:function(a){f.isVector(a)&&(p=a,this.updateBoundingBox())},getDimension:function(){return r},setDimension:function(a){f.isDimension(a)&&(r=a,this.updateBoundingBox())},getBoundingBox:function(){return h},setBoundingBox:function(a){h=a},updateBoundingBox:function(){var a=F.scalable?F.scalable.getScale():b(1,1),d=p.x-q.x*a.x,e=p.y-q.y*a.y,f=p.x+(r.width-q.x)*a.x,g=p.y+(r.height-q.y)*a.y;a.x<0&&(f=[d,d=f][0]),a.y<0&&(g=[e,e=g][0]),h=c(d,e,f,g)},setOrigin:function(a){f.isVector(a)&&(q.x=f.isNumber(a.x)?a.x:q.x,q.y=f.isNumber(a.y)?a.y:q.y,this.updateBoundingBox())},getOrigin:function(){return q},isActive:function(){return l},setActive:function(a){if(!f.isBoolean(a))throw"value should be a boolean";l=a},isVisible:function(){return m},setVisible:function(a){if(!f.isBoolean(a))throw"value should be a boolean";m=a},addChild:function(a){y.push(a),a.setParent(this),a.init&&a.init()},removeChild:function(a){z.push(a)},getChildren:function(){return y},setParent:function(a){A=a},getParent:function(){return A},getID:function(){return B}};for(t;s>t;++t)(o=n[t])(F);return F}}),glue.module.create("glue/component/animatable",["glue","glue/math/vector","glue/basecomponent","glue/component/spritable"],function(a,b,c,d){"use strict";var e=a.sugar;return function(a){var b,f,g,h,i,j,k,l,m,n,o,p,q=c("animatable",a),r=d(a).spritable,s={},t=0,u=1,v=60,w=1/v,x=w,y=function(){l||(r.setImage(f.image),l=f.image),u=f.endFrame-f.startFrame,w=f.fps?1/f.fps:1/b.fps,x=w,j=f.startFrame,k=f.endFrame,t=j,m=f.loopCount||void 0,p=f.onComplete||void 0,n=0,o=!0};return q.set({setup:function(a){if(a){if(!a.animation)throw"Specify settings.animation";if(b=a.animation,a.animation.animations&&(s=a.animation.animations),!(e.isDefined(a.animation.frameCount)||e.isDefined(a.animation.frameWidth)&&e.isDefined(a.animation.frameHeight)))throw"Specify settings.animation.frameCount"}r.setup(a),a.image&&(l=a.image,g=a.animation.frameWidth||a.image.width/a.animation.frameCount,h=a.animation.frameHeight||a.image.height,i=a.image.width/g)},update:function(a){o&&(x-=a.deltaT,0>=x&&(x=w,++t,t>k&&(e.isDefined(m)&&(++n,n===m&&(o=!1,e.isDefined(p)&&p.call(this.animatable))),t=j)))},draw:function(b){{var c=(a.getPosition(),Math.floor(t/i)*h),d=t%i*g;a.getOrigin()}b.context.drawImage(l,d,c,g,h,0,0,g,h)},setAnimation:function(a){s[a]&&(f=s[a],y())},getDimension:function(){var b=a.getDimension();return b.width=g,b},getBoundingBox:function(){var b=a.getBoundingBox();return b.x2=b.x1+g,b},getFrameWidth:function(){return g},register:function(){q.register("draw"),q.register("update")},unregister:function(){q.unregister("draw"),q.unregister("update")}}),a}}),glue.module.create("glue/component/clickable",["glue","glue/basecomponent"],function(a,b){"use strict";return function(a){var c=b("clickable",a),d=function(b){return a.getBoundingBox().hasPosition(b.position)},e=function(b){d(b)&&(a.onClickDown&&a.onClickDown(b),a.onClick&&a.onClick(b))},f=function(b){d(b)&&a.onClickUp&&a.onClickUp(b)};return c.set({pointerDown:function(a){e(a)},pointerUp:function(a){f(a)},register:function(){c.register("pointerDown"),c.register("pointerUp")},unregister:function(){c.unregister("pointerDown"),c.unregister("pointerUp")}}),a}}),glue.module.create("glue/component/draggable",["glue","glue/math/vector","glue/event/system","glue/basecomponent"],function(a,b,c,d){"use strict";var e=[],f=30;return function(a){var g,h=d("draggable",a),i=!1,j=b(0,0),k=function(a){var b,c=0,d=e.length,f=!0;for(c;d>c;++c)if(b=e[c],b!==a&&b.z>a.z){f=!1;break}return f},l=function(b){return a.getBoundingBox().hasPosition(b.position)},m=function(b){l(b)&&i===!1&&(e.push(a),setTimeout(function(){return k(a)?(i=!0,g=b.pointerId,j=b.position.substract(a.getPosition()),a.dragStart&&a.dragStart(b),!1):void 0},f))},n=function(b){i===!0&&g===b.pointerId&&(a.setPosition(b.position.substract(j)),a.dragMove&&a.dragMove(b))},o=function(b){return i===!0?(c.fire("draggable.drop",a,b),e=[],g=void 0,i=!1,a.dragEnd&&a.dragEnd(b,function(){}),!1):void 0};return h.set({pointerDown:function(a){m(a)},pointerMove:function(a){n(a)},pointerUp:function(a){o(a)},dragStartTimeout:function(a){f=a},register:function(){h.register("pointerDown"),h.register("pointerMove"),h.register("pointerUp")},unregister:function(){h.unregister("pointerDown"),h.unregister("pointerMove"),h.unregister("pointerUp")}}),a}}),glue.module.create("glue/component/droptarget",["glue","glue/event/system","glue/basecomponent"],function(a,b,c){"use strict";return function(a){var d=c("droptarget",a),e=function(b,c){return a.getBoundingBox().hasPosition(c.position)},f=function(b,c){e(a,c)&&a.onDrop&&a.onDrop(b,c)};return d.set({setup:function(){b.on("draggable.drop",f)},destroy:function(){b.off("draggable.drop",f)}}),a}}),glue.module.create("glue/component/fadable",["glue","glue/basecomponent"],function(a,b){"use strict";var c=a.sugar;return function(a){var d,e,f=b("fadable",a),g=!1,h=!1,i=.5,j=null;return f.set({update:function(a){var b=a.deltaT;g===!0?e-b*i>d?d+=i*b:(d=e,g=!1,null!==j&&j()):h===!0&&(d>e+b*i?d-=i*b:(d=e,h=!1,null!==j&&j()))},draw:function(a){a.context.globalAlpha=d},fade:function(a,b,f){d=b,e=f,g=f>b?!0:!1,h=b>f?!0:!1,c.isDefined(a)&&(j=a)},fadeIn:function(a,b){d=0,e=b||1,g=!0,c.isDefined(a)&&(j=a)},fadeOut:function(a,b){d=1,e=b||0,h=!0,c.isDefined(a)&&(j=a)},setAlpha:function(a){c.isNumber(a)&&(d=a)},getAlpha:function(){return d},setTargetAlpha:function(a){c.isNumber(a)&&(e=a)},getTargetAlpha:function(){return e},setFadeSpeed:function(a){c.isNumber(a)&&(i=a)},getFadeSpeed:function(){return i},atTarget:function(){return!g&&!h},register:function(){f.register("draw"),f.register("update")},unregister:function(){f.unregister("draw"),f.unregister("update")}}),a}}),glue.module.create("glue/component/hoverable",["glue","glue/basecomponent"],function(a,b){"use strict";return function(a){var c=b("hoverable",a),d="not hovered",e=function(b){return a.getBoundingBox().hasPosition(b.position)},f=function(b){e(b)?"not hovered"===d&&(a.hoverOver&&a.hoverOver(b),d="hovered"):"hovered"===d&&(a.hoverOut&&a.hoverOut(b),d="not hovered")};return c.set({pointerMove:function(a){f(a)},register:function(){c.register("pointerMove")},unregister:function(){c.unregister("pointerMove")}}),a}}),glue.module.create("glue/component/kineticable",["glue","glue/basecomponent","glue/math","glue/math/vector","glue/math/dimension","glue/math/rectangle","glue/math/circle","glue/sat"],function(a,b,c,d,e,f,g,h){"use strict";var i=a.sugar;return function(a){var j,k,l,m=b("kineticable",a),n=c(),o=d(0,0),p=d(0,0),q=d(0,0),r=d(0,0),s=d(0,0),t=e(0,0),u=!0,v=0,w=d(1,1);return m.set({setup:function(b){i.isDefined(b)&&(i.isDefined(b.gravity)&&this.setGravity(b.gravity),i.isDefined(b.bounce)&&this.setBounce(b.bounce),i.isDefined(b.velocity)&&this.setVelocity(b.velocity),i.isDefined(b.maxVelocity)&&this.setMaxVelocity(b.maxVelocity),i.isDefined(b.radius)&&this.setRadius(b.radius),i.isDefined(b.dynamic)&&this.setDynamic(b.dynamic)),q=a.getPosition(),k=a.getOrigin(),i.isDefined(a.scalable)&&(w=a.scalable.getScale()),t=i.isDefined(a.animatable)?a.animatable.getDimension():a.getDimension(),t.width*=w.x,t.height*=w.y,i.isUndefined(j)&&(l=Math.max(t.width,t.height),j=Math.sqrt(-l/2*(-l/2)+-l/2*(-l/2)))},update:function(){r.x=r.y=0,o.add(p),0!==s.x&&Math.abs(o.x)>s.x&&(o.x=s.x*n.sign(o.x)),0!==s.y&&Math.abs(o.y)>s.y&&(o.y=s.y*n.sign(o.y)),q.add(o),a.setPosition(q)},setVelocity:function(a){if(!i.isVector(a))throw"The argument must be a Vector";o=a},setGravity:function(a){if(!i.isVector(a))throw"The argument must be a Vector";p=a},setDimension:function(a){if(!i.isDimension(t))throw"The argument must be a Dimension";t=a},setDynamic:function(a){if(!i.isBoolean(a))throw"The argument must be a Boolean";u=a},setBounce:function(a){if(!i.isNumber(a))throw"The argument must be a Number";v=a},setRadius:function(a){if(!i.isNumber(a))throw"The argument must be a Number";j=a},setPosition:function(b){if(!i.isVector(b))throw"The argument must be a Vector";a.setPosition(b)},setSide:function(a){if(!i.isVector(a))throw"The argument must be a Vector";r=a},setMaxVelocity:function(a){if(!i.isVector(a))throw"The argument must be a Vector";s=a},getVelocity:function(){return o},getGravity:function(){return p},getPosition:function(){return q},getDimension:function(){return t},isDynamic:function(){return u},getBounce:function(){return v},getRadious:function(){return j},getMaxVelocity:function(){return s},isTouching:function(a){return a===h.TOP&&r.y>0||a===h.BOTTOM&&r.y<0||a===h.LEFT&&r.x>0||a===h.RIGHT&&r.x<0},toRectangle:function(){return f(q.x-k.x*Math.abs(w.x),q.y-k.y*Math.abs(w.y),t.width,t.height)},toCircle:function(){return g(q.x+t.width/2,q.y+t.height/2,j)},getSide:function(){return r},register:function(){m.register("update")},unregister:function(){m.unregister("update")}}),a}}),glue.module.create("glue/component/movable",["glue","glue/basecomponent","glue/math/vector"],function(a,b){"use strict";var c=a.sugar;return function(a){var d,e=b("movable",a),f=null,g=100,h=!0,i=0;return e.set({update:function(b){var c=b.deltaT;if(null!==f){var e,j,k;d=a.getPosition(),j=f.x-d.x,k=f.y-d.y,Math.sqrt(j*j+k*k)<g*c?(h=!0,d=f,a.setPosition(d)):(e=Math.atan2(k,j),d.x+=Math.cos(e)*g*c,d.y+=Math.sin(e)*g*c,i=180*e/Math.PI,a.setPosition(d))}},hasTarget:function(){return null!==f},atTarget:function(){return h},getRotation:function(){return i},setTarget:function(a){if(!c.isObject(a)&&c.isDefined(a.x)&&c.isDefined(a.y))throw"Invalid target supplied";h=!1,f=a},setMoveSpeed:function(a){if(!c.isNumber(a))throw"Invalid speed supplied";g=a},register:function(){e.register("update")},unregister:function(){e.unregister("update")}}),a}}),glue.module.create("glue/component/plugin/spineable",["glue","glue/basecomponent","glue/math/rectangle","glue/math/vector","glue/math/dimension","glue/loader"],function(a,b,c,d,e,f){"use strict";var g=a.sugar;return function(a){var h,i=b("spineable",a),j={},k={},l={},m={},n={},o={},p="",q="",r=((new Date).getTime(),Array(8)),s=(c(0,0,0,0),{}),t={},u={},v={},w=function(b){var c=0;if(!g.isDefined(b))throw"Specify settings object to Spine";if(!g.isDefined(b.animation))throw"Specify animation to Spine";for("string"==typeof b.animation&&(b.animation=[b.animation]),c;c<b.animation.length;++c)p=b.animation[c],x(b.animation[c]),y(b.animation[c]);b.position&&a&&a.setPosition(b.position)},x=function(a){var b=f.getBinary(a),c={},d=f.getImage(a);j[p]=new spine.Atlas(b,{load:function(a){var b=d;a.image=b,a.width=b.width,a.height=b.height,c=a}}),j[p].updateUVs(c)},y=function(b){var c,d=0;for(l[p]=new spine.SkeletonJson(new spine.AtlasAttachmentLoader(j[p])),h.skeletonResolution&&(l[p].scale=h.skeletonResolution),m[p]=l[p].readSkeletonData(f.getJSON(b)),k[p]=new spine.Skeleton(m[p]),spine.Bone.yDown=!0,a&&(k[p].getRootBone().x=a.getPosition().x,k[p].getRootBone().y=a.getPosition().y),k[p].updateWorldTransform(),n[p]=new spine.AnimationStateData(m[p]),o[p]=new spine.AnimationState(n[p]),d;d<m[p].animations.length;++d){if(c=m[p].animations[d].name,g.has(v,c))throw"Animation with name "+c+" already exists";v[c]=p}z()},z=function(){var b=k[p],e=0,f=b.slots.length,g={},h={},i=c(0,0,0,0),j=b.getRootBone(),l=c(0,0,0,0);for(a&&(l.x1=a.getPosition().x,l.y1=a.getPosition().y),e;f>e;++e)g=b.slots[e],h=g.attachment,h instanceof spine.RegionAttachment&&(h.computeVertices(b.x,b.y,g.bone,r),i.x1=r[2],i.y1=r[3],i.setWidth(h.width),i.setHeight(h.height),l.union(i));s[p]=l,t[p]=d(0,0),t[p].x=l.x1-j.x,t[p].y=l.y1-j.y,u[p]=d(0,0),A()},A=function(){var b=s[p],c=b.getWidth(),d=b.getHeight();a&&a.setDimension(e(c,d))};return i.set({draw:function(b){var c,e,f,g,h,i,j,l,m,n,o,q,s=b.context,v={},w={},x=k[p],y=0,z=x.drawOrder.length,A=t[p],B=u[p],C=d(0,0);for(a&&(C=a.getPosition()),q=d(A.x+B.x,A.y+B.y),y;z>y;++y)v=x.drawOrder[y],w=v.attachment,w instanceof spine.RegionAttachment&&(w.computeVertices(x.x,x.y,v.bone,r),c=r[2]-q.x,e=r[3]-q.y,f=w.rendererObject.width,g=w.rendererObject.height,h=w.rendererObject.x,i=w.rendererObject.y,j=w.scaleX,l=w.scaleY,m=v.bone.scaleX,n=v.bone.scaleY,o=-(v.bone.worldRotation+w.rotation)*Math.PI/180,s.save(),s.translate(Math.round(c),Math.round(e)),s.rotate(o),s.globalAlpha=v.a,s.scale(m*j,n*l),s.drawImage(w.rendererObject.page.image,h,i,f,g,0,0,f,g),s.restore())},update:function(a){var b=k[p];return o[p].update(a.deltaT),o[p].apply(b),b.updateWorldTransform(),!0},setup:function(a){h=a,w(h)},setAnimation:function(b,c,d,e){if(!g.has(v,b))throw"There is no skeleton which contains an animation called "+b;return q===b?!1:(a.spineable.setSkeleton(v[b]),o[p].onComplete=g.isDefined(e)?e:null,g.isDefined(c)||(c=!0),g.isDefined(d)||(d=1),q=b,o[p].setAnimationByName(0,b,c),o[p].timeScale=d,k[p].setSlotsToSetupPose(),!0)},getAnimation:function(){return q},getRootBone:function(){return k[p].getRootBone()},getSkeletonResolution:function(){return l[p].scale},addSkeleton:function(a){w(a)},setSkeleton:function(a){p!==a&&(p=a,A())},getSkeleton:function(){return p},setOrigin:function(a,b){if(g.has(u,b))throw"This skeleton doesn't exist: "+b;u[b]=a,p===b&&A()},getOrigin:function(){return u[p]},resetOrigin:function(){u[p]={x:-t[p].x,y:-t[p].y},A()},register:function(){i.register("draw"),i.register("update")},unregister:function(){i.unregister("draw"),i.unregister("update")}}),a}}),glue.module.create("glue/component/rotatable",["glue","glue/basecomponent","glue/math/vector"],function(a,b){"use strict";var c=a.sugar;return function(a){var d=b("rotatable",a),e=0,f=100,g=0,h=1,i=180/Math.PI,j=!0,k=Math.PI/180,l=!1;return d.set({update:function(b){var c,d,i,k,m=b.deltaT,n=a.rotatable;l&&e!==g&&(c=n.getTargetDegree(),d=n.getAngleDegree(),i=f*h,k=c>d?c-d:d-c,Math.floor(Math.abs(k))<Math.abs(i*m)?(e=g,j=!0):(d+=i*m,n.setAngleDegree(d)))},draw:function(a){a.context.rotate(e)},setAngleDegree:function(a){e=c.isNumber(a)?a:e,e*=k},setAngleRadian:function(a){e=c.isNumber(a)?a:e},setTargetDegree:function(a,b){g=c.isNumber(a)?a:g,g*=k,c.isDefined(b)&&(h=b?1:-1),j=!1,l=!0},setTargetRadian:function(a,b){g=c.isNumber(a)?a:g,c.isDefined(b)&&(h=b?1:-1),j=!1,l=!0},setSpeed:function(a){f=c.isNumber(a)?a:f,f=Math.floor(f)},getAngleDegree:function(){return e*i},getAngleRadian:function(){return e},getTargetDegree:function(){return g*i},getTargetRadian:function(){return g},atTarget:function(){return j},register:function(){d.register("draw"),d.register("update")},unregister:function(){d.unregister("draw"),d.unregister("update")}}),a}}),glue.module.create("glue/component/scalable",["glue","glue/basecomponent","glue/math/vector","glue/math/dimension"],function(a,b,c,d){"use strict";var e=a.sugar;return function(a){var f=b("scalable",a),g=c(1,1),h=c(1,1),i=1,j=!0;return f.set({update:function(a){if(!j){var b,c,d,e=a.deltaT,f=this.scalable;c=h.x-g.x,d=h.y-g.y,Math.sqrt(c*c+d*d)<i*e?(j=!0,f.setScale(h)):(b=Math.atan2(d,c),g.x+=Math.cos(b)*i*e,g.y+=Math.sin(b)*i*e)}},draw:function(a){a.context.scale(g.x,g.y)},setScale:function(b){g.x=e.isNumber(b.x)?b.x:g.x,g.y=e.isNumber(b.y)?b.y:g.y,h.x=e.isNumber(b.x)?b.x:h.x,h.y=e.isNumber(b.y)?b.y:h.y,a.updateBoundingBox()},setTarget:function(a){h.x=e.isNumber(a.x)?a.x:h.x,h.y=e.isNumber(a.y)?a.y:h.y,j=!1},setSpeed:function(a){i=e.isNumber(a)?a:i,i/=100},getScale:function(){return g},getTarget:function(){return h},getSpeed:function(){return 100*i},atTarget:function(){return j},getDimension:function(){var b;return b=e.isDefined(a.animatable)?a.animatable.getDimension():e.isDefined(a.spritable)?a.getDimension():d(1,1),d(b.width*g.x,b.height*g.y)},register:function(){f.register("draw"),f.register("update")},unregister:function(){f.unregister("draw"),f.unregister("update")}}),a}}),glue.module.create("glue/component/spritable",["glue","glue/math/vector","glue/math/dimension","glue/math/rectangle","glue/basecomponent"],function(a,b,c,d,e){"use strict";a.sugar;return function(a){var d=e("spritable",a),f=null;return d.set({setup:function(d){var e;d&&(d.image&&(f=d.image),f=d.image,d.position&&(e=d.position,a.setPosition(b(Math.round(e.x),Math.round(e.y)))),d.dimension?a.setDimension(d.dimension):f&&a.setDimension(c(f.naturalWidth,f.naturalHeight)),d.origin&&a.setOrigin(d.origin))},draw:function(b){a.animatable||b.context.drawImage(f,0,0)},setImage:function(b){f=b,a.setDimension(c(f.naturalWidth,f.naturalHeight))},getImage:function(){return f},register:function(){d.register("draw")},unregister:function(){d.unregister("draw")}}),a}}),glue.module.create("glue/component/tweenable",["glue","glue/basecomponent","glue/math"],function(a,b,c){"use strict";var d=a.sugar;return function(a){var e=b("tweenable",a),f=c(),g=["easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"];return e.set({getRandomTween:function(){var a=g[f.random(0,g.length)];return d.isString(a)?a:"easeInQuad"},easeInQuad:function(a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOutCubic:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOutCubic:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeInQuart:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutQuart:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOutQuart:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOutQuint:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOutQuint:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOutSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeInExpo:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOutCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOutCirc:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f))+b},easeOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return g*Math.pow(2,-10*a)*Math.sin(2*(a*d-e)*Math.PI/f)+c+b},easeInOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(2==(a/=d/2))return b+c;if(f||(f=.3*d*1.5),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return 1>a?-.5*g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)+b:g*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)*.5+c+b},easeInBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},easeOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},easeInBounce:function(a,b,c,d){return c-this.easeOutBounce(d-a,0,c,d)+b},easeOutBounce:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOutBounce:function(a,b,c,d){return d/2>a?.5*this.easeInBounce(2*a,0,c,d)+b:.5*this.easeOutBounce(2*a-d,0,c,d)+.5*c+b}}),a}}),glue.module.create("glue/director",["glue","glue/game","glue/screen"],function(a,b){"use strict";var c=a.sugar,d={},e=null,f=function(a){return c.isString(a)&&c.isObject(d[a])?d[a]:void 0},g=function(a,d,g){var h,i,j,k=0,l=0,m=function(){l++,l>=h.getObjects().length+1&&("show"===d&&c.isFunction(h.onShow)?h.onShow():"hide"===d&&c.isFunction(h.onHide)&&h.onHide(),c.isFunction(g)&&g())};if(c.isString(a)){for(h=f(a),"show"===d&&(b.add(h,m),h.setShown(!0)),"hide"===d&&(b.remove(h,m),h.setShown(!1)),i=h.getObjects(),j=i.length,k;j>k;++k)"show"===d?b.add(i[k],m):"hide"===d&&b.remove(i[k],m);"show"===d?e=h:"hide"===d&&(e=null)}},h={addScreen:function(a){c.isFunction(a.getName)&&c.isObject(a)&&(d[a.getName()]=a)},removeScreen:function(a,b){var e;c.isFunction(a.getName)&&c.isObject(a)&&(e=a.getName(),g(e,"hide",b)),c.isObject(d[e])&&delete d[e]},getScreens:function(){return d},getScreen:function(a){return d[a]},showScreen:function(a,b){var d;c.isString(a)&&(null!==e&&(d=e.getName(),g(d,"hide")),g(a,"show",b))},hideScreen:function(a,b){c.isString(a)&&g(a,"hide",b)},getActiveScreen:function(){return e}};return h}),glue.module.create("glue/event/system",function(){var a=[],b=function(b,c,d){var e,f,g=a.length;if(g>0)for(e=0;g>e;++e)f=a[e],f&&f.name===c&&f.callback.apply({name:c,emitter:b},d)};return{on:function(b,c){return a.push({name:b,callback:c}),[b,c]},off:function(b,c){var d,e,f;for(d=0,e=a.length;e>d;++d)f=a[d],f&&f.name===b&&f.callback===c&&a.splice(d,1)},fire:function(a){b("system",a,Array.prototype.slice.call(arguments,1,arguments.length))}}}),glue.module.create("glue/game",["glue","glue/domready","glue/math/vector","glue/event/system","glue/loader","glue/preloader"],function(a,b,c,d,e,f){"use strict";var g,h,i=a.sugar,j=null,k=null,l=[],m=[],n=[],o=[],p=[],q=(new Date).getTime(),r=null,s=null,t=!1,u=null,v=null,w=!1,x=null,y={},z=c(0,0),A=!1,B=!1,C=!1,D=null,E=0,F=0,G=5e5,H=!0,I=0,J={},K=function(){r=document.querySelector("#"+h),null===r&&(r=document.createElement("canvas"),r.id=h,r.width=x.width,r.height=x.height,null!==document.getElementById("wrapper")?document.getElementById("wrapper").appendChild(r):document.body.appendChild(r)),L(),r.getContext&&(w=!0,s=r.getContext("2d"),t&&(u=document.createElement("canvas"),u.width=r.width,u.height=r.height,v=u.getContext("2d"))),J={canvas:r,context:t?v:s,backBufferCanvas:t?u:r,canvasScale:y,canvasDimension:x,scroll:z}},L=function(){var a,b,c=r.height/r.width,d=window.innerHeight/window.innerWidth;c>d?(b=window.innerHeight,a=b/c):(a=window.innerWidth,b=a*c),y.x=a/x.width,y.y=b/x.height,r.style.width=a+"px",r.style.height=b+"px"},M=function(){I===db.SORT_TYPE_STABLE?i.sort.stable.inplace(l,function(a,b){return a.z-b.z}):l.sort(function(a,b){return a.z-b.z})},N=function(){var a,b,c,d;if(m.length){for(c=0;c<m.length;++c)a=m[c],a.z=a.z||0,l.push(a),a.init&&a.init();if(m=[],o.length){for(d=0;d<o.length;++d)b=o[d],b&&b.callback(b.object);o=[]}}},O=function(){var a,b,c,d;if(n.length){for(c=0;c<n.length;++c)a=n[c],a.destroy&&a.destroy(),i.removeObject(l,a);if(n=[],p.length){for(d=0;d<p.length;++d)b=p[d],b&&b.callback(b.object);p=[]}}},P=function(){t&&v.clear(!0),s.clear(!0)},Q=function(a){var b,c,d,e,f;if(A&&requestAnimationFrame(Q),w){if(P(),O(),N(),H&&M(),b=(a-q)/1e3,C&&(c=Math.round(1e3/(a-q),2),E+=c,++F,e=Math.round(E/F),E>G&&(E=F=0),D.innerHTML="<strong>Glue debug bar</strong>",D.innerHTML+="<br />version: 0.9.7",D.innerHTML+="<br />frame rate: "+c+" fps",D.innerHTML+="<br />average frame rate: "+e+"fps",D.innerHTML+="<br />objects: "+l.length,g&&g.name&&(D.innerHTML+="<br />game name: "+g.name)),1>b)for(J.deltaT=b,J.fps=c,J.avg=e,J.objectLength=l.length,f=0;f<l.length;++f)d=l[f],d.update&&(B&&d.updateWhenPaused||!B)&&d.update(J),d.draw&&d.draw(J);t&&s.drawImage(u,0,0),q=a}},R=function(){K(),bb(),Q(0)},S=function(a){var b,c,d;if(A)for(b=0,c=l.length;c>b;++b)d=l[b],d.pointerDown&&(B&&d.updateWhenPaused||!B)&&d.pointerDown(a)},T=function(a){var b,c,d;if(A)for(b=0,c=l.length;c>b;++b)d=l[b],d.pointerMove&&(B&&d.updateWhenPaused||!B)&&d.pointerMove(a)},U=function(a){var b,c,d;if(A)for(b=0,c=l.length;c>b;++b)d=l[b],d.pointerUp&&(B&&d.updateWhenPaused||!B)&&d.pointerUp(a)},V=function(a,b){var d=b?a.changedTouches[0]:a.targetTouches[0];a.preventDefault(),a.position=c((d.pageX-r.offsetLeft)/y.x,(d.pageY-r.offsetTop)/y.y)},W=function(a){a.position=c((a.clientX-r.offsetLeft)/y.x,(a.clientY-r.offsetTop)/y.y)},X=function(a){a.preventDefault(),V(a),S(a)},Y=function(a){a.preventDefault(),V(a),T(a)},Z=function(a){a.preventDefault(),V(a,!0),U(a)},$=function(a){a.preventDefault(),W(a),S(a)},_=function(a){a.preventDefault(),W(a),T(a)},ab=function(a){a.preventDefault(),W(a),U(a)},bb=function(){"ontouchstart"in j?(r.addEventListener("touchstart",X),r.addEventListener("touchmove",Y),r.addEventListener("touchend",Z)):(r.addEventListener("mousedown",$),r.addEventListener("mousemove",_),r.addEventListener("mouseup",ab)),d.on("glue.pointer.down",S),d.on("glue.pointer.move",T),d.on("glue.pointer.up",U),window.addEventListener("resize",L,!1),window.addEventListener("orientationchange",L,!1),document.body.addEventListener("touchstart",function(a){return a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!1}),document.body.addEventListener("touchmove",function(a){return a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!1})},cb=function(){r.removeEventListener("touchstart",X),r.removeEventListener("touchmove",Y),r.removeEventListener("touchend",Z),d.off("glue.pointer.down",S),d.off("glue.pointer.move",T),d.off("glue.pointer.up",U),l=[]},db={SORT_TYPE_DEFAULT:0,SORT_TYPE_STABLE:1,setup:function(a,c){b(function(){if(A)throw"Glue: The main game is already running";A=!0,j=window,k=j.document,h=a.canvas.id,x=a.canvas.dimension,a.game&&(g=a.game),a.develop&&a.develop.debug&&(C=!0,D=document.createElement("div"),D.id="debugBar",document.body.appendChild(D)),i.isDefined(a.doubleBuffering)&&(t=a.doubleBuffering),i.isDefined(a.sort)&&(H=a.sort),i.isDefined(a.sortType)&&(I=a.sortType),a.asset&&a.asset.path?(e.setAssetPath(a.asset.path),a.asset.image&&e.setAssets(e.ASSET_TYPE_IMAGE,a.asset.image),a.asset.audio&&(a.asset.audio.sprite&&e.setAssets(e.ASSET_TYPE_AUDIOSPRITE,a.asset.audio.sprite),e.setAssets(e.ASSET_TYPE_AUDIO,a.asset.audio)),a.asset.json&&e.setAssets(e.ASSET_TYPE_JSON,a.asset.json),a.asset.binary&&e.setAssets(e.ASSET_TYPE_BINARY,a.asset.binary),a.asset.spine&&e.setAssets(e.ASSET_TYPE_SPINE,a.asset.spine),a.asset.remoteImage&&e.setAssets(e.ASSET_TYPE_IMAGE_REMOTE,a.asset.remoteImage),e.load(function(){f.onReady(),R(),c&&c()},f.onAssetLoad)):(R(),c&&c())})},shutdown:function(){cb(),A=!1},add:function(a,b){b&&o.push({object:a,callback:b}),m.push(a)},remove:function(a,b){b&&p.push({object:a,callback:b}),n.push(a)},removeAll:function(){var a,b;for(n.length=0,m.length=0,a=0,b=l.length;b>a;++a)this.remove(l[a])},get:function(a){var b,c,d,e;for(b=0,c=l.length;c>b;++b)if(d=l[b],e=d.getName(),!i.isEmpty(e)&&e===a)return d},canvas:{getDimension:function(){return x},getScale:function(){return y},getContext:function(){return t?context:v}},getObjectCount:function(){return l.length},getScroll:function(){return z},pause:function(a){B=!0,A=!a},resume:function(){B=!1,A||(A=!0,R())}};return db}),glue.module.create("glue/loader",["glue"],function(a){var b,c,d,e=a.audio,f=a.sugar,g=!1,h=0,i=0,j=null,k={},l={image:{},audio:{},json:{},binary:{}},m=function(){++i,d=Math.floor(i/h*100),f.isFunction(c)&&c(d),h===i&&(g=!0,f.isFunction(b)&&b())},n=function(a){throw"An error occurred while trying to load asset "+a},o=function(a,b,c){var d=new Image;d.src=b,d.addEventListener("load",c,!1),l.image[a]=d},p=function(a,b,c){var d,g;if(f.isArray(b))for(g=0;g<b.length;++g)b[g]=j+"audio/"+b[g];else b=[j+"audio/"+b];d=new e({urls:b,onload:c}),l.audio[a]=d},q=function(a,b,c,d){var e=new XMLHttpRequest;e.overrideMimeType&&e.overrideMimeType("application/json"),e.open("GET",b,!0),e.onerror=function(){d(a)},e.ontimeout=function(){d(a)},e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status&&e.responseText?(l.json[a]=JSON.parse(e.responseText),c()):d(a))},e.send(null)},r=function(a,b,c,d){var e,f,g,h=new XMLHttpRequest,i=0;h.open("GET",b,!0),h.onerror=function(){d(a)},h.responseType="arraybuffer",h.onload=function(){if(e=h.response){for(f=new Uint8Array(e),g=[],i;i<f.byteLength;++i)g[i]=String.fromCharCode(f[i]);l.binary[a]=g.join(""),c()}},h.send()},s=function(a,b,c,d){var f,g,h=function(){g=l.json[a+"_json"],g.onload=function(){l.audio[a]=f,c()
},f=new e(g),c()};q(a+"_json",j+"json/"+b,h,d)},t=function(a,b,c,d){var e=!1,f=!1,g=!1,h=function(){e&&f&&g&&c()};o(a,b+".png",function(){e=!0,h()},d),r(a,b+".atlas",function(){g=!0,h()},d),q(a,b+".json",function(){f=!0,h()},d)},u=function(a,b,c){switch(b){case v.ASSET_TYPE_IMAGE_REMOTE:o(a,c,m,n);break;case v.ASSET_TYPE_IMAGE:o(a,j+"image/"+c,m,n);break;case v.ASSET_TYPE_AUDIO:p(a,c,m,n);break;case v.ASSET_TYPE_JSON:q(a,j+"json/"+c,m,n);break;case v.ASSET_TYPE_BINARY:r(a,j+"binary/"+c,m,n);break;case v.ASSET_TYPE_AUDIOSPRITE:s(a,c,m,n);break;case v.ASSET_TYPE_SPINE:t(a,j+"spine/"+c,m,n)}},v={ASSET_TYPE_IMAGE:"image",ASSET_TYPE_AUDIO:"audio",ASSET_TYPE_JSON:"json",ASSET_TYPE_BINARY:"binary",ASSET_TYPE_AUDIOSPRITE:"audiosprite",ASSET_TYPE_SPINE:"spine",ASSET_TYPE_IMAGE_REMOTE:"remoteimage",setAssetPath:function(a){j=a},setAssets:function(a,b){var c;k[a]=b;for(c in b)b.hasOwnProperty(c)&&++h},load:function(a,d){var e,f,h;g=!1,b=a,c=d;for(f in k)if(k.hasOwnProperty(f)){e=k[f];for(h in e)e.hasOwnProperty(h)&&u(h,f,e[h])}k={}},isLoaded:function(){return g},getAssets:function(){return l},getImage:function(a){var b=l.image[a];if(!f.isDefined(b))throw"Asset "+a+" could not be found";return b},getAudio:function(a){var b=l.audio[a];if(!f.isDefined(b))throw"Asset "+a+" could not be found";return b},getJSON:function(a){var b=l.json[a];if(!f.isDefined(b))throw"Asset "+a+" could not be found";return b},getBinary:function(a){var b=l.binary[a];if(!f.isDefined(b))throw"Asset "+a+" could not be found";return b},getAsset:function(a){if(f.has(l.image,a))return l.image[a];if(f.has(l.audio,a))return l.audio[a];if(f.has(l.json,a))return l.json[a];if(f.has(l.binary,a))return l.binary[a];throw"Asset "+a+" could not be found"}};return v}),glue.module.create("glue/math",["glue","glue/math/rectangle","glue/math/dimension","glue/math/matrix","glue/math/vector"],function(a,b,c,d,e){"use strict";return function(){var f=a.sugar;return{Dimension:c,Matrix:d,Vector:e,random:function(a,b){return~~(Math.random()*(b-a+1))+a},square:function(a){return a*a},sign:function(a){if(f.isNumber(a)){if(a>0)return 1;if(0>a)return-1;if(0===a)return 0}},getHalfRectangle:function(a){var c=b(a.x1+a.x2/2,a.y1+a.y2/2,a.x2/2,a.y2/2);return c}}}}),glue.module.create("glue/math/array2d",["glue"],function(a){"use strict";var b=a.sugar;return function(a,c,d){var e,f,g,h=[];for(f=0;a>f;++f){for(e=[],g=0;c>g;++g)e[g]=d||null;h[f]=e}return{get:function(){return h},getValue:function(a,b){return void 0!==h[a]&&void 0!==h[a][b]?h[a][b]:void 0},iterate:function(d){for(f=0;a>f;++f)for(g=0;c>g;++g){if(!b.isFunction(d))throw"Please supply a callback function";d(f,g,h[f][g])}},set:function(a,b,c){void 0!==h[a]&&void 0!==h[a][b]&&(h[a][b]=c)},unset:function(a,b){void 0!==h[a]&&void 0!==h[a][b]&&(h[a][b]=null)}}}}),glue.module.create("glue/math/circle",["glue"],function(a){var b=a.sugar,c=function(a,d,e){return{x:a||0,y:d||0,radius:e||0,addVector:function(a){if(!b.isVector(a))throw"The argument should be a Vector";this.x+=a.x,this.y+=a.y},substractVector:function(a){if(!b.isVector(a))throw"The argument should be a Vector";this.x-=a.x,this.y-=a.y},clone:function(){return c(this.x,this.y,this.radius)}}};return c}),glue.module.create("glue/math/dimension",function(){"use strict";return function(a,b,c){var d={width:a,height:b,depth:c||0};return{width:d.width,height:d.height,depth:d.depth,get:function(){return d}}}}),glue.module.create("glue/math/matrix",["glue"],function(a){"use strict";var b=a.sugar,c=function(a,d){var e,f,g=[],h=b.isDefined(a)?a:0,i=b.isDefined(d)?d:0,j=function(a,b,c){g[b*h+a]=c},k=function(a,b){return g[b*h+a]};for(f=0;i>f;++f)for(e=0;h>e;++e)e===f?j(e,f,1):j(e,f,0);return{stringify:function(){var a="",b="";for(f=0;i>f;++f){for(e=0;h>e;++e)b+=k(e,f)+"	";a+=b+"\n",b=""}return a},get:function(a,b){return k(a,b)},set:function(a,b,c){j(a,b,c)},setValues:function(a){var b=Math.min(g.length,a.length);for(e=0;b>e;++e)g[e]=a[e];return this},getWidth:function(){return h},getHeight:function(){return i},iterate:function(a){for(f=0;i>f;++f)for(e=0;h>e;++e){if(!b.isFunction(a))throw"Please supply a callback function";a(e,f,k(e,f))}},transpose:function(){var a=[];for(e=0;h>e;++e)for(f=0;i>f;++f)a[e*i+f]=k(e,f);return g=a,i=[h,h=i][0],this},add:function(a){if(i!=a.getHeight()||h!=a.getWidth())throw"Matrix sizes incorrect";for(f=0;i>f;++f)for(e=0;h>e;++e)j(e,f,k(e,f)+a.get(e,f));return this},multiply:function(a){var b,c=[],d=h,j=i,l=a.getHeight(),m=a.getWidth(),n=0;if(j!=m)throw"Matrix sizes incorrect";for(f=0;l>f;++f)for(e=0;d>e;++e){for(n=0,b=0;m>b;++b)n+=a.get(b,f)*k(e,b);c[f*d+e]=n}return g=c,h=d,i=l,this},clone:function(){var a=c(h,i);return a.setValues(g),a},"static":{add:function(a,b){var c=a.clone();return c.add(b),c},multiply:function(a,b){var c=b.clone();return c.multiply(a),c}}}};return c}),glue.module.create("glue/math/polygon",function(){"use strict";return function(a){return{get:function(){return a},hasPosition:function(b){var c,d=!1,e=a[0].x,f=a[0].x,g=a[0].y,h=a[0].y,i=1,j=0,k=a.length-1;for(i=1;i<a.length;++i)c=a[i],e=Math.min(c.x,e),f=Math.max(c.x,f),g=Math.min(c.y,g),h=Math.max(c.y,h);if(b.x<e||b.x>f||b.y<g||b.y>h)return!1;for(k;j<a.length;k=j++)a[j].y>b.y!=a[k].y>b.y&&b.x<(a[k].x-a[j].x)*(b.y-a[j].y)/(a[k].y-a[j].y)+a[j].x&&(d=!d);return d}}}}),glue.module.create("glue/math/rectangle",function(){"use strict";return function(a,b,c,d){return{x1:a,y1:b,x2:c,y2:d,get:function(){return{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2}},hasPosition:function(a){return a.x>=this.x1&&a.x<=this.x2&&a.y>=this.y1&&a.y<=this.y2?!0:void 0},getWidth:function(){return this.x2-this.x1},getHeight:function(){return this.y2-this.y1},setWidth:function(a){this.x2=this.x1+a},setHeight:function(a){this.y2=this.y1+a},union:function(a){this.x1=Math.min(this.x1,a.x1),this.y1=Math.min(this.y1,a.y1),this.x2=Math.max(this.x2,a.x2),this.y2=Math.max(this.y2,a.y2)},intersect:function(a){return this.x1+this.x2>a.x1&&this.x1<a.x1+a.x2&&this.y1+this.y2>a.y1&&this.y1<a.y1+a.y2},intersection:function(a){var b={x1:0,y1:0,x2:0,y2:0};return this.intersect(a)&&(b.x1=Math.max(this.x1,a.x1),b.y1=Math.max(this.y1,a.y1),b.x2=Math.min(this.x1+this.x2,a.x1+a.x2)-b.x1,b.y2=Math.min(this.y1+this.y2,a.y1+a.y2)-b.y1),b}}}}),glue.module.create("glue/math/vector",["glue/math"],function(a){"use strict";var b=function(c,d){var e=a();return{x:c,y:d,get:function(){return{x:this.x,y:this.y}},add:function(a){return this.x+=a.x,this.y+=a.y,this},substract:function(a){return this.x-=a.x,this.y-=a.y,this},angle:function(a){return Math.atan2(a.y-this.y,a.x-this.x)},dotProduct:function(a){return this.x*a.x+this.y*a.y},distance:function(a){return Math.sqrt((this.x-a.x)*(this.x-a.x)+(this.y-a.y)*(this.y-a.y))},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},scale:function(a){return this.x*=a,this.y*=a,this},length:function(){return Math.sqrt(e.square(this.x)+e.square(this.y))},normalize:function(a){return this.x/=a>0?a:1,this.y/=a>0?a:1,this},copy:function(a){return this.x=a.x,this.y=a.y,this},clone:function(){return b(this.x,this.y)},toMatrix:function(){var a=e.Matrix(1,3);return a.set(0,0,this.x),a.set(0,1,this.y),a.set(0,2,1),a},"static":{add:function(a,b){var c=a.clone();return c.add(b),c},substract:function(a,b){var c=a.clone();return c.substract(b),c},angle:function(a,b){return a.angle(b)},dotProduct:function(a,b){return a.dotProduct(b)},distance:function(a,b){return a.distance(b)},multiply:function(a,b){var c=a.clone();return c.multiply(b),c},scale:function(a,b){var c=a.clone();return c.scale(b),c},length:function(a){var b=a.clone();return b.length()},normalize:function(a,b){var c=a.clone();return c.normalize(b),c},copy:function(a,b){var c=a.clone();return c.copy(b),c},clone:function(a){return a.clone()}}}};return b}),glue.module.create("glue/preloader",["glue"],function(a){var b=(a.sugar,document.getElementById("loader")),c=document.getElementById("loadbar"),d=document.getElementById("percentagebar"),e=function(a){null!==c&&(c.style.width=a+"%"),null!==d&&(d.innerHTML=a+"%")},f={onReady:function(){null!==b&&(b.style.display="none")},onAssetLoad:function(a){e(a)}};return null!==d&&(d.innerHTML="0%"),f}),glue.module.create("glue/sat",["glue","glue/math","glue/math/vector","glue/math/rectangle","glue/math/dimension","glue/game"],function(a,b,c,d){"use strict";var e=a.sugar,f=b(),g=function(a,b,c,d){var e;return c.copy(a),c.substract(b),e=c.length(),e>a.radius+b.radius?(c.x=c.y=0,!1):(c.normalize(e),d.copy(c),c.scale(a.radius+b.radius-e),!0)},h=function(a,b,d,e,g){if(a.intersect(b)){var h=a.intersection(b),i=c(0,0);return h.x2>h.y2?(i.y=f.sign(a.y1-b.y1),d.y+=h.y2*i.y,e.y=i.y):(i.x=f.sign(a.x1-b.x1),d.x+=h.x2*i.x,e.x=i.x),g.x1=h.x1,g.y1=h.y1,g.x2=h.x2,g.y2=h.y2,!0}return!1},i=function(a,b){return a.intersect(b)},j=function(a,b){var c=Math.sqrt(f.square(a.x-b.x)+f.square(a.y-b.y));return c<a.radius+b.radius},k=function(a,b){var c=a.kineticable.getVelocity(),d=a.kineticable.getBounce(),e=b.scale(c.dotProduct(b)),f=c.static.substract(c,e),g=f.substract(e),h=g.substract(c).scale(d);c.add(h),a.kineticable.setVelocity(c)},l=function(a,b){var d,e,f=a.kineticable.toCircle(),h=b.kineticable.toCircle(),i=c(0,0),j=c(0,0),l=c(0,0),m=c(0,0);return g(f,h,j,m)?(b.kineticable.isDynamic()&&(e=b.kineticable.getPosition(),e.substract(j),k(b,m)),a.kineticable.isDynamic()&&(g(h,f,i,l),d=a.kineticable.getPosition(),d.substract(i),k(a,l)),!0):!1},m=function(a,b){var e,f,g,i,j=a.kineticable.toRectangle(),k=b.kineticable.toRectangle(),l=c(0,0),m=c(0,0),n=c(0,0),o=c(0,0),p=d(0,0,0,0);return h(j,k,m,o,p)?(b.kineticable.isDynamic()&&(f=b.kineticable.getVelocity(),i=b.kineticable.getPosition(),i.substract(m),o.scale(-1),b.kineticable.setPosition(i),b.kineticable.setSide(o),0!==o.y?(o.y>0&&f.y<0||o.y<0&&f.y>0&&p.y2>1)&&(f.y*=-b.kineticable.getBounce()):0!==o.x&&(o.x>0&&f.x<0||o.x<0&&f.x>0&&p.x2>1)&&(f.x*=-b.kineticable.getBounce())),a.kineticable.isDynamic()&&(e=a.kineticable.getVelocity(),g=a.kineticable.getPosition(),h(k,j,l,n,p),g.substract(l),n.scale(-1),a.kineticable.setPosition(g),a.kineticable.setSide(n),0!==n.y?(n.y>0&&e.y<0||n.y<0&&e.y>0)&&(e.y*=-a.kineticable.getBounce()):0!==n.x&&(n.x>0&&e.x<0||n.x<0&&e.x>0)&&(e.x*=-a.kineticable.getBounce())),!0):!1},n={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,RECTANGLE_TO_RECTANGLE:10,CIRCLE_TO_CIRCLE:20,collideGroupVsGroup:function(a,b,c){var d,f;if(!e.isArray(a)||!e.isArray(b))throw"The colliding groups must be Arrays.";for(d=0,f=a.length;f>d;++d)n.collideGroup(a[d],b,c)},collideGroup:function(a,b,c){var d,f;if(!e.isArray(b))throw"The colliding group must be an Array.";if(!e.isDefined(a.kineticable))throw"Collisions can only be tested between Kineticable.";for(d=0,f=b.length;f>d;++d)b.indexOf(a)!==d&&n.collide(a,b[d],c)},collide:function(a,b,c){if(e.isDefined(a.kineticable)&&e.isDefined(b.kineticable)){if(a.isActive()&&b.isActive()){switch(c=c||n.RECTANGLE_TO_RECTANGLE){case n.RECTANGLE_TO_RECTANGLE:return m(a,b);case n.CIRCLE_TO_CIRCLE:return l(a,b);default:throw"The type of collision is not valid."}return!1}return!1}throw"Collisions can only be tested between Kineticable."},overlap:function(a,b,c){if(e.isDefined(a.kineticable)&&e.isDefined(b.kineticable)){if(a.isActive()&&b.isActive()){switch(c=c||n.RECTANGLE_TO_RECTANGLE){case n.RECTANGLE_TO_RECTANGLE:return i(a,b);case n.CIRCLE_TO_CIRCLE:return j(a,b);default:return i(a,b)}return!1}return!1}throw"Collisions can only be tested between Kineticable."},overlapGroupVsGroup:function(a,b,c){var d,f;if(!e.isArray(a)||!e.isArray(b))throw"The colliding groups must be Arrays.";for(d=0,f=a.length;f>d;++d)n.overlapGroup(a[d],b,c)},overlapGroup:function(a,b,c){var d,f;if(!e.isArray(b))throw"The colliding group must be an Array.";if(!e.isDefined(a.kineticable))throw"Collisions can only be tested between Kineticable.";for(d=0,f=b.length;f>d;++d)b.indexOf(a)!==d&&n.overlap(a,b[d],c)},update:function(){}};return n}),glue.module.create("glue/screen",["glue","glue/game"],function(a,b){"use strict";var c=a.sugar;return function(a){var d=[],e=!1,f={add:function(a){return c.combine(this,a)},addObject:function(a,f){c.isObject(a)&&(d.push(a),e&&b.add(a,function(){c.isFunction(f)&&f()}))},removeObject:function(a,f){var g;c.isObject(a)&&(g=d.indexOf(a),g>=0&&(d.splice(g,1),e&&b.remove(a,f)))},getObjects:function(){return d},getName:function(){return a},setShown:function(a){if(!c.isBoolean(a))throw"Argument is not a boolean";e=a}};return f}}),glue.module.create("glue/spatial",["glue","glue/game","glue/math","glue/math/vector","glue/math/dimension"],function(a,b,c,d){"use strict";return function(){var e,f,g,h=a.sugar,i=(c(),function(a,b){var c=parseInt(Math.floor(a.x/f)+Math.floor(a.y/f)*(e.width/f));h.contains(b,c)||b.push(c)}),j=function(a){var b=[],c=a.spritable.getPosition(),e=a.spritable.getDimension(),f=d(c.x,c.y),g=d(c.x+e.width,c.y+e.height);return i(d(f.x,f.y),b),i(d(g.x,f.y),b),i(d(g.x,g.y),b),i(d(f.x,g.y),b),b},k=function(){var a,b=0;for(g={},a=e.width/f*(e.height/f),b;a>b;++b)g[b]=[]},l={setup:function(a){a=a||{},e=h.isDefined(a.gridDimension)?a.gridDimension:b.canvas.getDimension(),f=h.isDefined(a.gridSize)?a.gridSize:e.height/3,k()},setDebug:function(a){a===!0&&b.add(l),a===!1&&b.remove(l)},clearObjects:function(){k()},addObject:function(a){var b=j(a),c=0,d=b.length;for(c;d>c;++c)g[b[c]].push(a)},addArray:function(a){var b,c;for(b=0,c=a.length;c>b;++b)l.addObject(a[b])},getNearbyObjects:function(a){var b=[],c=j(a),d=0,e=c.length;for(d;e>d;++d)b.push(g[c[d]]);return b},handleNearbyObjects:function(a,b){var c,d,e,f,g;if(h.isFunction(b))for(c=l.getNearbyObjects(a),d=0,e=c.length;e>d;++d)if(c[d])for(f=0,g=c[d].length;g>f;++f)c[d].indexOf(a)!==f&&b(c[d][f])},draw:function(a,b){var c=0,d=0;for(b.save(),b.beginPath(),c;c<=e.width;c+=f)b.moveTo(c,0),b.lineTo(c,e.height);for(d;d<=e.height;d+=f)b.moveTo(0,d),b.lineTo(e.width,d);b.strokeStyle="black",b.stroke(),b.closePath(),b.restore()}};return l}});var modules=modules||{};modules.glue=modules.glue||{},modules.glue.sugar=function(a,b){"use strict";var c=function(a){return n(a.width)&&n(a.height)},d=function(a){return n(a.x)&&n(a.y)},e=function(a){return r(a,"get")&&j(a.get)&&r(a,"set")&&j(a.set)&&r(a,"transpose")&&j(a.transpose)&&r(a,"add")&&j(a.add)&&r(a,"multiply")&&j(a.multiply)?!0:void 0},f=function(a){return r(a,"get")&&j(a.get)&&r(a,"getValue")&&j(a.getValue)&&r(a,"iterate")&&j(a.iterate)&&r(a,"set")&&j(a.iterate)&&r(a,"unset")&&j(a.iterate)?!0:void 0},g=function(a){return"string"==typeof a||a instanceof String},h=Array.prototype.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},i=function(a){return"[object Object]"===Object.prototype.toString.call(a)},j=function(a){return"[object Function]"===Object.prototype.toString.call(a)},k=function(a,b){var c=a.length;if(c!=b.length)return!1;for(;c--;)if(a[c]!==b[c])return!1;return!0},l=function(b,c){var d,e,f,g,h,i,j,k=[],l=a;for(e=0,g=b.length;g>e;++e){if(l=a,i=b[e].split("."),1===i.length)j=a[i];else for(d=0,f=i.length;f>d;++d)h=i[d],d===f-1?j=l[h]:l[h]&&(l=l[h]);if(!j||!this.isFunction(j))throw"glue.sugar.imports: Module "+b[e]+" not found or not a function";k.push(j)}return c.apply(glue,k)},m=function(){},n=function(a){return"[object Number]"===Object.prototype.toString.call(a)},o=function(a){return a===!0||a===!1||"[object Boolean]"===Object.prototype.toString.call(a)},p=function(a){return"[object Date]"===Object.prototype.toString.call(a)},q=function(a){return parseFloat(a)===parseInt(a,10)&&!isNaN(a)},r=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},s=function(a){return void 0===a},t=function(a){return void 0!==a},u=function(a){var b;if(""===a||0===a||"0"===a||null===a||a===!1||this.isUndefined(a))return!0;if(this.isArray(a)&&0===a.length)return!0;if(this.isObject(a)){for(b in a)if(this.has(a,b))return!1;return!0}return!1},v=function(a){return"[object Arguments]"===Object.prototype.toString.call(a)},w=function(a,b){return a+Math.floor(Math.random()*(b-a+1))},x=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},y=function(){for(var a=this.toArray(arguments),b=this["is"+this.upperFirst(a.shift())],c=a.length;c--;)if(!b.call(null,a[c]))return!1;return!0},z=function(a,b){var c;if(this.multiIs("array",a,b))return a.concat(b);for(c in b)this.has(b,c)&&(this.has(a,c)&&(a.base=a.base||{},a.base[c]=a[c]),a[c]=this.isObject(b[c])?this.combine({},b[c]):b[c]);return a},A=function(a){return/^\[object (HTMLCollection|NodeList|Object)\]$/.test(toString.call(a))&&this.isNumber(a.length)&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},B=function(a){var b,c=[];if(!a)return[a];if(this.isArgument(a))return Array.prototype.slice.call(a);if(this.isString(a)&&a.split(""),this.isArray(a))return Array.prototype.slice.call(a);if(this.isDomList(a))return Array.prototype.slice.call(a);for(b in a)this.has(a,b)&&c.push(a[b]);return c},C=function(a,b){return this.isString(a)?-1!==a.indexOf(b)?!0:!1:this.isArray(a)?-1!==this.indexOf(a,b)?!0:!1:this.has(a,b)},D=function(a,b){var c=0;if(null===a)return-1;if(a.indexOf)return a.indexOf(b);for(c=a.length;c--;)if(a[c]===b)return c;return-1},E=function(a){return!(!a||1!==a.nodeType)},F=function(a){var b,c=0;if(!a)return 0;if(this.isObject(a))for(b in a)this.has(a,b)&&++c;return(this.isString(a)||this.isArray(a)||this.isArguments(a))&&(c=a.length),this.isNumber(a)&&(c=a.toString().length),c},G=function(a){return this.combine({},a,!0)},H=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},I=Object.prototype.keys||function(a){var b,c=[];if(a==Object(a))for(b in a)this.has(a,b)&&(c[c.length]=b);return c},J=function(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(a,arguments))}},K=function(a,b){var c={};return b=b||function(a){return a},function(){var d=b.apply(null,arguments);return this.has(c,d)?c[d]:c[d]=a.apply(a,arguments)}},L=function(a,b){var c,d;for(c=0,d=a.length;d>c;++c)if(a[c]===b){a.splice(c,1);break}},M=function(c,d,e){var f;return c.style&&this.isEmpty(c.style[d])?c.currentStyle?f=c.currentStyle[d]:a.getComputedStyle&&(f=b.defaultView.getComputedStyle(c,null).getPropertyValue(d)):c.style&&(f=c.style[d]),e?parseFloat(f):f},N=function(a){return typeof a==typeof Function},O=function(a,c,d){var e;return d&&(d.style.display="none"),e=b.elementFromPoint(a,c),e&&this&&this.containsClass(e,"omit")&&(e=O(a,c,e)),d&&(d.style.display=""),e},P=function(a,c,d){var e,f=!1,g=[];for(d&&(d.style.display="none"),f=b.elementFromPoint(a,c);f&&"BODY"!==f.tagName&&"HTML"!==f.tagName;)g.push(f),U(f,"animated"),f.style.display="none",f=b.elementFromPoint(a,c);for(e=0;e<g.length;++e)g[e].style.display="block";return d&&(d.style.display="block"),g},Q=function(a,b){return a.getAttribute("data-"+b)},R=function(a,b,c){return a.setAttribute("data-"+b,c)},S=function(a,c){return(S=b.documentElement.classList?function(a,b){return a.classList.contains(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return a.className.match(c)})(a,c)},T=function(a,c){var d,e,f=this;return(T=b.documentElement.classList?function(a,b){if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.classList.add(b[d]);else a.classList.add(b)}:function(a,b){if(!a)return!1;if(!S(a,b))if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.className+=(a.className?" ":"")+b[d];else a.className+=(a.className?" ":"")+b})(a,c)},U=function(a,c){return(U=b.documentElement.classList?function(a,b){a.classList.remove(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c,"$2")})(a,c)},V=function(a){a.className="",a.setAttribute("class","")},W=function(a,c){return(W=b.documentElement.classList&&b.documentElement.classList.toggle?function(a,b){return a.classList.toggle(b)}:function(a,b){return S(a,b)?(U(a,b),!1):(T(a,b),!0)})(a,c)},X=function(a,b){if(document.createEvent){var c=document.createEvent("MouseEvents");return c.initEvent(b,!0,!1),a.dispatchEvent(c),!0}return document.createEventObject?(a.fireEvent("on"+b),!0):"function"==typeof a["on"+b]?(a["on"+b](),!0):!1},Y=function(a){return b.querySelector(a)},Z=function(a,b){function c(){var f=(new Date).getTime();f-d>=b?a():e=requestAnimationFrame(c)}var d=(new Date).getTime(),e=null;return void 0===b&&(b=1),c(),{cancel:function(){"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame(e)}}},$=function(a,b,c,d){var e,f,g={start:["animationstart","animationstart","webkitAnimationStart","oanimationstart","MSAnimationStart"],iteration:["animationiteration","animationiteration","webkitAnimationIteration","oanimationiteration","MSAnimationIteration"],end:["animationend","animationend","webkitAnimationEnd","oanimationend","MSAnimationEnd"],tend:["transitionend","transitionend","webkitTransitionEnd","otransitionend","MSTransitionEnd"]},h=g[b]||[],d=d||"add";for(f=0,e=h.length;e>f;++f)"add"===d?a.addEventListener(h[f],c,!1):"remove"===d&&a.removeEventListener(h[f],c,!1)},_=function(c){var d=b.readyState;"complete"===d||"interactive"===d?c():a.addEventListener?a.addEventListener("DOMContentLoaded",c):a.attachEvent("onload",c)},ab=function(){var a=function(a,c){return b(a.slice(),c)},b=function(a,b){"function"!=typeof b&&(b=function(a,b){return String(a).localeCompare(b)});var d=a.length;if(1>=d)return a;for(var e=new Array(d),f=1;d>f;f*=2){c(a,b,f,e);var g=a;a=e,e=g}return a},c=function(a,b,c,d){var e,f,g,h,i,j=a.length,k=0,l=2*c;for(e=0;j>e;e+=l)for(f=e+c,g=f+c,f>j&&(f=j),g>j&&(g=j),h=e,i=f;;)if(f>h&&g>i)d[k++]=b(a[h],a[i])<=0?a[h++]:a[i++];else if(f>h)d[k++]=a[h++];else{if(!(g>i))break;d[k++]=a[i++]}};return a.inplace=function(a,d){var e=b(a,d);return e!==a&&c(e,null,a.length,a),a},a}();return Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){var b=obj.__proto__||obj.constructor.prototype;return a in this&&(!(a in b)||b[a]!==this[a])}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=window,d=0;d<b.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[b[d]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[b[d]+"CancelAnimationFrame"]||c[b[d]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=c.setTimeout(function(){b(d+e)},e);return a=d+e,f}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){clearTimeout(a)})}(),CanvasRenderingContext2D.prototype.clear=CanvasRenderingContext2D.prototype.clear||function(a){a&&(this.save(),this.setTransform(1,0,0,1,0,0)),this.clearRect(0,0,this.canvas.width,this.canvas.height),a&&this.restore()},{isVector:d,isDimension:c,isMatrix:e,isString:g,isArray:h,isArray2D:f,isObject:i,isFunction:j,emptyFn:m,isNumber:n,isBoolean:o,isDate:p,isInt:q,has:r,isUndefined:s,isDefined:t,isEmpty:u,isArgument:v,getRandom:w,upperFirst:x,multiIs:y,combine:z,imports:l,isDomList:A,toArray:B,contains:C,indexOf:D,isElement:E,size:F,clone:G,isRegex:H,keys:I,once:J,memoize:K,removeObject:L,getStyle:M,isFunctionByType:N,getNodeOnPoint:O,getNodesOnPoint:P,getData:Q,setData:R,containsClass:S,addClass:T,removeClass:U,removeClasses:V,toggleClass:W,triggerEvent:X,$:Y,setAnimationFrameTimeout:Z,animationEvent:$,domReady:_,arrayMatch:k,sort:{stable:ab}}}(window,window.document),glue.module.create("glue/domready",function(){"use strict";function a(a){var b;for(b=0;b<a.length;b+=1)a[b](j)}function b(){var b=k;i&&b.length&&(k=[],a(b))}function c(){i||(i=!0,g&&clearInterval(g),b())}function d(a){return i?a(j):k.push(a),d}var e,f,g,h="undefined"!=typeof window&&window.document,i=!h,j=h?document:null,k=[];if(h){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(window.attachEvent){window.attachEvent("onload",c),f=document.createElement("div");try{e=null===window.frameElement}catch(l){}f.doScroll&&e&&window.external&&(g=setInterval(function(){try{f.doScroll(),c()}catch(a){}},30))}"complete"===document.readyState&&c()}return d.version="2.0.1",d.load=function(a,b,c,e){e.isBuild?c(null):d(c)},d}),(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=[].slice,e=function(a,b,d){c.call(this,a,b,d),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=e.prototype.render},f=1e-10,g=c._internals.isSelector,h=c._internals.isArray,i=e.prototype=c.to({},.1,{}),j=[];e.version="1.11.8",i.constructor=e,i.kill()._gc=!1,e.killTweensOf=e.killDelayedCallsTo=c.killTweensOf,e.getTweensOf=c.getTweensOf,e.ticker=c.ticker,i.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),c.prototype.invalidate.call(this)},i.updateTo=function(a,b){var d,e=this.ratio;b&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(d in a)this.vars[d]=a[d];if(this._initted)if(b)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&c._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var f=this._time;this.render(0,!0,!1),this._initted=!1,this.render(f,!0,!1)}else if(this._time>0){this._initted=!1,this._init();for(var g,h=1/(1-e),i=this._firstPT;i;)g=i.s+i.c,i.c*=h,i.s=g-i.c,i=i._next}return this},i.render=function(a,b,c){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var d,e,g,h,i,k,l,m,n=this._dirty?this.totalDuration():this._totalDuration,o=this._time,p=this._totalTime,q=this._cycle,r=this._duration;if(a>=n?(this._totalTime=n,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=r,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(d=!0,e="onComplete"),0===r&&(m=this._rawPrevTime,this._startTime===this._timeline._duration&&(a=0),(0===a||0>m||m===f)&&m!==a&&(c=!0,m>f&&(e="onReverseComplete")),this._rawPrevTime=m=!b||a||this._rawPrevTime===a?a:f)):1e-7>a?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==p||0===r&&this._rawPrevTime>0&&this._rawPrevTime!==f)&&(e="onReverseComplete",d=this._reversed),0>a?(this._active=!1,0===r&&(this._rawPrevTime>=0&&(c=!0),this._rawPrevTime=m=!b||a||this._rawPrevTime===a?a:f)):this._initted||(c=!0)):(this._totalTime=this._time=a,0!==this._repeat&&(h=r+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=r-this._time),this._time>r?this._time=r:this._time<0&&(this._time=0)),this._easeType?(i=this._time/r,k=this._easeType,l=this._easePower,(1===k||3===k&&i>=.5)&&(i=1-i),3===k&&(i*=2),1===l?i*=i:2===l?i*=i*i:3===l?i*=i*i*i:4===l&&(i*=i*i*i*i),this.ratio=1===k?1-i:2===k?i:this._time/r<.5?i/2:1-i/2):this.ratio=this._ease.getRatio(this._time/r)),o===this._time&&!c&&q===this._cycle)return void(p!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||j)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;this._time&&!d?this.ratio=this._ease.getRatio(this._time/r):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==o&&a>=0&&(this._active=!0),0===p&&(this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===r)&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||j))),g=this._firstPT;g;)g.f?g.t[g.p](g.c*this.ratio+g.s):g.t[g.p]=g.c*this.ratio+g.s,g=g._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,c),b||(this._totalTime!==p||d)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||j)),this._cycle!==q&&(b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||j)),e&&(this._gc||(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||j),0===r&&this._rawPrevTime===f&&m!==f&&(this._rawPrevTime=0)))},e.to=function(a,b,c){return new e(a,b,c)},e.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new e(a,b,c)},e.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new e(a,b,d)},e.staggerTo=e.allTo=function(a,b,f,i,k,l,m){i=i||0;var n,o,p,q,r=f.delay||0,s=[],t=function(){f.onComplete&&f.onComplete.apply(f.onCompleteScope||this,arguments),k.apply(m||this,l||j)};for(h(a)||("string"==typeof a&&(a=c.selector(a)||a),g(a)&&(a=d.call(a,0))),n=a.length,p=0;n>p;p++){o={};for(q in f)o[q]=f[q];o.delay=r,p===n-1&&k&&(o.onComplete=t),s[p]=new e(a[p],b,o),r+=i}return s},e.staggerFrom=e.allFrom=function(a,b,c,d,f,g,h){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,e.staggerTo(a,b,c,d,f,g,h)},e.staggerFromTo=e.allFromTo=function(a,b,c,d,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,e.staggerTo(a,b,d,f,g,h,i)},e.delayedCall=function(a,b,c,d,f){return new e(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:f,overwrite:0})},e.set=function(a,b){return new e(a,0,b)},e.isTweening=function(a){return c.getTweensOf(a,!0).length>0};var k=function(a,b){for(var d=[],e=0,f=a._first;f;)f instanceof c?d[e++]=f:(b&&(d[e++]=f),d=d.concat(k(f,b)),e=d.length),f=f._next;return d},l=e.getAllTweens=function(b){return k(a._rootTimeline,b).concat(k(a._rootFramesTimeline,b))};e.killAll=function(a,c,d,e){null==c&&(c=!0),null==d&&(d=!0);var f,g,h,i=l(0!=e),j=i.length,k=c&&d&&e;for(h=0;j>h;h++)g=i[h],(k||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&(a?g.totalTime(g.totalDuration()):g._enabled(!1,!1))},e.killChildTweensOf=function(a,b){if(null!=a){var f,i,j,k,l,m=c._tweenLookup;if("string"==typeof a&&(a=c.selector(a)||a),g(a)&&(a=d.call(a,0)),h(a))for(k=a.length;--k>-1;)e.killChildTweensOf(a[k],b);else{f=[];for(j in m)for(i=m[j].target.parentNode;i;)i===a&&(f=f.concat(m[j].tweens)),i=i.parentNode;for(l=f.length,k=0;l>k;k++)b&&f[k].totalTime(f[k].totalDuration()),f[k]._enabled(!1,!1)}}};var m=function(a,c,d,e){c=c!==!1,d=d!==!1,e=e!==!1;for(var f,g,h=l(e),i=c&&d&&e,j=h.length;--j>-1;)g=h[j],(i||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&g.paused(a)};return e.pauseAll=function(a,b,c){m(!0,a,b,c)},e.resumeAll=function(a,b,c){m(!1,a,b,c)},e.globalTimeScale=function(b){var d=a._rootTimeline,e=c.ticker.time;return arguments.length?(b=b||f,d._startTime=e-(e-d._startTime)*d._timeScale/b,d=a._rootFramesTimeline,e=c.ticker.frame,d._startTime=e-(e-d._startTime)*d._timeScale/b,d._timeScale=a._rootTimeline._timeScale=b,b):d._timeScale},i.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},i.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},i.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},i.duration=function(b){return arguments.length?a.prototype.duration.call(this,b):this._duration},i.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)
},i.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},i.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},i.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},e},!0),window._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=function(a){b.call(this,a),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var c,d,e=this.vars;for(d in e)c=e[d],g(c)&&-1!==c.join("").indexOf("{self}")&&(e[d]=this._swapSelfInParams(c));g(e.tweens)&&this.add(e.tweens,0,e.align,e.stagger)},e=1e-10,f=c._internals.isSelector,g=c._internals.isArray,h=[],i=window._gsDefine.globals,j=function(a){var b,c={};for(b in a)c[b]=a[b];return c},k=function(a,b,c,d){a._timeline.pause(a._startTime),b&&b.apply(d||a._timeline,c||h)},l=h.slice,m=d.prototype=new b;return d.version="1.11.8",m.constructor=d,m.kill()._gc=!1,m.to=function(a,b,d,e){var f=d.repeat&&i.TweenMax||c;return b?this.add(new f(a,b,d),e):this.set(a,d,e)},m.from=function(a,b,d,e){return this.add((d.repeat&&i.TweenMax||c).from(a,b,d),e)},m.fromTo=function(a,b,d,e,f){var g=e.repeat&&i.TweenMax||c;return b?this.add(g.fromTo(a,b,d,e),f):this.set(a,e,f)},m.staggerTo=function(a,b,e,g,h,i,k,m){var n,o=new d({onComplete:i,onCompleteParams:k,onCompleteScope:m,smoothChildTiming:this.smoothChildTiming});for("string"==typeof a&&(a=c.selector(a)||a),f(a)&&(a=l.call(a,0)),g=g||0,n=0;n<a.length;n++)e.startAt&&(e.startAt=j(e.startAt)),o.to(a[n],b,j(e),n*g);return this.add(o,h)},m.staggerFrom=function(a,b,c,d,e,f,g,h){return c.immediateRender=0!=c.immediateRender,c.runBackwards=!0,this.staggerTo(a,b,c,d,e,f,g,h)},m.staggerFromTo=function(a,b,c,d,e,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,this.staggerTo(a,b,d,e,f,g,h,i)},m.call=function(a,b,d,e){return this.add(c.delayedCall(0,a,b,d),e)},m.set=function(a,b,d){return d=this._parseTimeOrLabel(d,0,!0),null==b.immediateRender&&(b.immediateRender=d===this._time&&!this._paused),this.add(new c(a,0,b),d)},d.exportRoot=function(a,b){a=a||{},null==a.smoothChildTiming&&(a.smoothChildTiming=!0);var e,f,g=new d(a),h=g._timeline;for(null==b&&(b=!0),h._remove(g,!0),g._startTime=0,g._rawPrevTime=g._time=g._totalTime=h._time,e=h._first;e;)f=e._next,b&&e instanceof c&&e.target===e.vars.onComplete||g.add(e,e._startTime-e._delay),e=f;return h.add(g,0),g},m.add=function(e,f,h,i){var j,k,l,m,n,o;if("number"!=typeof f&&(f=this._parseTimeOrLabel(f,0,!0,e)),!(e instanceof a)){if(e instanceof Array||e&&e.push&&g(e)){for(h=h||"normal",i=i||0,j=f,k=e.length,l=0;k>l;l++)g(m=e[l])&&(m=new d({tweens:m})),this.add(m,j),"string"!=typeof m&&"function"!=typeof m&&("sequence"===h?j=m._startTime+m.totalDuration()/m._timeScale:"start"===h&&(m._startTime-=m.delay())),j+=i;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,f);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=c.delayedCall(0,e)}if(b.prototype.add.call(this,e,f),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(n=this,o=n.rawTime()>e._startTime;n._timeline;)o&&n._timeline.smoothChildTiming?n.totalTime(n._totalTime,!0):n._gc&&n._enabled(!0,!1),n=n._timeline;return this},m.remove=function(b){if(b instanceof a)return this._remove(b,!1);if(b instanceof Array||b&&b.push&&g(b)){for(var c=b.length;--c>-1;)this.remove(b[c]);return this}return"string"==typeof b?this.removeLabel(b):this.kill(null,b)},m._remove=function(a,c){b.prototype._remove.call(this,a,c);var d=this._last;return d?this._time>d._startTime+d._totalDuration/d._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},m.append=function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},m.insert=m.insertMultiple=function(a,b,c,d){return this.add(a,b||0,c,d)},m.appendMultiple=function(a,b,c,d){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),c,d)},m.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},m.addPause=function(a,b,c,d){return this.call(k,["{self}",b,c,d],this,a)},m.removeLabel=function(a){return delete this._labels[a],this},m.getLabelTime=function(a){return null!=this._labels[a]?this._labels[a]:-1},m._parseTimeOrLabel=function(b,c,d,e){var f;if(e instanceof a&&e.timeline===this)this.remove(e);else if(e&&(e instanceof Array||e.push&&g(e)))for(f=e.length;--f>-1;)e[f]instanceof a&&e[f].timeline===this&&this.remove(e[f]);if("string"==typeof c)return this._parseTimeOrLabel(c,d&&"number"==typeof b&&null==this._labels[c]?b-this.duration():0,d);if(c=c||0,"string"!=typeof b||!isNaN(b)&&null==this._labels[b])null==b&&(b=this.duration());else{if(f=b.indexOf("="),-1===f)return null==this._labels[b]?d?this._labels[b]=this.duration()+c:c:this._labels[b]+c;c=parseInt(b.charAt(f-1)+"1",10)*Number(b.substr(f+1)),b=f>1?this._parseTimeOrLabel(b.substr(0,f-1),0,d):this.duration()}return Number(b)+c},m.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),b!==!1)},m.stop=function(){return this.paused(!0)},m.gotoAndPlay=function(a,b){return this.play(a,b)},m.gotoAndStop=function(a,b){return this.pause(a,b)},m.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,f,g,i,j,k=this._dirty?this.totalDuration():this._totalDuration,l=this._time,m=this._startTime,n=this._timeScale,o=this._paused;if(a>=k?(this._totalTime=this._time=k,this._reversed||this._hasPausedChild()||(f=!0,i="onComplete",0===this._duration&&(0===a||this._rawPrevTime<0||this._rawPrevTime===e)&&this._rawPrevTime!==a&&this._first&&(j=!0,this._rawPrevTime>e&&(i="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:e,a=k+1e-4):1e-7>a?(this._totalTime=this._time=0,(0!==l||0===this._duration&&this._rawPrevTime!==e&&(this._rawPrevTime>0||0>a&&this._rawPrevTime>=0))&&(i="onReverseComplete",f=this._reversed),0>a?(this._active=!1,0===this._duration&&this._rawPrevTime>=0&&this._first&&(j=!0),this._rawPrevTime=a):(this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:e,a=0,this._initted||(j=!0))):this._totalTime=this._time=this._rawPrevTime=a,this._time!==l&&this._first||c||j){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==l&&a>0&&(this._active=!0),0===l&&this.vars.onStart&&0!==this._time&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||h)),this._time>=l)for(d=this._first;d&&(g=d._next,!this._paused||o);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;else for(d=this._last;d&&(g=d._prev,!this._paused||o);)(d._active||d._startTime<=l&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||h)),i&&(this._gc||(m===this._startTime||n!==this._timeScale)&&(0===this._time||k>=this.totalDuration())&&(f&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[i]&&this.vars[i].apply(this.vars[i+"Scope"]||this,this.vars[i+"Params"]||h)))}},m._hasPausedChild=function(){for(var a=this._first;a;){if(a._paused||a instanceof d&&a._hasPausedChild())return!0;a=a._next}return!1},m.getChildren=function(a,b,d,e){e=e||-9999999999;for(var f=[],g=this._first,h=0;g;)g._startTime<e||(g instanceof c?b!==!1&&(f[h++]=g):(d!==!1&&(f[h++]=g),a!==!1&&(f=f.concat(g.getChildren(!0,b,d)),h=f.length))),g=g._next;return f},m.getTweensOf=function(a,b){for(var d=c.getTweensOf(a),e=d.length,f=[],g=0;--e>-1;)(d[e].timeline===this||b&&this._contains(d[e]))&&(f[g++]=d[e]);return f},m._contains=function(a){for(var b=a.timeline;b;){if(b===this)return!0;b=b.timeline}return!1},m.shiftChildren=function(a,b,c){c=c||0;for(var d,e=this._first,f=this._labels;e;)e._startTime>=c&&(e._startTime+=a),e=e._next;if(b)for(d in f)f[d]>=c&&(f[d]+=a);return this._uncache(!0)},m._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var c=b?this.getTweensOf(b):this.getChildren(!0,!0,!1),d=c.length,e=!1;--d>-1;)c[d]._kill(a,b)&&(e=!0);return e},m.clear=function(a){var b=this.getChildren(!1,!0,!0),c=b.length;for(this._time=this._totalTime=0;--c>-1;)b[c]._enabled(!1,!1);return a!==!1&&(this._labels={}),this._uncache(!0)},m.invalidate=function(){for(var a=this._first;a;)a.invalidate(),a=a._next;return this},m._enabled=function(a,c){if(a===this._gc)for(var d=this._first;d;)d._enabled(a,!0),d=d._next;return b.prototype._enabled.call(this,a,c)},m.duration=function(a){return arguments.length?(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},m.totalDuration=function(a){if(!arguments.length){if(this._dirty){for(var b,c,d=0,e=this._last,f=999999999999;e;)b=e._prev,e._dirty&&e.totalDuration(),e._startTime>f&&this._sortChildren&&!e._paused?this.add(e,e._startTime-e._delay):f=e._startTime,e._startTime<0&&!e._paused&&(d-=e._startTime,this._timeline.smoothChildTiming&&(this._startTime+=e._startTime/this._timeScale),this.shiftChildren(-e._startTime,!1,-9999999999),f=0),c=e._startTime+e._totalDuration/e._timeScale,c>d&&(d=c),e=b;this._duration=this._totalDuration=d,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==a&&this.timeScale(this._totalDuration/a),this},m.usesFrames=function(){for(var b=this._timeline;b._timeline;)b=b._timeline;return b===a._rootFramesTimeline},m.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},d},!0),window._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(a,b,c){var d=function(b){a.call(this,b),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},e=1e-10,f=[],g=new c(null,null,1,0),h=d.prototype=new a;return h.constructor=d,h.kill()._gc=!1,d.version="1.11.8",h.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),a.prototype.invalidate.call(this)},h.addCallback=function(a,c,d,e){return this.add(b.delayedCall(0,a,d,e),c)},h.removeCallback=function(a,b){if(a)if(null==b)this._kill(null,a);else for(var c=this.getTweensOf(a,!1),d=c.length,e=this._parseTimeOrLabel(b);--d>-1;)c[d]._startTime===e&&c[d]._enabled(!1,!1);return this},h.tweenTo=function(a,c){c=c||{};var d,e,h,i={ease:g,overwrite:c.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1};for(e in c)i[e]=c[e];return i.time=this._parseTimeOrLabel(a),d=Math.abs(Number(i.time)-this._time)/this._timeScale||.001,h=new b(this,d,i),i.onStart=function(){h.target.paused(!0),h.vars.time!==h.target.time()&&d===h.duration()&&h.duration(Math.abs(h.vars.time-h.target.time())/h.target._timeScale),c.onStart&&c.onStart.apply(c.onStartScope||h,c.onStartParams||f)},h},h.tweenFromTo=function(a,b,c){c=c||{},a=this._parseTimeOrLabel(a),c.startAt={onComplete:this.seek,onCompleteParams:[a],onCompleteScope:this},c.immediateRender=c.immediateRender!==!1;var d=this.tweenTo(b,c);return d.duration(Math.abs(d.vars.time-a)/this._timeScale||.001)},h.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,g,h,i,j,k,l=this._dirty?this.totalDuration():this._totalDuration,m=this._duration,n=this._time,o=this._totalTime,p=this._startTime,q=this._timeScale,r=this._rawPrevTime,s=this._paused,t=this._cycle;if(a>=l?(this._locked||(this._totalTime=l,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(g=!0,i="onComplete",0===this._duration&&(0===a||0>r||r===e)&&r!==a&&this._first&&(j=!0,r>e&&(i="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:e,this._yoyo&&0!==(1&this._cycle)?this._time=a=0:(this._time=m,a=m+1e-4)):1e-7>a?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==n||0===m&&r!==e&&(r>0||0>a&&r>=0)&&!this._locked)&&(i="onReverseComplete",g=this._reversed),0>a?(this._active=!1,0===m&&r>=0&&this._first&&(j=!0),this._rawPrevTime=a):(this._rawPrevTime=m||!b||a||this._rawPrevTime===a?a:e,a=0,this._initted||(j=!0))):(0===m&&0>r&&(j=!0),this._time=this._rawPrevTime=a,this._locked||(this._totalTime=a,0!==this._repeat&&(k=m+this._repeatDelay,this._cycle=this._totalTime/k>>0,0!==this._cycle&&this._cycle===this._totalTime/k&&this._cycle--,this._time=this._totalTime-this._cycle*k,this._yoyo&&0!==(1&this._cycle)&&(this._time=m-this._time),this._time>m?(this._time=m,a=m+1e-4):this._time<0?this._time=a=0:a=this._time))),this._cycle!==t&&!this._locked){var u=this._yoyo&&0!==(1&t),v=u===(this._yoyo&&0!==(1&this._cycle)),w=this._totalTime,x=this._cycle,y=this._rawPrevTime,z=this._time;if(this._totalTime=t*m,this._cycle<t?u=!u:this._totalTime+=m,this._time=n,this._rawPrevTime=0===m?r-1e-4:r,this._cycle=t,this._locked=!0,n=u?0:m,this.render(n,b,0===m),b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||f),v&&(n=u?m+1e-4:-1e-4,this.render(n,!0,!1)),this._locked=!1,this._paused&&!s)return;this._time=z,this._totalTime=w,this._cycle=x,this._rawPrevTime=y}if(!(this._time!==n&&this._first||c||j))return void(o!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==o&&a>0&&(this._active=!0),0===o&&this.vars.onStart&&0!==this._totalTime&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||f)),this._time>=n)for(d=this._first;d&&(h=d._next,!this._paused||s);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=h;else for(d=this._last;d&&(h=d._prev,!this._paused||s);)(d._active||d._startTime<=n&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=h;this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f)),i&&(this._locked||this._gc||(p===this._startTime||q!==this._timeScale)&&(0===this._time||l>=this.totalDuration())&&(g&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[i]&&this.vars[i].apply(this.vars[i+"Scope"]||this,this.vars[i+"Params"]||f)))},h.getActive=function(a,b,c){null==a&&(a=!0),null==b&&(b=!0),null==c&&(c=!1);var d,e,f=[],g=this.getChildren(a,b,c),h=0,i=g.length;for(d=0;i>d;d++)e=g[d],e.isActive()&&(f[h++]=e);return f},h.getLabelAfter=function(a){a||0!==a&&(a=this._time);var b,c=this.getLabelsArray(),d=c.length;for(b=0;d>b;b++)if(c[b].time>a)return c[b].name;return null},h.getLabelBefore=function(a){null==a&&(a=this._time);for(var b=this.getLabelsArray(),c=b.length;--c>-1;)if(b[c].time<a)return b[c].name;return null},h.getLabelsArray=function(){var a,b=[],c=0;for(a in this._labels)b[c++]={time:this._labels[a],name:a};return b.sort(function(a,b){return a.time-b.time}),b},h.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},h.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},h.totalDuration=function(b){return arguments.length?-1===this._repeat?this:this.duration((b-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(a.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},h.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},h.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},h.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},h.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},h.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.getLabelBefore(this._time+1e-8)},d},!0),function(){var a=180/Math.PI,b=[],c=[],d=[],e={},f=function(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d,this.da=d-a,this.ca=c-a,this.ba=b-a},g=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(a,b,c,d){var e={a:a},f={},g={},h={c:d},i=(a+b)/2,j=(b+c)/2,k=(c+d)/2,l=(i+j)/2,m=(j+k)/2,n=(m-l)/8;return e.b=i+(a-i)/4,f.b=l+n,e.c=f.a=(e.b+f.b)/2,f.c=g.a=(l+m)/2,g.b=m-n,h.b=k+(d-k)/4,g.c=h.a=(g.b+h.b)/2,[e,f,g,h]},i=function(a,e,f,g,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w=a.length-1,x=0,y=a[0].a;for(j=0;w>j;j++)n=a[x],k=n.a,l=n.d,m=a[x+1].d,i?(t=b[j],u=c[j],v=(u+t)*e*.25/(g?.5:d[j]||.5),o=l-(l-k)*(g?.5*e:0!==t?v/t:0),p=l+(m-l)*(g?.5*e:0!==u?v/u:0),q=l-(o+((p-o)*(3*t/(t+u)+.5)/4||0))):(o=l-(l-k)*e*.5,p=l+(m-l)*e*.5,q=l-(o+p)/2),o+=q,p+=q,n.c=r=o,n.b=0!==j?y:y=n.a+.6*(n.c-n.a),n.da=l-k,n.ca=r-k,n.ba=y-k,f?(s=h(k,y,r,l),a.splice(x,1,s[0],s[1],s[2],s[3]),x+=4):x++,y=p;n=a[x],n.b=y,n.c=y+.4*(n.d-y),n.da=n.d-n.a,n.ca=n.c-n.a,n.ba=y-n.a,f&&(s=h(n.a,y,n.c,n.d),a.splice(x,1,s[0],s[1],s[2],s[3]))},j=function(a,d,e,g){var h,i,j,k,l,m,n=[];if(g)for(a=[g].concat(a),i=a.length;--i>-1;)"string"==typeof(m=a[i][d])&&"="===m.charAt(1)&&(a[i][d]=g[d]+Number(m.charAt(0)+m.substr(2)));if(h=a.length-2,0>h)return n[0]=new f(a[0][d],0,0,a[-1>h?0:1][d]),n;for(i=0;h>i;i++)j=a[i][d],k=a[i+1][d],n[i]=new f(j,0,0,k),e&&(l=a[i+2][d],b[i]=(b[i]||0)+(k-j)*(k-j),c[i]=(c[i]||0)+(l-k)*(l-k));return n[i]=new f(a[i][d],0,0,a[i+1][d]),n},k=function(a,f,h,k,l,m){var n,o,p,q,r,s,t,u,v={},w=[],x=m||a[0];l="string"==typeof l?","+l+",":g,null==f&&(f=1);for(o in a[0])w.push(o);if(a.length>1){for(u=a[a.length-1],t=!0,n=w.length;--n>-1;)if(o=w[n],Math.abs(x[o]-u[o])>.05){t=!1;break}t&&(a=a.concat(),m&&a.unshift(m),a.push(a[1]),m=a[a.length-3])}for(b.length=c.length=d.length=0,n=w.length;--n>-1;)o=w[n],e[o]=-1!==l.indexOf(","+o+","),v[o]=j(a,o,e[o],m);for(n=b.length;--n>-1;)b[n]=Math.sqrt(b[n]),c[n]=Math.sqrt(c[n]);if(!k){for(n=w.length;--n>-1;)if(e[o])for(p=v[w[n]],s=p.length-1,q=0;s>q;q++)r=p[q+1].da/c[q]+p[q].da/b[q],d[q]=(d[q]||0)+r*r;for(n=d.length;--n>-1;)d[n]=Math.sqrt(d[n])}for(n=w.length,q=h?4:1;--n>-1;)o=w[n],p=v[o],i(p,f,h,k,e[o]),t&&(p.splice(0,q),p.splice(p.length-q,q));return v},l=function(a,b,c){b=b||"soft";var d,e,g,h,i,j,k,l,m,n,o,p={},q="cubic"===b?3:2,r="soft"===b,s=[];if(r&&c&&(a=[c].concat(a)),null==a||a.length<q+1)throw"invalid Bezier data";for(m in a[0])s.push(m);for(j=s.length;--j>-1;){for(m=s[j],p[m]=i=[],n=0,l=a.length,k=0;l>k;k++)d=null==c?a[k][m]:"string"==typeof(o=a[k][m])&&"="===o.charAt(1)?c[m]+Number(o.charAt(0)+o.substr(2)):Number(o),r&&k>1&&l-1>k&&(i[n++]=(d+i[n-2])/2),i[n++]=d;for(l=n-q+1,n=0,k=0;l>k;k+=q)d=i[k],e=i[k+1],g=i[k+2],h=2===q?0:i[k+3],i[n++]=o=3===q?new f(d,e,g,h):new f(d,(2*e+d)/3,(2*e+g)/3,g);i.length=n}return p},m=function(a,b,c){for(var d,e,f,g,h,i,j,k,l,m,n,o=1/c,p=a.length;--p>-1;)for(m=a[p],f=m.a,g=m.d-f,h=m.c-f,i=m.b-f,d=e=0,k=1;c>=k;k++)j=o*k,l=1-j,d=e-(e=(j*j*g+3*l*(j*h+l*i))*j),n=p*c+k-1,b[n]=(b[n]||0)+d*d},n=function(a,b){b=b>>0||6;var c,d,e,f,g=[],h=[],i=0,j=0,k=b-1,l=[],n=[];for(c in a)m(a[c],g,b);for(e=g.length,d=0;e>d;d++)i+=Math.sqrt(g[d]),f=d%b,n[f]=i,f===k&&(j+=i,f=d/b>>0,l[f]=n,h[f]=j,i=0,n=[]);return{length:j,lengths:h,segments:l}},o=window._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.2",API:2,global:!0,init:function(a,b,c){this._target=a,b instanceof Array&&(b={values:b}),this._func={},this._round={},this._props=[],this._timeRes=null==b.timeResolution?6:parseInt(b.timeResolution,10);var d,e,f,g,h,i=b.values||[],j={},m=i[0],o=b.autoRotate||c.vars.orientToBezier;this._autoRotate=o?o instanceof Array?o:[["x","y","rotation",o===!0?0:Number(o)||0]]:null;for(d in m)this._props.push(d);for(f=this._props.length;--f>-1;)d=this._props[f],this._overwriteProps.push(d),e=this._func[d]="function"==typeof a[d],j[d]=e?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]():parseFloat(a[d]),h||j[d]!==i[0][d]&&(h=j);if(this._beziers="cubic"!==b.type&&"quadratic"!==b.type&&"soft"!==b.type?k(i,isNaN(b.curviness)?1:b.curviness,!1,"thruBasic"===b.type,b.correlate,h):l(i,b.type,j),this._segCount=this._beziers[d].length,this._timeRes){var p=n(this._beziers,this._timeRes);this._length=p.length,this._lengths=p.lengths,this._segments=p.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(o=this._autoRotate)for(this._initialRotations=[],o[0]instanceof Array||(this._autoRotate=o=[o]),f=o.length;--f>-1;){for(g=0;3>g;g++)d=o[f][g],this._func[d]="function"==typeof a[d]?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]:!1;d=o[f][2],this._initialRotations[f]=this._func[d]?this._func[d].call(this._target):this._target[d]}return this._startRatio=c.vars.runBackwards?1:0,!0},set:function(b){var c,d,e,f,g,h,i,j,k,l,m=this._segCount,n=this._func,o=this._target,p=b!==this._startRatio;if(this._timeRes){if(k=this._lengths,l=this._curSeg,b*=this._length,e=this._li,b>this._l2&&m-1>e){for(j=m-1;j>e&&(this._l2=k[++e])<=b;);this._l1=k[e-1],this._li=e,this._curSeg=l=this._segments[e],this._s2=l[this._s1=this._si=0]}else if(b<this._l1&&e>0){for(;e>0&&(this._l1=k[--e])>=b;);0===e&&b<this._l1?this._l1=0:e++,this._l2=k[e],this._li=e,this._curSeg=l=this._segments[e],this._s1=l[(this._si=l.length-1)-1]||0,this._s2=l[this._si]}if(c=e,b-=this._l1,e=this._si,b>this._s2&&e<l.length-1){for(j=l.length-1;j>e&&(this._s2=l[++e])<=b;);this._s1=l[e-1],this._si=e}else if(b<this._s1&&e>0){for(;e>0&&(this._s1=l[--e])>=b;);0===e&&b<this._s1?this._s1=0:e++,this._s2=l[e],this._si=e}h=(e+(b-this._s1)/(this._s2-this._s1))*this._prec}else c=0>b?0:b>=1?m-1:m*b>>0,h=(b-c*(1/m))*m;for(d=1-h,e=this._props.length;--e>-1;)f=this._props[e],g=this._beziers[f][c],i=(h*h*g.da+3*d*(h*g.ca+d*g.ba))*h+g.a,this._round[f]&&(i=Math.round(i)),n[f]?o[f](i):o[f]=i;if(this._autoRotate){var q,r,s,t,u,v,w,x=this._autoRotate;for(e=x.length;--e>-1;)f=x[e][2],v=x[e][3]||0,w=x[e][4]===!0?1:a,g=this._beziers[x[e][0]],q=this._beziers[x[e][1]],g&&q&&(g=g[c],q=q[c],r=g.a+(g.b-g.a)*h,t=g.b+(g.c-g.b)*h,r+=(t-r)*h,t+=(g.c+(g.d-g.c)*h-t)*h,s=q.a+(q.b-q.a)*h,u=q.b+(q.c-q.b)*h,s+=(u-s)*h,u+=(q.c+(q.d-q.c)*h-u)*h,i=p?Math.atan2(u-s,t-r)*w+v:this._initialRotations[e],n[f]?o[f](i):o[f]=i)}}}),p=o.prototype;o.bezierThrough=k,o.cubicToQuadratic=h,o._autoCSS=!0,o.quadraticToCubic=function(a,b,c){return new f(a,(2*b+a)/3,(2*b+c)/3,c)},o._cssRegister=function(){var a=window._gsDefine.globals.CSSPlugin;if(a){var b=a._internals,c=b._parseToProxy,d=b._setPluginRatio,e=b.CSSPropTween;b._registerComplexSpecialProp("bezier",{parser:function(a,b,f,g,h,i){b instanceof Array&&(b={values:b}),i=new o;var j,k,l,m=b.values,n=m.length-1,p=[],q={};if(0>n)return h;for(j=0;n>=j;j++)l=c(a,m[j],g,h,i,n!==j),p[j]=l.end;for(k in b)q[k]=b[k];return q.values=p,h=new e(a,"bezier",0,0,l.pt,2),h.data=l,h.plugin=i,h.setRatio=d,0===q.autoRotate&&(q.autoRotate=!0),!q.autoRotate||q.autoRotate instanceof Array||(j=q.autoRotate===!0?0:Number(q.autoRotate),q.autoRotate=null!=l.end.left?[["left","top","rotation",j,!1]]:null!=l.end.x?[["x","y","rotation",j,!1]]:!1),q.autoRotate&&(g._transform||g._enableTransforms(!1),l.autoRotate=g._target._gsTransform),i._onInitTween(l.proxy,q,g._tween),h}})}},p._roundProps=function(a,b){for(var c=this._overwriteProps,d=c.length;--d>-1;)(a[c[d]]||a.bezier||a.bezierThrough)&&(this._round[c[d]]=b)},p._kill=function(a){var b,c,d=this._props;for(b in this._beziers)if(b in a)for(delete this._beziers[b],delete this._func[b],c=d.length;--c>-1;)d[c]===b&&d.splice(c,1);return this._super._kill.call(this,a)}}(),window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,b){var c,d,e,f,g=function(){a.call(this,"css"),this._overwriteProps.length=0,this.setRatio=g.prototype.setRatio},h={},i=g.prototype=new a("css");i.constructor=g,g.version="1.11.8",g.API=2,g.defaultTransformPerspective=0,g.defaultSkewType="compensated",i="px",g.suffixMap={top:i,right:i,bottom:i,left:i,width:i,height:i,fontSize:i,padding:i,margin:i,perspective:i,lineHeight:""};var j,k,l,m,n,o,p=/(?:\d|\-\d|\.\d|\-\.\d)+/g,q=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,r=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,s=/[^\d\-\.]/g,t=/(?:\d|\-|\+|=|#|\.)*/g,u=/opacity *= *([^)]*)/,v=/opacity:([^;]*)/,w=/alpha\(opacity *=.+?\)/i,x=/^(rgb|hsl)/,y=/([A-Z])/g,z=/-([a-z])/gi,A=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,B=function(a,b){return b.toUpperCase()},C=/(?:Left|Right|Width)/i,D=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,E=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,F=/,(?=[^\)]*(?:\(|$))/gi,G=Math.PI/180,H=180/Math.PI,I={},J=document,K=J.createElement("div"),L=J.createElement("img"),M=g._internals={_specialProps:h},N=navigator.userAgent,O=function(){var a,b=N.indexOf("Android"),c=J.createElement("div");return l=-1!==N.indexOf("Safari")&&-1===N.indexOf("Chrome")&&(-1===b||Number(N.substr(b+8,1))>3),n=l&&Number(N.substr(N.indexOf("Version/")+8,1))<6,m=-1!==N.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N)&&(o=parseFloat(RegExp.$1)),c.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",a=c.getElementsByTagName("a")[0],a?/^0.55/.test(a.style.opacity):!1}(),P=function(a){return u.test("string"==typeof a?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Q=function(a){window.console},R="",S="",T=function(a,b){b=b||K;var c,d,e=b.style;if(void 0!==e[a])return a;for(a=a.charAt(0).toUpperCase()+a.substr(1),c=["O","Moz","ms","Ms","Webkit"],d=5;--d>-1&&void 0===e[c[d]+a];);return d>=0?(S=3===d?"ms":c[d],R="-"+S.toLowerCase()+"-",S+a):null},U=J.defaultView?J.defaultView.getComputedStyle:function(){},V=g.getStyle=function(a,b,c,d,e){var f;return O||"opacity"!==b?(!d&&a.style[b]?f=a.style[b]:(c=c||U(a,null))?f=c[b]||c.getPropertyValue(b)||c.getPropertyValue(b.replace(y,"-$1").toLowerCase()):a.currentStyle&&(f=a.currentStyle[b]),null==e||f&&"none"!==f&&"auto"!==f&&"auto auto"!==f?f:e):P(a)},W=M.convertToPixels=function(a,c,d,e,f){if("px"===e||!e)return d;if("auto"===e||!d)return 0;var h,i,j,k=C.test(c),l=a,m=K.style,n=0>d;if(n&&(d=-d),"%"===e&&-1!==c.indexOf("border"))h=d/100*(k?a.clientWidth:a.clientHeight);else{if(m.cssText="border:0 solid red;position:"+V(a,"position")+";line-height:0;","%"!==e&&l.appendChild)m[k?"borderLeftWidth":"borderTopWidth"]=d+e;else{if(l=a.parentNode||J.body,i=l._gsCache,j=b.ticker.frame,i&&k&&i.time===j)return i.width*d/100;m[k?"width":"height"]=d+e}l.appendChild(K),h=parseFloat(K[k?"offsetWidth":"offsetHeight"]),l.removeChild(K),k&&"%"===e&&g.cacheWidths!==!1&&(i=l._gsCache=l._gsCache||{},i.time=j,i.width=h/d*100),0!==h||f||(h=W(a,c,d,e,!0))}return n?-h:h},X=M.calculateOffset=function(a,b,c){if("absolute"!==V(a,"position",c))return 0;var d="left"===b?"Left":"Top",e=V(a,"margin"+d,c);return a["offset"+d]-(W(a,b,parseFloat(e),e.replace(t,""))||0)},Y=function(a,b){var c,d,e={};if(b=b||U(a,null))if(c=b.length)for(;--c>-1;)e[b[c].replace(z,B)]=b.getPropertyValue(b[c]);else for(c in b)e[c]=b[c];else if(b=a.currentStyle||a.style)for(c in b)"string"==typeof c&&void 0===e[c]&&(e[c.replace(z,B)]=b[c]);return O||(e.opacity=P(a)),d=yb(a,b,!1),e.rotation=d.rotation,e.skewX=d.skewX,e.scaleX=d.scaleX,e.scaleY=d.scaleY,e.x=d.x,e.y=d.y,wb&&(e.z=d.z,e.rotationX=d.rotationX,e.rotationY=d.rotationY,e.scaleZ=d.scaleZ),e.filters&&delete e.filters,e},Z=function(a,b,c,d,e){var f,g,h,i={},j=a.style;for(g in c)"cssText"!==g&&"length"!==g&&isNaN(g)&&(b[g]!==(f=c[g])||e&&e[g])&&-1===g.indexOf("Origin")&&("number"==typeof f||"string"==typeof f)&&(i[g]="auto"!==f||"left"!==g&&"top"!==g?""!==f&&"auto"!==f&&"none"!==f||"string"!=typeof b[g]||""===b[g].replace(s,"")?f:0:X(a,g),void 0!==j[g]&&(h=new lb(j,g,j[g],h)));if(d)for(g in d)"className"!==g&&(i[g]=d[g]);return{difs:i,firstMPT:h}},$={width:["Left","Right"],height:["Top","Bottom"]},_=["marginLeft","marginRight","marginTop","marginBottom"],ab=function(a,b,c){var d=parseFloat("width"===b?a.offsetWidth:a.offsetHeight),e=$[b],f=e.length;for(c=c||U(a,null);--f>-1;)d-=parseFloat(V(a,"padding"+e[f],c,!0))||0,d-=parseFloat(V(a,"border"+e[f]+"Width",c,!0))||0;return d},bb=function(a,b){(null==a||""===a||"auto"===a||"auto auto"===a)&&(a="0 0");var c=a.split(" "),d=-1!==a.indexOf("left")?"0%":-1!==a.indexOf("right")?"100%":c[0],e=-1!==a.indexOf("top")?"0%":-1!==a.indexOf("bottom")?"100%":c[1];return null==e?e="0":"center"===e&&(e="50%"),("center"===d||isNaN(parseFloat(d))&&-1===(d+"").indexOf("="))&&(d="50%"),b&&(b.oxp=-1!==d.indexOf("%"),b.oyp=-1!==e.indexOf("%"),b.oxr="="===d.charAt(1),b.oyr="="===e.charAt(1),b.ox=parseFloat(d.replace(s,"")),b.oy=parseFloat(e.replace(s,""))),d+" "+e+(c.length>2?" "+c[2]:"")},cb=function(a,b){return"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)},db=function(a,b){return null==a?b:"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*Number(a.substr(2))+b:parseFloat(a)},eb=function(a,b,c,d){var e,f,g,h,i=1e-6;return null==a?h=b:"number"==typeof a?h=a:(e=360,f=a.split("_"),g=Number(f[0].replace(s,""))*(-1===a.indexOf("rad")?1:H)-("="===a.charAt(1)?0:b),f.length&&(d&&(d[c]=b+g),-1!==a.indexOf("short")&&(g%=e,g!==g%(e/2)&&(g=0>g?g+e:g-e)),-1!==a.indexOf("_cw")&&0>g?g=(g+9999999999*e)%e-(g/e|0)*e:-1!==a.indexOf("ccw")&&g>0&&(g=(g-9999999999*e)%e-(g/e|0)*e)),h=b+g),i>h&&h>-i&&(h=0),h},fb={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},gb=function(a,b,c){return a=0>a?a+1:a>1?a-1:a,255*(1>6*a?b+(c-b)*a*6:.5>a?c:2>3*a?b+(c-b)*(2/3-a)*6:b)+.5|0},hb=function(a){var b,c,d,e,f,g;return a&&""!==a?"number"==typeof a?[a>>16,a>>8&255,255&a]:(","===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),fb[a]?fb[a]:"#"===a.charAt(0)?(4===a.length&&(b=a.charAt(1),c=a.charAt(2),d=a.charAt(3),a="#"+b+b+c+c+d+d),a=parseInt(a.substr(1),16),[a>>16,a>>8&255,255&a]):"hsl"===a.substr(0,3)?(a=a.match(p),e=Number(a[0])%360/360,f=Number(a[1])/100,g=Number(a[2])/100,c=.5>=g?g*(f+1):g+f-g*f,b=2*g-c,a.length>3&&(a[3]=Number(a[3])),a[0]=gb(e+1/3,b,c),a[1]=gb(e,b,c),a[2]=gb(e-1/3,b,c),a):(a=a.match(p)||fb.transparent,a[0]=Number(a[0]),a[1]=Number(a[1]),a[2]=Number(a[2]),a.length>3&&(a[3]=Number(a[3])),a)):fb.black},ib="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(i in fb)ib+="|"+i+"\\b";ib=new RegExp(ib+")","gi");var jb=function(a,b,c,d){if(null==a)return function(a){return a};var e,f=b?(a.match(ib)||[""])[0]:"",g=a.split(f).join("").match(r)||[],h=a.substr(0,a.indexOf(g[0])),i=")"===a.charAt(a.length-1)?")":"",j=-1!==a.indexOf(" ")?" ":",",k=g.length,l=k>0?g[0].replace(p,""):"";return k?e=b?function(a){var b,m,n,o;if("number"==typeof a)a+=l;
else if(d&&F.test(a)){for(o=a.replace(F,"|").split("|"),n=0;n<o.length;n++)o[n]=e(o[n]);return o.join(",")}if(b=(a.match(ib)||[f])[0],m=a.split(b).join("").match(r)||[],n=m.length,k>n--)for(;++n<k;)m[n]=c?m[(n-1)/2|0]:g[n];return h+m.join(j)+j+b+i+(-1!==a.indexOf("inset")?" inset":"")}:function(a){var b,f,m;if("number"==typeof a)a+=l;else if(d&&F.test(a)){for(f=a.replace(F,"|").split("|"),m=0;m<f.length;m++)f[m]=e(f[m]);return f.join(",")}if(b=a.match(r)||[],m=b.length,k>m--)for(;++m<k;)b[m]=c?b[(m-1)/2|0]:g[m];return h+b.join(j)+i}:function(a){return a}},kb=function(a){return a=a.split(","),function(b,c,d,e,f,g,h){var i,j=(c+"").split(" ");for(h={},i=0;4>i;i++)h[a[i]]=j[i]=j[i]||j[(i-1)/2>>0];return e.parse(b,h,f,g)}},lb=(M._setPluginRatio=function(a){this.plugin.setRatio(a);for(var b,c,d,e,f=this.data,g=f.proxy,h=f.firstMPT,i=1e-6;h;)b=g[h.v],h.r?b=Math.round(b):i>b&&b>-i&&(b=0),h.t[h.p]=b,h=h._next;if(f.autoRotate&&(f.autoRotate.rotation=g.rotation),1===a)for(h=f.firstMPT;h;){if(c=h.t,c.type){if(1===c.type){for(e=c.xs0+c.s+c.xs1,d=1;d<c.l;d++)e+=c["xn"+d]+c["xs"+(d+1)];c.e=e}}else c.e=c.s+c.xs0;h=h._next}},function(a,b,c,d,e){this.t=a,this.p=b,this.v=c,this.r=e,d&&(d._prev=this,this._next=d)}),mb=(M._parseToProxy=function(a,b,c,d,e,f){var g,h,i,j,k,l=d,m={},n={},o=c._transform,p=I;for(c._transform=null,I=b,d=k=c.parse(a,b,d,e),I=p,f&&(c._transform=o,l&&(l._prev=null,l._prev&&(l._prev._next=null)));d&&d!==l;){if(d.type<=1&&(h=d.p,n[h]=d.s+d.c,m[h]=d.s,f||(j=new lb(d,"s",h,j,d.r),d.c=0),1===d.type))for(g=d.l;--g>0;)i="xn"+g,h=d.p+"_"+i,n[h]=d.data[i],m[h]=d[i],f||(j=new lb(d,i,h,j,d.rxp[i]));d=d._next}return{proxy:m,end:n,firstMPT:j,pt:k}},M.CSSPropTween=function(a,b,d,e,g,h,i,j,k,l,m){this.t=a,this.p=b,this.s=d,this.c=e,this.n=i||b,a instanceof mb||f.push(this.n),this.r=j,this.type=h||0,k&&(this.pr=k,c=!0),this.b=void 0===l?d:l,this.e=void 0===m?d+e:m,g&&(this._next=g,g._prev=this)}),nb=g.parseComplex=function(a,b,c,d,e,f,g,h,i,k){c=c||f||"",g=new mb(a,b,0,0,g,k?2:1,null,!1,h,c,d),d+="";var l,m,n,o,r,s,t,u,v,w,y,z,A=c.split(", ").join(",").split(" "),B=d.split(", ").join(",").split(" "),C=A.length,D=j!==!1;for((-1!==d.indexOf(",")||-1!==c.indexOf(","))&&(A=A.join(" ").replace(F,", ").split(" "),B=B.join(" ").replace(F,", ").split(" "),C=A.length),C!==B.length&&(A=(f||"").split(" "),C=A.length),g.plugin=i,g.setRatio=k,l=0;C>l;l++)if(o=A[l],r=B[l],u=parseFloat(o),u||0===u)g.appendXtra("",u,cb(r,u),r.replace(q,""),D&&-1!==r.indexOf("px"),!0);else if(e&&("#"===o.charAt(0)||fb[o]||x.test(o)))z=","===r.charAt(r.length-1)?"),":")",o=hb(o),r=hb(r),v=o.length+r.length>6,v&&!O&&0===r[3]?(g["xs"+g.l]+=g.l?" transparent":"transparent",g.e=g.e.split(B[l]).join("transparent")):(O||(v=!1),g.appendXtra(v?"rgba(":"rgb(",o[0],r[0]-o[0],",",!0,!0).appendXtra("",o[1],r[1]-o[1],",",!0).appendXtra("",o[2],r[2]-o[2],v?",":z,!0),v&&(o=o.length<4?1:o[3],g.appendXtra("",o,(r.length<4?1:r[3])-o,z,!1)));else if(s=o.match(p)){if(t=r.match(q),!t||t.length!==s.length)return g;for(n=0,m=0;m<s.length;m++)y=s[m],w=o.indexOf(y,n),g.appendXtra(o.substr(n,w-n),Number(y),cb(t[m],y),"",D&&"px"===o.substr(w+y.length,2),0===m),n=w+y.length;g["xs"+g.l]+=o.substr(n)}else g["xs"+g.l]+=g.l?" "+o:o;if(-1!==d.indexOf("=")&&g.data){for(z=g.xs0+g.data.s,l=1;l<g.l;l++)z+=g["xs"+l]+g.data["xn"+l];g.e=z+g["xs"+l]}return g.l||(g.type=-1,g.xs0=g.e),g.xfirst||g},ob=9;for(i=mb.prototype,i.l=i.pr=0;--ob>0;)i["xn"+ob]=0,i["xs"+ob]="";i.xs0="",i._next=i._prev=i.xfirst=i.data=i.plugin=i.setRatio=i.rxp=null,i.appendXtra=function(a,b,c,d,e,f){var g=this,h=g.l;return g["xs"+h]+=f&&h?" "+a:a||"",c||0===h||g.plugin?(g.l++,g.type=g.setRatio?2:1,g["xs"+g.l]=d||"",h>0?(g.data["xn"+h]=b+c,g.rxp["xn"+h]=e,g["xn"+h]=b,g.plugin||(g.xfirst=new mb(g,"xn"+h,b,c,g.xfirst||g,0,g.n,e,g.pr),g.xfirst.xs0=0),g):(g.data={s:b+c},g.rxp={},g.s=b,g.c=c,g.r=e,g)):(g["xs"+h]+=b+(d||""),g)};var pb=function(a,b){b=b||{},this.p=b.prefix?T(a)||a:a,h[a]=h[this.p]=this,this.format=b.formatter||jb(b.defaultValue,b.color,b.collapsible,b.multi),b.parser&&(this.parse=b.parser),this.clrs=b.color,this.multi=b.multi,this.keyword=b.keyword,this.dflt=b.defaultValue,this.pr=b.priority||0},qb=M._registerComplexSpecialProp=function(a,b,c){"object"!=typeof b&&(b={parser:c});var d,e,f=a.split(","),g=b.defaultValue;for(c=c||[g],d=0;d<f.length;d++)b.prefix=0===d&&b.prefix,b.defaultValue=c[d]||g,e=new pb(f[d],b)},rb=function(a){if(!h[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";qb(a,{parser:function(a,c,d,e,f,g,i){var j=(window.GreenSockGlobals||window).com.greensock.plugins[b];return j?(j._cssRegister(),h[d].parse(a,c,d,e,f,g,i)):(Q("Error: "+b+" js file not loaded."),f)}})}};i=pb.prototype,i.parseComplex=function(a,b,c,d,e,f){var g,h,i,j,k,l,m=this.keyword;if(this.multi&&(F.test(c)||F.test(b)?(h=b.replace(F,"|").split("|"),i=c.replace(F,"|").split("|")):m&&(h=[b],i=[c])),i){for(j=i.length>h.length?i.length:h.length,g=0;j>g;g++)b=h[g]=h[g]||this.dflt,c=i[g]=i[g]||this.dflt,m&&(k=b.indexOf(m),l=c.indexOf(m),k!==l&&(c=-1===l?i:h,c[g]+=" "+m));b=h.join(", "),c=i.join(", ")}return nb(a,this.p,b,c,this.clrs,this.dflt,d,this.pr,e,f)},i.parse=function(a,b,c,d,f,g){return this.parseComplex(a.style,this.format(V(a,this.p,e,!1,this.dflt)),this.format(b),f,g)},g.registerSpecialProp=function(a,b,c){qb(a,{parser:function(a,d,e,f,g,h){var i=new mb(a,e,0,0,g,2,e,!1,c);return i.plugin=h,i.setRatio=b(a,d,f._tween,e),i},priority:c})};var sb="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective".split(","),tb=T("transform"),ub=R+"transform",vb=T("transformOrigin"),wb=null!==T("perspective"),xb=M.Transform=function(){this.skewY=0},yb=M.getTransform=function(a,b,c,d){if(a._gsTransform&&c&&!d)return a._gsTransform;var e,f,h,i,j,k,l,m,n,o,p,q,r,s=c?a._gsTransform||new xb:new xb,t=s.scaleX<0,u=2e-5,v=1e5,w=179.99,x=w*G,y=wb?parseFloat(V(a,vb,b,!1,"0 0 0").split(" ")[2])||s.zOrigin||0:0;for(tb?e=V(a,ub,b,!0):a.currentStyle&&(e=a.currentStyle.filter.match(D),e=e&&4===e.length?[e[0].substr(4),Number(e[2].substr(4)),Number(e[1].substr(4)),e[3].substr(4),s.x||0,s.y||0].join(","):""),f=(e||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],h=f.length;--h>-1;)i=Number(f[h]),f[h]=(j=i-(i|=0))?(j*v+(0>j?-.5:.5)|0)/v+i:i;if(16===f.length){var z=f[8],A=f[9],B=f[10],C=f[12],E=f[13],F=f[14];if(s.zOrigin&&(F=-s.zOrigin,C=z*F-f[12],E=A*F-f[13],F=B*F+s.zOrigin-f[14]),!c||d||null==s.rotationX){var I,J,K,L,M,N,O,P=f[0],Q=f[1],R=f[2],S=f[3],T=f[4],U=f[5],W=f[6],X=f[7],Y=f[11],Z=Math.atan2(W,B),$=-x>Z||Z>x;s.rotationX=Z*H,Z&&(L=Math.cos(-Z),M=Math.sin(-Z),I=T*L+z*M,J=U*L+A*M,K=W*L+B*M,z=T*-M+z*L,A=U*-M+A*L,B=W*-M+B*L,Y=X*-M+Y*L,T=I,U=J,W=K),Z=Math.atan2(z,P),s.rotationY=Z*H,Z&&(N=-x>Z||Z>x,L=Math.cos(-Z),M=Math.sin(-Z),I=P*L-z*M,J=Q*L-A*M,K=R*L-B*M,A=Q*M+A*L,B=R*M+B*L,Y=S*M+Y*L,P=I,Q=J,R=K),Z=Math.atan2(Q,U),s.rotation=Z*H,Z&&(O=-x>Z||Z>x,L=Math.cos(-Z),M=Math.sin(-Z),P=P*L+T*M,J=Q*L+U*M,U=Q*-M+U*L,W=R*-M+W*L,Q=J),O&&$?s.rotation=s.rotationX=0:O&&N?s.rotation=s.rotationY=0:N&&$&&(s.rotationY=s.rotationX=0),s.scaleX=(Math.sqrt(P*P+Q*Q)*v+.5|0)/v,s.scaleY=(Math.sqrt(U*U+A*A)*v+.5|0)/v,s.scaleZ=(Math.sqrt(W*W+B*B)*v+.5|0)/v,s.skewX=0,s.perspective=Y?1/(0>Y?-Y:Y):0,s.x=C,s.y=E,s.z=F}}else if(!(wb&&!d&&f.length&&s.x===f[4]&&s.y===f[5]&&(s.rotationX||s.rotationY)||void 0!==s.x&&"none"===V(a,"display",b))){var _=f.length>=6,ab=_?f[0]:1,bb=f[1]||0,cb=f[2]||0,db=_?f[3]:1;s.x=f[4]||0,s.y=f[5]||0,k=Math.sqrt(ab*ab+bb*bb),l=Math.sqrt(db*db+cb*cb),m=ab||bb?Math.atan2(bb,ab)*H:s.rotation||0,n=cb||db?Math.atan2(cb,db)*H+m:s.skewX||0,o=k-Math.abs(s.scaleX||0),p=l-Math.abs(s.scaleY||0),Math.abs(n)>90&&Math.abs(n)<270&&(t?(k*=-1,n+=0>=m?180:-180,m+=0>=m?180:-180):(l*=-1,n+=0>=n?180:-180)),q=(m-s.rotation)%180,r=(n-s.skewX)%180,(void 0===s.skewX||o>u||-u>o||p>u||-u>p||q>-w&&w>q&&q*v|!1||r>-w&&w>r&&r*v|!1)&&(s.scaleX=k,s.scaleY=l,s.rotation=m,s.skewX=n),wb&&(s.rotationX=s.rotationY=s.z=0,s.perspective=parseFloat(g.defaultTransformPerspective)||0,s.scaleZ=1)}s.zOrigin=y;for(h in s)s[h]<u&&s[h]>-u&&(s[h]=0);return c&&(a._gsTransform=s),s},zb=function(a){var b,c,d=this.data,e=-d.rotation*G,f=e+d.skewX*G,g=1e5,h=(Math.cos(e)*d.scaleX*g|0)/g,i=(Math.sin(e)*d.scaleX*g|0)/g,j=(Math.sin(f)*-d.scaleY*g|0)/g,k=(Math.cos(f)*d.scaleY*g|0)/g,l=this.t.style,m=this.t.currentStyle;if(m){c=i,i=-j,j=-c,b=m.filter,l.filter="";var n,p,q=this.t.offsetWidth,r=this.t.offsetHeight,s="absolute"!==m.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+h+", M12="+i+", M21="+j+", M22="+k,w=d.x,x=d.y;if(null!=d.ox&&(n=(d.oxp?q*d.ox*.01:d.ox)-q/2,p=(d.oyp?r*d.oy*.01:d.oy)-r/2,w+=n-(n*h+p*i),x+=p-(n*j+p*k)),s?(n=q/2,p=r/2,v+=", Dx="+(n-(n*h+p*i)+w)+", Dy="+(p-(n*j+p*k)+x)+")"):v+=", sizingMethod='auto expand')",l.filter=-1!==b.indexOf("DXImageTransform.Microsoft.Matrix(")?b.replace(E,v):v+" "+b,(0===a||1===a)&&1===h&&0===i&&0===j&&1===k&&(s&&-1===v.indexOf("Dx=0, Dy=0")||u.test(b)&&100!==parseFloat(RegExp.$1)||-1===b.indexOf("gradient("&&b.indexOf("Alpha"))&&l.removeAttribute("filter")),!s){var y,z,A,B=8>o?1:-1;for(n=d.ieOffsetX||0,p=d.ieOffsetY||0,d.ieOffsetX=Math.round((q-((0>h?-h:h)*q+(0>i?-i:i)*r))/2+w),d.ieOffsetY=Math.round((r-((0>k?-k:k)*r+(0>j?-j:j)*q))/2+x),ob=0;4>ob;ob++)z=_[ob],y=m[z],c=-1!==y.indexOf("px")?parseFloat(y):W(this.t,z,parseFloat(y),y.replace(t,""))||0,A=c!==d[z]?2>ob?-d.ieOffsetX:-d.ieOffsetY:2>ob?n-d.ieOffsetX:p-d.ieOffsetY,l[z]=(d[z]=Math.round(c-A*(0===ob||2===ob?1:B)))+"px"}}},Ab=M.set3DTransformRatio=function(){var a,b,c,d,e,f,g,h,i,j,k,l,n,o,p,q,r,s,t,u,v,w,x,y=this.data,z=this.t.style,A=y.rotation*G,B=y.scaleX,C=y.scaleY,D=y.scaleZ,E=y.perspective;if(m){var F=1e-4;F>B&&B>-F&&(B=D=2e-5),F>C&&C>-F&&(C=D=2e-5),!E||y.z||y.rotationX||y.rotationY||(E=0)}if(A||y.skewX)s=Math.cos(A),t=Math.sin(A),a=s,e=t,y.skewX&&(A-=y.skewX*G,s=Math.cos(A),t=Math.sin(A),"simple"===y.skewType&&(u=Math.tan(y.skewX*G),u=Math.sqrt(1+u*u),s*=u,t*=u)),b=-t,f=s;else{if(!(y.rotationY||y.rotationX||1!==D||E))return void(z[tb]="translate3d("+y.x+"px,"+y.y+"px,"+y.z+"px)"+(1!==B||1!==C?" scale("+B+","+C+")":""));a=f=1,b=e=0}k=1,c=d=g=h=i=j=l=n=o=0,p=E?-1/E:0,q=y.zOrigin,r=1e5,A=y.rotationY*G,A&&(s=Math.cos(A),t=Math.sin(A),i=k*-t,n=p*-t,c=a*t,g=e*t,k*=s,p*=s,a*=s,e*=s),A=y.rotationX*G,A&&(s=Math.cos(A),t=Math.sin(A),u=b*s+c*t,v=f*s+g*t,w=j*s+k*t,x=o*s+p*t,c=b*-t+c*s,g=f*-t+g*s,k=j*-t+k*s,p=o*-t+p*s,b=u,f=v,j=w,o=x),1!==D&&(c*=D,g*=D,k*=D,p*=D),1!==C&&(b*=C,f*=C,j*=C,o*=C),1!==B&&(a*=B,e*=B,i*=B,n*=B),q&&(l-=q,d=c*l,h=g*l,l=k*l+q),d=(u=(d+=y.x)-(d|=0))?(u*r+(0>u?-.5:.5)|0)/r+d:d,h=(u=(h+=y.y)-(h|=0))?(u*r+(0>u?-.5:.5)|0)/r+h:h,l=(u=(l+=y.z)-(l|=0))?(u*r+(0>u?-.5:.5)|0)/r+l:l,z[tb]="matrix3d("+[(a*r|0)/r,(e*r|0)/r,(i*r|0)/r,(n*r|0)/r,(b*r|0)/r,(f*r|0)/r,(j*r|0)/r,(o*r|0)/r,(c*r|0)/r,(g*r|0)/r,(k*r|0)/r,(p*r|0)/r,d,h,l,E?1+-l/E:1].join(",")+")"},Bb=M.set2DTransformRatio=function(a){var b,c,d,e,f,g=this.data,h=this.t,i=h.style;return g.rotationX||g.rotationY||g.z||g.force3D?(this.setRatio=Ab,void Ab.call(this,a)):void(g.rotation||g.skewX?(b=g.rotation*G,c=b-g.skewX*G,d=1e5,e=g.scaleX*d,f=g.scaleY*d,i[tb]="matrix("+(Math.cos(b)*e|0)/d+","+(Math.sin(b)*e|0)/d+","+(Math.sin(c)*-f|0)/d+","+(Math.cos(c)*f|0)/d+","+g.x+","+g.y+")"):i[tb]="matrix("+g.scaleX+",0,0,"+g.scaleY+","+g.x+","+g.y+")")};qb("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType",{parser:function(a,b,c,d,f,h,i){if(d._transform)return f;var j,k,l,m,n,o,p,q=d._transform=yb(a,e,!0,i.parseTransform),r=a.style,s=1e-6,t=sb.length,u=i,v={};if("string"==typeof u.transform&&tb)l=r.cssText,r[tb]=u.transform,r.display="block",j=yb(a,null,!1),r.cssText=l;else if("object"==typeof u){if(j={scaleX:db(null!=u.scaleX?u.scaleX:u.scale,q.scaleX),scaleY:db(null!=u.scaleY?u.scaleY:u.scale,q.scaleY),scaleZ:db(u.scaleZ,q.scaleZ),x:db(u.x,q.x),y:db(u.y,q.y),z:db(u.z,q.z),perspective:db(u.transformPerspective,q.perspective)},p=u.directionalRotation,null!=p)if("object"==typeof p)for(l in p)u[l]=p[l];else u.rotation=p;j.rotation=eb("rotation"in u?u.rotation:"shortRotation"in u?u.shortRotation+"_short":"rotationZ"in u?u.rotationZ:q.rotation,q.rotation,"rotation",v),wb&&(j.rotationX=eb("rotationX"in u?u.rotationX:"shortRotationX"in u?u.shortRotationX+"_short":q.rotationX||0,q.rotationX,"rotationX",v),j.rotationY=eb("rotationY"in u?u.rotationY:"shortRotationY"in u?u.shortRotationY+"_short":q.rotationY||0,q.rotationY,"rotationY",v)),j.skewX=null==u.skewX?q.skewX:eb(u.skewX,q.skewX),j.skewY=null==u.skewY?q.skewY:eb(u.skewY,q.skewY),(k=j.skewY-q.skewY)&&(j.skewX+=k,j.rotation+=k)}for(wb&&null!=u.force3D&&(q.force3D=u.force3D,o=!0),q.skewType=u.skewType||q.skewType||g.defaultSkewType,n=q.force3D||q.z||q.rotationX||q.rotationY||j.z||j.rotationX||j.rotationY||j.perspective,n||null==u.scale||(j.scaleZ=1);--t>-1;)c=sb[t],m=j[c]-q[c],(m>s||-s>m||null!=I[c])&&(o=!0,f=new mb(q,c,q[c],m,f),c in v&&(f.e=v[c]),f.xs0=0,f.plugin=h,d._overwriteProps.push(f.n));return m=u.transformOrigin,(m||wb&&n&&q.zOrigin)&&(tb?(o=!0,c=vb,m=(m||V(a,c,e,!1,"50% 50%"))+"",f=new mb(r,c,0,0,f,-1,"transformOrigin"),f.b=r[c],f.plugin=h,wb?(l=q.zOrigin,m=m.split(" "),q.zOrigin=(m.length>2&&(0===l||"0px"!==m[2])?parseFloat(m[2]):l)||0,f.xs0=f.e=r[c]=m[0]+" "+(m[1]||"50%")+" 0px",f=new mb(q,"zOrigin",0,0,f,-1,f.n),f.b=l,f.xs0=f.e=q.zOrigin):f.xs0=f.e=r[c]=m):bb(m+"",q)),o&&(d._transformType=n||3===this._transformType?3:2),f},prefix:!0}),qb("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),qb("borderRadius",{defaultValue:"0px",parser:function(a,b,c,f,g){b=this.format(b);var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],y=a.style;for(p=parseFloat(a.offsetWidth),q=parseFloat(a.offsetHeight),h=b.split(" "),i=0;i<x.length;i++)this.p.indexOf("border")&&(x[i]=T(x[i])),l=k=V(a,x[i],e,!1,"0px"),-1!==l.indexOf(" ")&&(k=l.split(" "),l=k[0],k=k[1]),m=j=h[i],n=parseFloat(l),s=l.substr((n+"").length),t="="===m.charAt(1),t?(o=parseInt(m.charAt(0)+"1",10),m=m.substr(2),o*=parseFloat(m),r=m.substr((o+"").length-(0>o?1:0))||""):(o=parseFloat(m),r=m.substr((o+"").length)),""===r&&(r=d[c]||s),r!==s&&(u=W(a,"borderLeft",n,s),v=W(a,"borderTop",n,s),"%"===r?(l=u/p*100+"%",k=v/q*100+"%"):"em"===r?(w=W(a,"borderLeft",1,"em"),l=u/w+"em",k=v/w+"em"):(l=u+"px",k=v+"px"),t&&(m=parseFloat(l)+o+r,j=parseFloat(k)+o+r)),g=nb(y,x[i],l+" "+k,m+" "+j,!1,"0px",g);return g},prefix:!0,formatter:jb("0px 0px 0px 0px",!1,!0)}),qb("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,c,d,f,g){var h,i,j,k,l,m,n="background-position",p=e||U(a,null),q=this.format((p?o?p.getPropertyValue(n+"-x")+" "+p.getPropertyValue(n+"-y"):p.getPropertyValue(n):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0"),r=this.format(b);if(-1!==q.indexOf("%")!=(-1!==r.indexOf("%"))&&(m=V(a,"backgroundImage").replace(A,""),m&&"none"!==m)){for(h=q.split(" "),i=r.split(" "),L.setAttribute("src",m),j=2;--j>-1;)q=h[j],k=-1!==q.indexOf("%"),k!==(-1!==i[j].indexOf("%"))&&(l=0===j?a.offsetWidth-L.width:a.offsetHeight-L.height,h[j]=k?parseFloat(q)/100*l+"px":parseFloat(q)/l*100+"%");q=h.join(" ")}return this.parseComplex(a.style,q,r,f,g)},formatter:bb}),qb("backgroundSize",{defaultValue:"0 0",formatter:bb}),qb("perspective",{defaultValue:"0px",prefix:!0}),qb("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),qb("transformStyle",{prefix:!0}),qb("backfaceVisibility",{prefix:!0}),qb("userSelect",{prefix:!0}),qb("margin",{parser:kb("marginTop,marginRight,marginBottom,marginLeft")}),qb("padding",{parser:kb("paddingTop,paddingRight,paddingBottom,paddingLeft")}),qb("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,c,d,f,g){var h,i,j;return 9>o?(i=a.currentStyle,j=8>o?" ":",",h="rect("+i.clipTop+j+i.clipRight+j+i.clipBottom+j+i.clipLeft+")",b=this.format(b).split(",").join(j)):(h=this.format(V(a,this.p,e,!1,this.dflt)),b=this.format(b)),this.parseComplex(a.style,h,b,f,g)}}),qb("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),qb("autoRound,strictUnits",{parser:function(a,b,c,d,e){return e}}),qb("border",{defaultValue:"0px solid #000",parser:function(a,b,c,d,f,g){return this.parseComplex(a.style,this.format(V(a,"borderTopWidth",e,!1,"0px")+" "+V(a,"borderTopStyle",e,!1,"solid")+" "+V(a,"borderTopColor",e,!1,"#000")),this.format(b),f,g)},color:!0,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(ib)||["#000"])[0]}}),qb("borderWidth",{parser:kb("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),qb("float,cssFloat,styleFloat",{parser:function(a,b,c,d,e){var f=a.style,g="cssFloat"in f?"cssFloat":"styleFloat";return new mb(f,g,0,0,e,-1,c,!1,0,f[g],b)}});var Cb=function(a){var b,c=this.t,d=c.filter||V(this.data,"filter"),e=this.s+this.c*a|0;100===e&&(-1===d.indexOf("atrix(")&&-1===d.indexOf("radient(")&&-1===d.indexOf("oader(")?(c.removeAttribute("filter"),b=!V(this.data,"filter")):(c.filter=d.replace(w,""),b=!0)),b||(this.xn1&&(c.filter=d=d||"alpha(opacity="+e+")"),-1===d.indexOf("opacity")?0===e&&this.xn1||(c.filter=d+" alpha(opacity="+e+")"):c.filter=d.replace(u,"opacity="+e))};qb("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,c,d,f,g){var h=parseFloat(V(a,"opacity",e,!1,"1")),i=a.style,j="autoAlpha"===c;return"string"==typeof b&&"="===b.charAt(1)&&(b=("-"===b.charAt(0)?-1:1)*parseFloat(b.substr(2))+h),j&&1===h&&"hidden"===V(a,"visibility",e)&&0!==b&&(h=0),O?f=new mb(i,"opacity",h,b-h,f):(f=new mb(i,"opacity",100*h,100*(b-h),f),f.xn1=j?1:0,i.zoom=1,f.type=2,f.b="alpha(opacity="+f.s+")",f.e="alpha(opacity="+(f.s+f.c)+")",f.data=a,f.plugin=g,f.setRatio=Cb),j&&(f=new mb(i,"visibility",0,0,f,-1,null,!1,0,0!==h?"inherit":"hidden",0===b?"hidden":"inherit"),f.xs0="inherit",d._overwriteProps.push(f.n),d._overwriteProps.push(c)),f}});var Db=function(a,b){b&&(a.removeProperty?("ms"===b.substr(0,2)&&(b="M"+b.substr(1)),a.removeProperty(b.replace(y,"-$1").toLowerCase())):a.removeAttribute(b))},Eb=function(a){if(this.t._gsClassPT=this,1===a||0===a){this.t.className=0===a?this.b:this.e;for(var b=this.data,c=this.t.style;b;)b.v?c[b.p]=b.v:Db(c,b.p),b=b._next;1===a&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.className!==this.e&&(this.t.className=this.e)};qb("className",{parser:function(a,b,d,f,g,h,i){var j,k,l,m,n,o=a.className,p=a.style.cssText;if(g=f._classNamePT=new mb(a,d,0,0,g,2),g.setRatio=Eb,g.pr=-11,c=!0,g.b=o,k=Y(a,e),l=a._gsClassPT){for(m={},n=l.data;n;)m[n.p]=1,n=n._next;l.setRatio(1)}return a._gsClassPT=g,g.e="="!==b.charAt(1)?b:o.replace(new RegExp("\\s*\\b"+b.substr(2)+"\\b"),"")+("+"===b.charAt(0)?" "+b.substr(2):""),f._tween._duration&&(a.className=g.e,j=Z(a,k,Y(a),i,m),a.className=o,g.data=j.firstMPT,a.style.cssText=p,g=g.xfirst=f.parse(a,j.difs,g,h)),g}});var Fb=function(a){if((1===a||0===a)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var b,c,d,e,f=this.t.style,g=h.transform.parse;if("all"===this.e)f.cssText="",e=!0;else for(b=this.e.split(","),d=b.length;--d>-1;)c=b[d],h[c]&&(h[c].parse===g?e=!0:c="transformOrigin"===c?vb:h[c].p),Db(f,c);e&&(Db(f,tb),this.t._gsTransform&&delete this.t._gsTransform)}};for(qb("clearProps",{parser:function(a,b,d,e,f){return f=new mb(a,d,0,0,f,2),f.setRatio=Fb,f.e=b,f.pr=-10,f.data=e._tween,c=!0,f}}),i="bezier,throwProps,physicsProps,physics2D".split(","),ob=i.length;ob--;)rb(i[ob]);i=g.prototype,i._firstPT=null,i._onInitTween=function(a,b,h){if(!a.nodeType)return!1;this._target=a,this._tween=h,this._vars=b,j=b.autoRound,c=!1,d=b.suffixMap||g.suffixMap,e=U(a,""),f=this._overwriteProps;var i,m,o,p,q,r,s,t,u,w=a.style;if(k&&""===w.zIndex&&(i=V(a,"zIndex",e),("auto"===i||""===i)&&(w.zIndex=0)),"string"==typeof b&&(p=w.cssText,i=Y(a,e),w.cssText=p+";"+b,i=Z(a,i,Y(a)).difs,!O&&v.test(b)&&(i.opacity=parseFloat(RegExp.$1)),b=i,w.cssText=p),this._firstPT=m=this.parse(a,b,null),this._transformType){for(u=3===this._transformType,tb?l&&(k=!0,""===w.zIndex&&(s=V(a,"zIndex",e),("auto"===s||""===s)&&(w.zIndex=0)),n&&(w.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(u?"visible":"hidden"))):w.zoom=1,o=m;o&&o._next;)o=o._next;t=new mb(a,"transform",0,0,null,2),this._linkCSSP(t,null,o),t.setRatio=u&&wb?Ab:tb?Bb:zb,t.data=this._transform||yb(a,e,!0),f.pop()}if(c){for(;m;){for(r=m._next,o=p;o&&o.pr>m.pr;)o=o._next;(m._prev=o?o._prev:q)?m._prev._next=m:p=m,(m._next=o)?o._prev=m:q=m,m=r}this._firstPT=p}return!0},i.parse=function(a,b,c,f){var g,i,k,l,m,n,o,p,q,r,s=a.style;for(g in b)n=b[g],i=h[g],i?c=i.parse(a,n,g,this,c,f,b):(m=V(a,g,e)+"",q="string"==typeof n,"color"===g||"fill"===g||"stroke"===g||-1!==g.indexOf("Color")||q&&x.test(n)?(q||(n=hb(n),n=(n.length>3?"rgba(":"rgb(")+n.join(",")+")"),c=nb(s,g,m,n,!0,"transparent",c,0,f)):!q||-1===n.indexOf(" ")&&-1===n.indexOf(",")?(k=parseFloat(m),o=k||0===k?m.substr((k+"").length):"",(""===m||"auto"===m)&&("width"===g||"height"===g?(k=ab(a,g,e),o="px"):"left"===g||"top"===g?(k=X(a,g,e),o="px"):(k="opacity"!==g?0:1,o="")),r=q&&"="===n.charAt(1),r?(l=parseInt(n.charAt(0)+"1",10),n=n.substr(2),l*=parseFloat(n),p=n.replace(t,"")):(l=parseFloat(n),p=q?n.substr((l+"").length)||"":""),""===p&&(p=g in d?d[g]:o),n=l||0===l?(r?l+k:l)+p:b[g],o!==p&&""!==p&&(l||0===l)&&k&&(k=W(a,g,k,o),"%"===p?(k/=W(a,g,100,"%")/100,b.strictUnits!==!0&&(m=k+"%")):"em"===p?k/=W(a,g,1,"em"):"px"!==p&&(l=W(a,g,l,p),p="px"),r&&(l||0===l)&&(n=l+k+p)),r&&(l+=k),!k&&0!==k||!l&&0!==l?void 0!==s[g]&&(n||n+""!="NaN"&&null!=n)?(c=new mb(s,g,l||k||0,0,c,-1,g,!1,0,m,n),c.xs0="none"!==n||"display"!==g&&-1===g.indexOf("Style")?n:m):Q("invalid "+g+" tween value: "+b[g]):(c=new mb(s,g,k,l-k,c,0,g,j!==!1&&("px"===p||"zIndex"===g),0,m,n),c.xs0=p)):c=nb(s,g,m,n,!0,null,c,0,f)),f&&c&&!c.plugin&&(c.plugin=f);return c},i.setRatio=function(a){var b,c,d,e=this._firstPT,f=1e-6;if(1!==a||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(a||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;e;){if(b=e.c*a+e.s,e.r?b=Math.round(b):f>b&&b>-f&&(b=0),e.type)if(1===e.type)if(d=e.l,2===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2;else if(3===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3;else if(4===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4;else if(5===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4+e.xn4+e.xs5;else{for(c=e.xs0+b+e.xs1,d=1;d<e.l;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}else-1===e.type?e.t[e.p]=e.xs0:e.setRatio&&e.setRatio(a);else e.t[e.p]=b+e.xs0;e=e._next}else for(;e;)2!==e.type?e.t[e.p]=e.b:e.setRatio(a),e=e._next;else for(;e;)2!==e.type?e.t[e.p]=e.e:e.setRatio(a),e=e._next},i._enableTransforms=function(a){this._transformType=a||3===this._transformType?3:2,this._transform=this._transform||yb(this._target,e,!0)},i._linkCSSP=function(a,b,c,d){return a&&(b&&(b._prev=a),a._next&&(a._next._prev=a._prev),a._prev?a._prev._next=a._next:this._firstPT===a&&(this._firstPT=a._next,d=!0),c?c._next=a:d||null!==this._firstPT||(this._firstPT=a),a._next=b,a._prev=c),a},i._kill=function(b){var c,d,e,f=b;if(b.autoAlpha||b.alpha){f={};for(d in b)f[d]=b[d];f.opacity=1,f.autoAlpha&&(f.visibility=1)}return b.className&&(c=this._classNamePT)&&(e=c.xfirst,e&&e._prev?this._linkCSSP(e._prev,c._next,e._prev._prev):e===this._firstPT&&(this._firstPT=c._next),c._next&&this._linkCSSP(c._next,c._next._next,e._prev),this._classNamePT=null),a.prototype._kill.call(this,f)};var Gb=function(a,b,c){var d,e,f,g;if(a.slice)for(e=a.length;--e>-1;)Gb(a[e],b,c);else for(d=a.childNodes,e=d.length;--e>-1;)f=d[e],g=f.type,f.style&&(b.push(Y(f)),c&&c.push(f)),1!==g&&9!==g&&11!==g||!f.childNodes.length||Gb(f,b,c)};return g.cascadeTo=function(a,c,d){var e,f,g,h=b.to(a,c,d),i=[h],j=[],k=[],l=[],m=b._internals.reservedProps;for(a=h._targets||h.target,Gb(a,j,l),h.render(c,!0),Gb(a,k),h.render(0,!0),h._enabled(!0),e=l.length;--e>-1;)if(f=Z(l[e],j[e],k[e]),f.firstMPT){f=f.difs;for(g in d)m[g]&&(f[g]=d[g]);i.push(b.to(l[e],c,f))}return i},a.activate([g]),g},!0),function(){var a=window._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(a,b,c){return this._tween=c,!0}}),b=a.prototype;b._onInitAllProps=function(){for(var a,b,c,d=this._tween,e=d.vars.roundProps instanceof Array?d.vars.roundProps:d.vars.roundProps.split(","),f=e.length,g={},h=d._propLookup.roundProps;--f>-1;)g[e[f]]=1;for(f=e.length;--f>-1;)for(a=e[f],b=d._firstPT;b;)c=b._next,b.pg?b.t._roundProps(g,!0):b.n===a&&(this._add(b.t,a,b.s,b.c),c&&(c._prev=b._prev),b._prev?b._prev._next=c:d._firstPT===b&&(d._firstPT=c),b._next=b._prev=null,d._propLookup[a]=h),b=c;return!1},b._add=function(a,b,c,d){this._addTween(a,b,c,c+d,b,!0),this._overwriteProps.push(b)}}(),window._gsDefine.plugin({propName:"attr",API:2,version:"0.3.0",init:function(a,b,c){var d,e,f;if("function"!=typeof a.setAttribute)return!1;this._target=a,this._proxy={},this._start={},this._end={},this._endRatio=c.vars.runBackwards?0:1;for(d in b)this._start[d]=this._proxy[d]=e=a.getAttribute(d),this._end[d]=f=b[d],this._addTween(this._proxy,d,parseFloat(e),f,d),this._overwriteProps.push(d);return!0},set:function(a){this._super.setRatio.call(this,a);for(var b,c=this._overwriteProps,d=c.length,e=0!==a&&1!==a?this._proxy:a===this._endRatio?this._end:this._start;--d>-1;)b=c[d],this._target.setAttribute(b,e[b]+"")}}),window._gsDefine.plugin({propName:"directionalRotation",API:2,version:"0.2.0",init:function(a,b){"object"!=typeof b&&(b={rotation:b}),this.finals={};var c,d,e,f,g,h,i=b.useRadians===!0?2*Math.PI:360,j=1e-6;for(c in b)"useRadians"!==c&&(h=(b[c]+"").split("_"),d=h[0],e=parseFloat("function"!=typeof a[c]?a[c]:a[c.indexOf("set")||"function"!=typeof a["get"+c.substr(3)]?c:"get"+c.substr(3)]()),f=this.finals[c]="string"==typeof d&&"="===d.charAt(1)?e+parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)):Number(d)||0,g=f-e,h.length&&(d=h.join("_"),-1!==d.indexOf("short")&&(g%=i,g!==g%(i/2)&&(g=0>g?g+i:g-i)),-1!==d.indexOf("_cw")&&0>g?g=(g+9999999999*i)%i-(g/i|0)*i:-1!==d.indexOf("ccw")&&g>0&&(g=(g-9999999999*i)%i-(g/i|0)*i)),(g>j||-j>g)&&(this._addTween(a,c,e,e+g,c),this._overwriteProps.push(c)));return!0},set:function(a){var b;if(1!==a)this._super.setRatio.call(this,a);else for(b=this._firstPT;b;)b.f?b.t[b.p](this.finals[b.p]):b.t[b.p]=this.finals[b.p],b=b._next}})._autoCSS=!0,window._gsDefine("easing.Back",["easing.Ease"],function(a){var b,c,d,e=window.GreenSockGlobals||window,f=e.com.greensock,g=2*Math.PI,h=Math.PI/2,i=f._class,j=function(b,c){var d=i("easing."+b,function(){},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,d},k=a.register||function(){},l=function(a,b,c,d){var e=i("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return k(e,a),e},m=function(a,b,c){this.t=a,this.v=b,c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},n=function(b,c){var d=i("easing."+b,function(a){this._p1=a||0===a?a:1.70158,this._p2=1.525*this._p1},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,e.config=function(a){return new d(a)},d},o=l("Back",n("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),n("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),n("BackInOut",function(a){return(a*=2)<1?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),p=i("easing.SlowMo",function(a,b,c){b=b||0===b?b:.7,null==a?a=.7:a>1&&(a=1),this._p=1!==a?b:0,this._p1=(1-a)/2,this._p2=a,this._p3=this._p1+this._p2,this._calcEnd=c===!0},!0),q=p.prototype=new a;return q.constructor=p,q.getRatio=function(a){var b=a+(.5-a)*this._p;return a<this._p1?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},p.ease=new p(.7,.7),q.config=p.config=function(a,b,c){return new p(a,b,c)},b=i("easing.SteppedEase",function(a){a=a||1,this._p1=1/a,this._p2=a+1},!0),q=b.prototype=new a,q.constructor=b,q.getRatio=function(a){return 0>a?a=0:a>=1&&(a=.999999999),(this._p2*a>>0)*this._p1},q.config=b.config=function(a){return new b(a)},c=i("easing.RoughEase",function(b){b=b||{};for(var c,d,e,f,g,h,i=b.taper||"none",j=[],k=0,l=0|(b.points||20),n=l,o=b.randomize!==!1,p=b.clamp===!0,q=b.template instanceof a?b.template:null,r="number"==typeof b.strength?.4*b.strength:.4;--n>-1;)c=o?Math.random():1/l*n,d=q?q.getRatio(c):c,"none"===i?e=r:"out"===i?(f=1-c,e=f*f*r):"in"===i?e=c*c*r:.5>c?(f=2*c,e=f*f*.5*r):(f=2*(1-c),e=f*f*.5*r),o?d+=Math.random()*e-.5*e:n%2?d+=.5*e:d-=.5*e,p&&(d>1?d=1:0>d&&(d=0)),j[k++]={x:c,y:d};for(j.sort(function(a,b){return a.x-b.x}),h=new m(1,1,null),n=l;--n>-1;)g=j[n],h=new m(g.x,g.y,h);this._prev=new m(0,0,0!==h.t?h:h.next)},!0),q=c.prototype=new a,q.constructor=c,q.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&a<=b.t;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},q.config=function(a){return new c(a)},c.ease=new c,l("Bounce",j("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),j("BounceIn",function(a){return(a=1-a)<1/2.75?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),j("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,b?.5*(1-a):.5*a+.5})),l("Circ",j("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),j("CircIn",function(a){return-(Math.sqrt(1-a*a)-1)}),j("CircInOut",function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),d=function(b,c,d){var e=i("easing."+b,function(a,b){this._p1=a||1,this._p2=b||d,this._p3=this._p2/g*(Math.asin(1/this._p1)||0)},!0),f=e.prototype=new a;return f.constructor=e,f.getRatio=c,f.config=function(a,b){return new e(a,b)},e},l("Elastic",d("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*g/this._p2)+1},.3),d("ElasticIn",function(a){return-(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2))},.3),d("ElasticInOut",function(a){return(a*=2)<1?-.5*this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2):this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*g/this._p2)*.5+1},.45)),l("Expo",j("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),j("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),j("ExpoInOut",function(a){return(a*=2)<1?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),l("Sine",j("SineOut",function(a){return Math.sin(a*h)}),j("SineIn",function(a){return-Math.cos(a*h)+1}),j("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),i("easing.EaseLookup",{find:function(b){return a.map[b]}},!0),k(e.SlowMo,"SlowMo","ease,"),k(c,"RoughEase","ease,"),k(b,"SteppedEase","ease,"),o},!0)}),function(a){"use strict";var b=a.GreenSockGlobals||a;if(!b.TweenLite){var c,d,e,f,g,h=function(a){var c,d=a.split("."),e=b;for(c=0;c<d.length;c++)e[d[c]]=e=e[d[c]]||{};return e},i=h("com.greensock"),j=1e-10,k=[].slice,l=function(){},m=function(){var a=Object.prototype.toString,b=a.call([]);return function(c){return null!=c&&(c instanceof Array||"object"==typeof c&&!!c.push&&a.call(c)===b)}}(),n={},o=function(c,d,e,f){this.sc=n[c]?n[c].sc:[],n[c]=this,this.gsClass=null,this.func=e;var g=[];this.check=function(i){for(var j,k,l,m,p=d.length,q=p;--p>-1;)(j=n[d[p]]||new o(d[p],[])).gsClass?(g[p]=j.gsClass,q--):i&&j.sc.push(this);if(0===q&&e)for(k=("com.greensock."+c).split("."),l=k.pop(),m=h(k.join("."))[l]=this.gsClass=e.apply(e,g),f&&(b[l]=m,"function"==typeof define&&define.amd?define((a.GreenSockAMDPath?a.GreenSockAMDPath+"/":"")+c.split(".").join("/"),[],function(){return m}):"undefined"!=typeof module&&module.exports&&(module.exports=m)),p=0;p<this.sc.length;p++)this.sc[p].check()
},this.check(!0)},p=a._gsDefine=function(a,b,c,d){return new o(a,b,c,d)},q=i._class=function(a,b,c){return b=b||function(){},p(a,[],function(){return b},c),b};p.globals=b;var r=[0,0,1,1],s=[],t=q("easing.Ease",function(a,b,c,d){this._func=a,this._type=c||0,this._power=d||0,this._params=b?r.concat(b):r},!0),u=t.map={},v=t.register=function(a,b,c,d){for(var e,f,g,h,j=b.split(","),k=j.length,l=(c||"easeIn,easeOut,easeInOut").split(",");--k>-1;)for(f=j[k],e=d?q("easing."+f,null,!0):i.easing[f]||{},g=l.length;--g>-1;)h=l[g],u[f+"."+h]=u[h+f]=e[h]=a.getRatio?a:a[h]||new a};for(e=t.prototype,e._calcEnd=!1,e.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:.5>a?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:.5>a?d/2:1-d/2},c=["Linear","Quad","Cubic","Quart","Quint,Strong"],d=c.length;--d>-1;)e=c[d]+",Power"+d,v(new t(null,null,1,d),e,"easeOut",!0),v(new t(null,null,2,d),e,"easeIn"+(0===d?",easeNone":"")),v(new t(null,null,3,d),e,"easeInOut");u.linear=i.easing.Linear.easeIn,u.swing=i.easing.Quad.easeInOut;var w=q("events.EventDispatcher",function(a){this._listeners={},this._eventTarget=a||this});e=w.prototype,e.addEventListener=function(a,b,c,d,e){e=e||0;var h,i,j=this._listeners[a],k=0;for(null==j&&(this._listeners[a]=j=[]),i=j.length;--i>-1;)h=j[i],h.c===b&&h.s===c?j.splice(i,1):0===k&&h.pr<e&&(k=i+1);j.splice(k,0,{c:b,s:c,up:d,pr:e}),this!==f||g||f.wake()},e.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;--c>-1;)if(d[c].c===b)return void d.splice(c,1)},e.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,c=this._eventTarget;--b>-1;)d=e[b],d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c)};var x=a.requestAnimationFrame,y=a.cancelAnimationFrame,z=Date.now||function(){return(new Date).getTime()},A=z();for(c=["ms","moz","webkit","o"],d=c.length;--d>-1&&!x;)x=a[c[d]+"RequestAnimationFrame"],y=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];q("Ticker",function(a,b){var c,d,e,h,i,j=this,k=z(),m=b!==!1&&x,n=function(a){A=z(),j.time=(A-k)/1e3;var b,f=j.time-i;(!c||f>0||a===!0)&&(j.frame++,i+=f+(f>=h?.004:h-f),b=!0),a!==!0&&(e=d(n)),b&&j.dispatchEvent("tick")};w.call(j),j.time=j.frame=0,j.tick=function(){n(!0)},j.sleep=function(){null!=e&&(m&&y?y(e):clearTimeout(e),d=l,e=null,j===f&&(g=!1))},j.wake=function(){null!==e&&j.sleep(),d=0===c?l:m&&x?x:function(a){return setTimeout(a,1e3*(i-j.time)+1|0)},j===f&&(g=!0),n(2)},j.fps=function(a){return arguments.length?(c=a,h=1/(c||60),i=this.time+h,void j.wake()):c},j.useRAF=function(a){return arguments.length?(j.sleep(),m=a,void j.fps(c)):m},j.fps(a),setTimeout(function(){m&&(!e||j.frame<5)&&j.useRAF(!1)},1500)}),e=i.Ticker.prototype=new i.events.EventDispatcher,e.constructor=i.Ticker;var B=q("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=b.immediateRender===!0,this.data=b.data,this._reversed=b.reversed===!0,O){g||f.wake();var c=this.vars.useFrames?N:O;c.add(this,c._time),this.vars.paused&&this.paused(!0)}});f=B.ticker=new i.Ticker,e=B.prototype,e._dirty=e._gc=e._initted=e._paused=!1,e._totalTime=e._time=0,e._rawPrevTime=-1,e._next=e._last=e._onUpdate=e._timeline=e.timeline=null,e._paused=!1;var C=function(){g&&z()-A>2e3&&f.wake(),setTimeout(C,2e3)};C(),e.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)},e.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)},e.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)},e.seek=function(a,b){return this.totalTime(Number(a),b!==!1)},e.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,b!==!1,!0)},e.reverse=function(a,b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)},e.render=function(){},e.invalidate=function(){return this},e.isActive=function(){var a,b=this._timeline,c=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime())>=c&&a<c+this.totalDuration()/this._timeScale},e._enabled=function(a,b){return g||f.wake(),this._gc=!a,this._active=this.isActive(),b!==!0&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1},e._kill=function(){return this._enabled(!1,!1)},e.kill=function(a,b){return this._kill(a,b),this},e._uncache=function(a){for(var b=a?this:this.timeline;b;)b._dirty=!0,b=b.timeline;return this},e._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();--b>-1;)"{self}"===a[b]&&(c[b]=this);return c},e.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:(e[a]=b,e[a+"Params"]=m(c)&&-1!==c.join("").indexOf("{self}")?this._swapSelfInParams(c):c,e[a+"Scope"]=d),"onUpdate"===a&&(this._onUpdate=b)}return this},e.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay},e.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==a&&this.totalTime(this._totalTime*(a/this._duration),!0),this):(this._dirty=!1,this._duration)},e.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration},e.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time},e.totalTime=function(a,b,c){if(g||f.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var d=this._totalDuration,e=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:e._time)-(this._reversed?d-a:a)/this._timeScale,e._dirty||this._uncache(!1),e._timeline)for(;e._timeline;)e._timeline._time!==(e._startTime+e._totalTime)/e._timeScale&&e.totalTime(e._totalTime,!0),e=e._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==a||0===this._duration)&&this.render(a,b,!1)}return this},e.progress=e.totalProgress=function(a,b){return arguments.length?this.totalTime(this.duration()*a,b):this._time/this.duration()},e.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime},e.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||j,this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,c=b||0===b?b:this._timeline.totalTime();this._startTime=c-(c-this._startTime)*this._timeScale/a}return this._timeScale=a,this._uncache(!1)},e.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},e.paused=function(a){if(!arguments.length)return this._paused;if(a!=this._paused&&this._timeline){g||a||f.wake();var b=this._timeline,c=b.rawTime(),d=c-this._pauseTime;!a&&b.smoothChildTiming&&(this._startTime+=d,this._uncache(!1)),this._pauseTime=a?c:null,this._paused=a,this._active=this.isActive(),!a&&0!==d&&this._initted&&this.duration()&&this.render(b.smoothChildTiming?this._totalTime:(c-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!a&&this._enabled(!0,!1),this};var D=q("core.SimpleTimeline",function(a){B.call(this,0,a),this.autoRemoveChildren=this.smoothChildTiming=!0});e=D.prototype=new B,e.constructor=D,e.kill()._gc=!1,e._first=e._last=null,e._sortChildren=!1,e.add=e.insert=function(a,b){var c,d;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),c=this._last,this._sortChildren)for(d=a._startTime;c&&c._startTime>d;)c=c._prev;return c?(a._next=c._next,c._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=c,this._timeline&&this._uncache(!0),this},e._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a.timeline=null,a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),this._timeline&&this._uncache(!0)),this},e.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*e._timeScale,b,c)),e=d},e.rawTime=function(){return g||f.wake(),this._totalTime};var E=q("TweenLite",function(b,c,d){if(B.call(this,c,d),this.render=E.prototype.render,null==b)throw"Cannot tween a null target.";this.target=b="string"!=typeof b?b:E.selector(b)||b;var e,f,g,h=b.jquery||b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType),i=this.vars.overwrite;if(this._overwrite=i=null==i?M[E.defaultOverwrite]:"number"==typeof i?i>>0:M[i],(h||b instanceof Array||b.push&&m(b))&&"number"!=typeof b[0])for(this._targets=g=k.call(b,0),this._propLookup=[],this._siblings=[],e=0;e<g.length;e++)f=g[e],f?"string"!=typeof f?f.length&&f!==a&&f[0]&&(f[0]===a||f[0].nodeType&&f[0].style&&!f.nodeType)?(g.splice(e--,1),this._targets=g=g.concat(k.call(f,0))):(this._siblings[e]=P(f,this,!1),1===i&&this._siblings[e].length>1&&Q(f,this,null,1,this._siblings[e])):(f=g[e--]=E.selector(f),"string"==typeof f&&g.splice(e+1,1)):g.splice(e--,1);else this._propLookup={},this._siblings=P(b,this,!1),1===i&&this._siblings.length>1&&Q(b,this,null,1,this._siblings);(this.vars.immediateRender||0===c&&0===this._delay&&this.vars.immediateRender!==!1)&&this.render(-this._delay,!1,!0)},!0),F=function(b){return b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType)},G=function(a,b){var c,d={};for(c in a)L[c]||c in b&&"x"!==c&&"y"!==c&&"width"!==c&&"height"!==c&&"className"!==c&&"border"!==c||!(!I[c]||I[c]&&I[c]._autoCSS)||(d[c]=a[c],delete a[c]);a.css=d};e=E.prototype=new B,e.constructor=E,e.kill()._gc=!1,e.ratio=0,e._firstPT=e._targets=e._overwrittenProps=e._startAt=null,e._notifyPluginsOfEnabled=!1,E.version="1.11.8",E.defaultEase=e._ease=new t(null,null,1,1),E.defaultOverwrite="auto",E.ticker=f,E.autoSleep=!0,E.selector=a.$||a.jQuery||function(b){return a.$?(E.selector=a.$,a.$(b)):a.document?a.document.getElementById("#"===b.charAt(0)?b.substr(1):b):b};var H=E._internals={isArray:m,isSelector:F},I=E._plugins={},J=E._tweenLookup={},K=0,L=H.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},M={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},N=B._rootFramesTimeline=new D,O=B._rootTimeline=new D;O._startTime=f.time,N._startTime=f.frame,O._active=N._active=!0,B._updateRoot=function(){if(O.render((f.time-O._startTime)*O._timeScale,!1,!1),N.render((f.frame-N._startTime)*N._timeScale,!1,!1),!(f.frame%120)){var a,b,c;for(c in J){for(b=J[c].tweens,a=b.length;--a>-1;)b[a]._gc&&b.splice(a,1);0===b.length&&delete J[c]}if(c=O._first,(!c||c._paused)&&E.autoSleep&&!N._first&&1===f._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||f.sleep()}}},f.addEventListener("tick",B._updateRoot);var P=function(a,b,c){var d,e,f=a._gsTweenID;if(J[f||(a._gsTweenID=f="t"+K++)]||(J[f]={target:a,tweens:[]}),b&&(d=J[f].tweens,d[e=d.length]=b,c))for(;--e>-1;)d[e]===b&&d.splice(e,1);return J[f].tweens},Q=function(a,b,c,d,e){var f,g,h,i;if(1===d||d>=4){for(i=e.length,f=0;i>f;f++)if((h=e[f])!==b)h._gc||h._enabled(!1,!1)&&(g=!0);else if(5===d)break;return g}var k,l=b._startTime+j,m=[],n=0,o=0===b._duration;for(f=e.length;--f>-1;)(h=e[f])===b||h._gc||h._paused||(h._timeline!==b._timeline?(k=k||R(b,0,o),0===R(h,k,o)&&(m[n++]=h)):h._startTime<=l&&h._startTime+h.totalDuration()/h._timeScale>l&&((o||!h._initted)&&l-h._startTime<=2e-10||(m[n++]=h)));for(f=n;--f>-1;)h=m[f],2===d&&h._kill(c,a)&&(g=!0),(2!==d||!h._firstPT&&h._initted)&&h._enabled(!1,!1)&&(g=!0);return g},R=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime;d._timeline;){if(f+=d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&2*j>f-b?j:(f+=a.totalDuration()/a._timeScale/e)>b+j?0:f-b-j};e._init=function(){var a,b,c,d,e=this.vars,f=this._overwrittenProps,g=this._duration,h=e.immediateRender,i=e.ease;if(e.startAt){if(this._startAt&&this._startAt.render(-1,!0),e.startAt.overwrite=0,e.startAt.immediateRender=!0,this._startAt=E.to(this.target,0,e.startAt),h)if(this._time>0)this._startAt=null;else if(0!==g)return}else if(e.runBackwards&&0!==g)if(this._startAt)this._startAt.render(-1,!0),this._startAt=null;else{c={};for(d in e)L[d]&&"autoCSS"!==d||(c[d]=e[d]);if(c.overwrite=0,c.data="isFromStart",this._startAt=E.to(this.target,0,c),e.immediateRender){if(0===this._time)return}else this._startAt.render(-1,!0)}if(this._ease=i?i instanceof t?e.easeParams instanceof Array?i.config.apply(i,e.easeParams):i:"function"==typeof i?new t(i,e.easeParams):u[i]||E.defaultEase:E.defaultEase,this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length;--a>-1;)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],f?f[a]:null)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,f);if(b&&E._onPluginEvent("_onInitAllProps",this),f&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),e.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=e.onUpdate,this._initted=!0},e._initProps=function(b,c,d,e){var f,g,h,i,j,k;if(null==b)return!1;this.vars.css||b.style&&b!==a&&b.nodeType&&I.css&&this.vars.autoCSS!==!1&&G(this.vars,b);for(f in this.vars){if(k=this.vars[f],L[f])k&&(k instanceof Array||k.push&&m(k))&&-1!==k.join("").indexOf("{self}")&&(this.vars[f]=k=this._swapSelfInParams(k,this));else if(I[f]&&(i=new I[f])._onInitTween(b,this.vars[f],this)){for(this._firstPT=j={_next:this._firstPT,t:i,p:"setRatio",s:0,c:1,f:!0,n:f,pg:!0,pr:i._priority},g=i._overwriteProps.length;--g>-1;)c[i._overwriteProps[g]]=this._firstPT;(i._priority||i._onInitAllProps)&&(h=!0),(i._onDisable||i._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=c[f]=j={_next:this._firstPT,t:b,p:f,f:"function"==typeof b[f],n:f,pg:!1,pr:0},j.s=j.f?b[f.indexOf("set")||"function"!=typeof b["get"+f.substr(3)]?f:"get"+f.substr(3)]():parseFloat(b[f]),j.c="string"==typeof k&&"="===k.charAt(1)?parseInt(k.charAt(0)+"1",10)*Number(k.substr(2)):Number(k)-j.s||0;j&&j._next&&(j._next._prev=j)}return e&&this._kill(e,b)?this._initProps(b,c,d,e):this._overwrite>1&&this._firstPT&&d.length>1&&Q(b,this,c,this._overwrite,d)?(this._kill(c,b),this._initProps(b,c,d,e)):h},e.render=function(a,b,c){var d,e,f,g,h=this._time,i=this._duration;if(a>=i)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete"),0===i&&(g=this._rawPrevTime,this._startTime===this._timeline._duration&&(a=0),(0===a||0>g||g===j)&&g!==a&&(c=!0,g>j&&(e="onReverseComplete")),this._rawPrevTime=g=!b||a||this._rawPrevTime===a?a:j);else if(1e-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==h||0===i&&this._rawPrevTime>0&&this._rawPrevTime!==j)&&(e="onReverseComplete",d=this._reversed),0>a?(this._active=!1,0===i&&(this._rawPrevTime>=0&&(c=!0),this._rawPrevTime=g=!b||a||this._rawPrevTime===a?a:j)):this._initted||(c=!0);else if(this._totalTime=this._time=a,this._easeType){var k=a/i,l=this._easeType,m=this._easePower;(1===l||3===l&&k>=.5)&&(k=1-k),3===l&&(k*=2),1===m?k*=k:2===m?k*=k*k:3===m?k*=k*k*k:4===m&&(k*=k*k*k*k),this.ratio=1===l?1-k:2===l?k:.5>a/i?k/2:1-k/2}else this.ratio=this._ease.getRatio(a/i);if(this._time!==h||c){if(!this._initted){if(this._init(),!this._initted||this._gc)return;this._time&&!d?this.ratio=this._ease.getRatio(this._time/i):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==h&&a>=0&&(this._active=!0),0===h&&(this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._time||0===i)&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||s))),f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,c),b||(this._time!==h||d)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s)),e&&(this._gc||(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||s),0===i&&this._rawPrevTime===j&&g!==j&&(this._rawPrevTime=0)))}},e._kill=function(a,b){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:E.selector(b)||b;var c,d,e,f,g,h,i,j;if((m(b)||F(b))&&"number"!=typeof b[0])for(c=b.length;--c>-1;)this._kill(a,b[c])&&(h=!0);else{if(this._targets){for(c=this._targets.length;--c>-1;)if(b===this._targets[c]){g=this._propLookup[c]||{},this._overwrittenProps=this._overwrittenProps||[],d=this._overwrittenProps[c]=a?this._overwrittenProps[c]||{}:"all";break}}else{if(b!==this.target)return!1;g=this._propLookup,d=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(g){i=a||g,j=a!==d&&"all"!==d&&a!==g&&("object"!=typeof a||!a._tempKill);for(e in i)(f=g[e])&&(f.pg&&f.t._kill(i)&&(h=!0),f.pg&&0!==f.t._overwriteProps.length||(f._prev?f._prev._next=f._next:f===this._firstPT&&(this._firstPT=f._next),f._next&&(f._next._prev=f._prev),f._next=f._prev=null),delete g[e]),j&&(d[e]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},e.invalidate=function(){return this._notifyPluginsOfEnabled&&E._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=!1,this._propLookup=this._targets?{}:[],this},e._enabled=function(a,b){if(g||f.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;--c>-1;)this._siblings[c]=P(d[c],this,!0);else this._siblings=P(this.target,this,!0)}return B.prototype._enabled.call(this,a,b),this._notifyPluginsOfEnabled&&this._firstPT?E._onPluginEvent(a?"_onEnable":"_onDisable",this):!1},E.to=function(a,b,c){return new E(a,b,c)},E.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new E(a,b,c)},E.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new E(a,b,d)},E.delayedCall=function(a,b,c,d,e){return new E(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:e,overwrite:0})},E.set=function(a,b){return new E(a,0,b)},E.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:E.selector(a)||a;var c,d,e,f;if((m(a)||F(a))&&"number"!=typeof a[0]){for(c=a.length,d=[];--c>-1;)d=d.concat(E.getTweensOf(a[c],b));for(c=d.length;--c>-1;)for(f=d[c],e=c;--e>-1;)f===d[e]&&d.splice(c,1)}else for(d=P(a).concat(),c=d.length;--c>-1;)(d[c]._gc||b&&!d[c].isActive())&&d.splice(c,1);return d},E.killTweensOf=E.killDelayedCallsTo=function(a,b,c){"object"==typeof b&&(c=b,b=!1);for(var d=E.getTweensOf(a,b),e=d.length;--e>-1;)d[e]._kill(c,a)};var S=q("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(","),this._propName=this._overwriteProps[0],this._priority=b||0,this._super=S.prototype},!0);if(e=S.prototype,S.version="1.10.1",S.API=2,e._firstPT=null,e._addTween=function(a,b,c,d,e,f){var g,h;return null!=d&&(g="number"==typeof d||"="!==d.charAt(1)?Number(d)-c:parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)))?(this._firstPT=h={_next:this._firstPT,t:a,p:b,s:c,c:g,f:"function"==typeof a[b],n:e||b,r:f},h._next&&(h._next._prev=h),h):void 0},e.setRatio=function(a){for(var b,c=this._firstPT,d=1e-6;c;)b=c.c*a+c.s,c.r?b=Math.round(b):d>b&&b>-d&&(b=0),c.f?c.t[c.p](b):c.t[c.p]=b,c=c._next},e._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;--b>-1;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},e._roundProps=function(a,b){for(var c=this._firstPT;c;)(a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")])&&(c.r=b),c=c._next},E._onPluginEvent=function(a,b){var c,d,e,f,g,h=b._firstPT;if("_onInitAllProps"===a){for(;h;){for(g=h._next,d=e;d&&d.pr>h.pr;)d=d._next;(h._prev=d?d._prev:f)?h._prev._next=h:e=h,(h._next=d)?d._prev=h:f=h,h=g}h=b._firstPT=e}for(;h;)h.pg&&"function"==typeof h.t[a]&&h.t[a]()&&(c=!0),h=h._next;return c},S.activate=function(a){for(var b=a.length;--b>-1;)a[b].API===S.API&&(I[(new a[b])._propName]=a[b]);return!0},p.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},g=q("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){S.call(this,c,d),this._overwriteProps=e||[]},a.global===!0),h=g.prototype=new S(c);h.constructor=g,g.API=a.API;for(b in f)"function"==typeof a[b]&&(h[f[b]]=a[b]);return g.version=a.version,S.activate([g]),g},c=a._gsQueue){for(d=0;d<c.length;d++)c[d]();for(e in n)n[e].func||a.console.log("GSAP encountered missing dependency: com.greensock."+e)}g=!1}}(window),(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("easing.Back",["easing.Ease"],function(a){var b,c,d,e=window.GreenSockGlobals||window,f=e.com.greensock,g=2*Math.PI,h=Math.PI/2,i=f._class,j=function(b,c){var d=i("easing."+b,function(){},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,d},k=a.register||function(){},l=function(a,b,c,d){var e=i("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return k(e,a),e},m=function(a,b,c){this.t=a,this.v=b,c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},n=function(b,c){var d=i("easing."+b,function(a){this._p1=a||0===a?a:1.70158,this._p2=1.525*this._p1},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,e.config=function(a){return new d(a)},d},o=l("Back",n("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),n("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),n("BackInOut",function(a){return(a*=2)<1?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),p=i("easing.SlowMo",function(a,b,c){b=b||0===b?b:.7,null==a?a=.7:a>1&&(a=1),this._p=1!==a?b:0,this._p1=(1-a)/2,this._p2=a,this._p3=this._p1+this._p2,this._calcEnd=c===!0},!0),q=p.prototype=new a;return q.constructor=p,q.getRatio=function(a){var b=a+(.5-a)*this._p;return a<this._p1?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},p.ease=new p(.7,.7),q.config=p.config=function(a,b,c){return new p(a,b,c)},b=i("easing.SteppedEase",function(a){a=a||1,this._p1=1/a,this._p2=a+1},!0),q=b.prototype=new a,q.constructor=b,q.getRatio=function(a){return 0>a?a=0:a>=1&&(a=.999999999),(this._p2*a>>0)*this._p1},q.config=b.config=function(a){return new b(a)},c=i("easing.RoughEase",function(b){b=b||{};for(var c,d,e,f,g,h,i=b.taper||"none",j=[],k=0,l=0|(b.points||20),n=l,o=b.randomize!==!1,p=b.clamp===!0,q=b.template instanceof a?b.template:null,r="number"==typeof b.strength?.4*b.strength:.4;--n>-1;)c=o?Math.random():1/l*n,d=q?q.getRatio(c):c,"none"===i?e=r:"out"===i?(f=1-c,e=f*f*r):"in"===i?e=c*c*r:.5>c?(f=2*c,e=f*f*.5*r):(f=2*(1-c),e=f*f*.5*r),o?d+=Math.random()*e-.5*e:n%2?d+=.5*e:d-=.5*e,p&&(d>1?d=1:0>d&&(d=0)),j[k++]={x:c,y:d};for(j.sort(function(a,b){return a.x-b.x}),h=new m(1,1,null),n=l;--n>-1;)g=j[n],h=new m(g.x,g.y,h);this._prev=new m(0,0,0!==h.t?h:h.next)},!0),q=c.prototype=new a,q.constructor=c,q.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&a<=b.t;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},q.config=function(a){return new c(a)},c.ease=new c,l("Bounce",j("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),j("BounceIn",function(a){return(a=1-a)<1/2.75?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),j("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,b?.5*(1-a):.5*a+.5})),l("Circ",j("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),j("CircIn",function(a){return-(Math.sqrt(1-a*a)-1)}),j("CircInOut",function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),d=function(b,c,d){var e=i("easing."+b,function(a,b){this._p1=a||1,this._p2=b||d,this._p3=this._p2/g*(Math.asin(1/this._p1)||0)},!0),f=e.prototype=new a;return f.constructor=e,f.getRatio=c,f.config=function(a,b){return new e(a,b)},e},l("Elastic",d("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*g/this._p2)+1},.3),d("ElasticIn",function(a){return-(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2))},.3),d("ElasticInOut",function(a){return(a*=2)<1?-.5*this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2):this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*g/this._p2)*.5+1},.45)),l("Expo",j("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),j("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),j("ExpoInOut",function(a){return(a*=2)<1?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),l("Sine",j("SineOut",function(a){return Math.sin(a*h)}),j("SineIn",function(a){return-Math.cos(a*h)+1}),j("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),i("easing.EaseLookup",{find:function(b){return a.map[b]}},!0),k(e.SlowMo,"SlowMo","ease,"),k(c,"RoughEase","ease,"),k(b,"SteppedEase","ease,"),o},!0)}),window._gsDefine&&window._gsQueue.pop()(),glue.module.create("js/assetlist",function(){"use strict";return{path:window.unitTestingFlag?"../assets/":"assets/",image:{dragon_particle:"dragon/particle.png",editor_regular_tileset:"editor_regular_tileset.png",editor_goal_tileset:"editor_goal_tileset.png",test_level_tileset:"test_tileset.png",dragonFront:"dragon/dragon_front.png",dragonMiddle:"dragon/dragon_middle.png",dragonEnd:"dragon/dragon_end.png",bridge:"tiles/bridge.png",bridge_verticalArrow:"tiles/bridge_arrow_vertical.png",bridge_horizontalArrow:"tiles/bridge_arrow_horizontal.png",cursorGlow:"game/cursorglow.png",lotusClosed:"tiles/lotusclosed.png",lotusClosed_Glow:"tiles/lotusclosed_glow.png",lotusOpen_Bottom:"tiles/lotusopen_4.png",lotusOpen_Middle:"tiles/lotusopen_3.png",lotusOpen_Top:"tiles/lotusopen_2.png",lotusOpen_TopSeed:"tiles/lotusopen_1.png",lotusGlow:"tiles/lotusclosed_glow.png",onewayArrow:"tiles/oneway_arrow.png",onewayBottom:"tiles/oneway_bottom.png",onewayTop:"tiles/oneway_top.png",tilesGrass:"tiles/tiles_grass.png",tilesSand:"tiles/tiles_sand.png",walls:"tiles/walls.png",entrance:"mainmenu/entrance.png",mainmenu_background:"mainmenu/mainmenu_background.png",buttonPlay:"mainmenu/button_play.png",buttonPlaySmall:"mainmenu/button_play_small.png",button_moregames:"mainmenu/button_moregames.png",button_zibbo:"mainmenu/button_zibbo.png",button_language:"mainmenu/button_language.png",doorLeft:"mainmenu/door_left.png",doorRight:"mainmenu/door_right.png",loading_background:"mainmenu/loader_background.png",loading_dragon:"mainmenu/loader_dragon.png",map_background:"mainmenu/mapscene_background.png",tilesBase:"game/tiles_base.png",mountain:"game/mountain.png",curtain:"game/curtain.png",tileoverlay:"game/tileoverlay.png",cloud0:"game/cloud0.png",cloud1:"game/cloud1.png",cloud2:"game/cloud2.png",cloud3:"game/cloud3.png",cloud4:"game/cloud4.png",cloud5:"game/cloud5.png",cloud6:"game/cloud6.png",zibboLogo:"/gui/branding.png",popupOverlay:"gui/popup_background.png",popupPagode:"gui/pagode_total.png",levelCompleteText:"gui/text_levelcomplete.png",gameCompleteText:"gui/text_gamecompleted.png",pauseText:"gui/text_pause.png",buttonLevelSelect:"gui/button_map_small.png",buttonHome:"gui/button_home_small.png",buttonReplay:"gui/button_retry_small.png",buttonHint:"gui/button_hint.png",buttonFortuneCookie:"gui/button_fortunecookie.png",buttonPuzzle:"gui/button_painting_small.png",buttonZibbo:"gui/button_zibbo.png",buttonNextLevel:"gui/button_next.png",buttonMusic:"gui/button_music.png",buttonSound:"gui/button_sound.png",buttonPause:"gui/button_pause.png",buttonCredits:"gui/button_credits.png",starsContainer:"gui/stars_bottom.png",filledStar:"gui/stars_star.png",emptyStar:"gui/stars_star.png",buttonLeft:"gui/button_left.png",buttonRight:"gui/button_right.png",buttonYes:"gui/button_yes.png",buttonNo:"gui/button_no.png",logo:"mainmenu/logo.png",mist:"mainmenu/mist.png",button_play_story:"gui/button_play_story.png",button_home:"gui/button_home.png",button_puzzle:"gui/button_painting2.png",button_howToPlay:"gui/button_howtoplay.png",button_left:"gui/button_left.png",button_right:"gui/button_right.png",background_levelselect:"gui/background_levelselect.png",button_wide:"gui/button_wide.png",button_arrow_right:"gui/how-to-play/button_arrow_right.png",button_arrow_left:"gui/how-to-play/button_arrow_left.png",puzzle_textbar:"gui/how-to-play/puzzle_textbar.png",howtoplay_background:"gui/how-to-play/howtoplay_background.png",howtoplay_1:"gui/how-to-play/howtoplay_1.png",howtoplay_2:"gui/how-to-play/howtoplay_2.png",howtoplay_3:"gui/how-to-play/howtoplay_3.png",howtoplay_4:"gui/how-to-play/howtoplay_4.png",howtoplay_5:"gui/how-to-play/howtoplay_5.png",howtoplay_6:"gui/how-to-play/howtoplay_6.png",painting1bw:"paintings/puzzle_1bw.png",painting1c:"paintings/puzzle_1c.png",painting2bw:"paintings/puzzle_2bw.png",painting2c:"paintings/puzzle_2c.png",painting3bw:"paintings/puzzle_3bw.png",painting3c:"paintings/puzzle_3c.png",painting4bw:"paintings/puzzle_4bw.png",painting4c:"paintings/puzzle_4c.png",painting5bw:"paintings/puzzle_5bw.png",painting5c:"paintings/puzzle_5c.png",painting1_1:"paintings/1_1.png",painting1_2:"paintings/1_2.png",painting1_3:"paintings/1_3.png",painting1_4:"paintings/1_4.png",painting2_1:"paintings/2_1.png",painting2_2:"paintings/2_2.png",painting2_3:"paintings/2_3.png",painting2_4:"paintings/2_4.png",painting3_1:"paintings/3_1.png",painting3_2:"paintings/3_2.png",painting3_3:"paintings/3_3.png",painting3_4:"paintings/3_4.png",painting4_1:"paintings/4_1.png",painting4_2:"paintings/4_2.png",painting4_3:"paintings/4_3.png",painting4_4:"paintings/4_4.png",painting5_1:"paintings/5_1.png",painting5_2:"paintings/5_2.png",painting5_3:"paintings/5_3.png",painting5_4:"paintings/5_4.png",resultScreen:"gui/resultscreen.png",buttonWide:"gui/button_wide.png",buttonArrow:"gui/button_nextorexit.png",movesBackground:"gui/moves.png",newGameUnderlay:"gui/newgame_underlay.png",button_level:"gui/lotusclosed.png",stars:"gui/levelselect_stars.png",starGlow:"gui/star_glow.png",gameCompleteTextBar:"gui/gamecomplete_textbar.png",paginationBackground:"gui/pagination_background.png",paginationPage:"gui/pagination_page.png"},json:{level_test:"level_test.json",test_level:"test_level.json",test_level2:"test_level2.json",levels_data:"levels_data.json",level_0:"level_0.json",level_1:"level_1.json",level_2:"level_2.json",level_3:"level_3.json",level_4:"level_4.json",level_5:"level_5.json",level_6:"level_6.json",level_7:"level_7.json",level_8:"level_8.json",level_9:"level_9.json",level_10:"level_10.json",level_11:"level_11.json",level_12:"level_12.json",level_13:"level_13.json",level_14:"level_14.json",level_15:"level_15.json",level_16:"level_16.json",level_17:"level_17.json",level_18:"level_18.json",level_19:"level_19.json",level_20:"level_20.json",level_21:"level_21.json",level_22:"level_22.json",level_23:"level_23.json",level_24:"level_24.json",level_25:"level_25.json",level_26:"level_26.json",level_27:"level_27.json",level_28:"level_28.json",level_29:"level_29.json",level_30:"level_30.json",level_31:"level_31.json",level_32:"level_32.json",level_33:"level_33.json",level_34:"level_34.json",level_35:"level_35.json",level_36:"level_36.json",level_37:"level_37.json",level_38:"level_38.json",level_39:"level_39.json",level_40:"level_40.json",level_41:"level_41.json",level_42:"level_42.json",level_43:"level_43.json",level_44:"level_44.json",level_45:"level_45.json",level_46:"level_46.json",level_47:"level_47.json",level_48:"level_48.json",level_49:"level_49.json"},audio:{sprite:{flow_music:window.unitTestingFlag?"../json/test_audio.json":"audio.json"}}}
}),glue.module.create("js/game-objects/context",["glue","glue/baseobject","glue/math/vector","js/utils"],function(a,b,c){"use strict";var d=a.sugar;return function(a,e){var f=document.createElement("canvas"),g=f.getContext("2d"),h=c(0,0),i=b().add({draw:function(a){this.fadable&&(a.context.globalAlpha=this.fadable.getAlpha()),a.context.save(),a.context.translate(h.x,h.y),a.context.drawImage(f,0,0),a.context.restore(),this.fadable&&(a.context.globalAlpha=1)},getContext:function(){return g},getCanvas:function(){return f},setPosition:function(a){h=a},setDimension:function(a){f.width=d.isNumber(a.width)?a.width:f.width,f.height=d.isNumber(a.height)?a.height:f.height}});return f.width=d.isNumber(a)?a:f.width,f.height=d.isNumber(e)?e:f.height,i.z=0,i}}),glue.module.create("js/game-objects/dragon",["glue","glue/game","glue/loader","glue/baseobject","glue/math/vector","glue/event/system","js/game-objects/context","js/utils","glue/component/fadable"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=0,k=1,l=-1,m=function(a,b,c){return(c-b)*a+b};return function(){var n,o,p,q=a.sugar,r=[],s=g(b.canvas.getDimension().width,b.canvas.getDimension().height),t=s.getContext(),u=.5,v=.7,w=.4,x=.9,y=.9,z=c.getAsset("dragonMiddle"),A=c.getAsset("dragonEnd"),B=c.getAsset("dragonFront"),C=e(z.width/2,z.height/2),D=0,E=.02,F=1,G=5,H=.7853981633974483,I=.01,J=.008,K=0,L=0,M=l,N=!1,O=!1,P=function(){M=j,I=-.04,K=1.5,J=.006,L=0},Q=function(){M=k,I=.08,J=.008},R=function(){f.on("tilemanager.selectTile",T),f.on("dragon.moveBack",P),f.on("dragon.moveFront",Q)},S=function(){f.off("tilemanager.selectTile",T),f.off("dragon.moveBack",P),f.off("dragon.moveFront",Q)},T=function(a){var b=a.getType();O=b===h.tileTypes.BRIDGE||b===h.tileTypes.ONE_WAY?!0:!1},U=d(i).add({init:function(){R(),U.fadable.setAlpha(1),U.fadable.setFadeSpeed(2),q.isDefined(p)&&(p.globalAlpha=1,s.globalAlpha=1)},draw:function(a){var b,c,d,e,g,i=0,l=0,q=0,P=0,Q=D,R=1,S=0,T=0,V=0,W=0;for(a.context.save(),a.context.translate(h.game.position.x,h.game.position.y),t.clearRect(0,0,t.canvas.width,t.canvas.height),p=a.context,n=0,o=r.length;o>n;++n){for(d=0,i=r[n].clone(),b=o>n+1?r[n+1]:r[n],c=n-1>=0?r[n-1]:r[n],e=i.angle(b),l=i.distance(b),n>=o-2&&(e=i.angle(b),l=i.distance(b)),g=r[n].z===h.zLayers.BRIDGES||b.z===h.zLayers.BRIDGES?t:a.context,g.globalAlpha=U.fadable.getAlpha(),e!==T?e===Math.PI/2&&i.x===b.x&&i.y<b.y&&c.x<i.x?(V=e-H,i.x-=10,i.y+=10):e===Math.PI&&i.x>b.x&&i.y===b.y&&c.y<i.y?(V=e-H,i.x-=10,i.y-=10):e===-(Math.PI/2)&&i.x===b.x&&i.y>b.y&&c.x>i.x?(V=e-H,i.x+=10,i.y-=10):0===e&&i.x<b.x&&i.y===b.y&&c.y>i.y?(V=e-H,i.x+=10,i.y+=10):e===-(Math.PI/2)&&i.x===b.x&&i.y>b.y&&c.x<b.x?(V=e+H,i.x-=10,i.y-=10):e===Math.PI&&i.x>b.x&&i.y===b.y&&c.y>i.y?(V=e+H,i.x-=10,i.y+=10):0===e&&i.x<b.x&&i.y===b.y&&c.y<i.y?(V=e+H,i.x+=10,i.y-=10):e===Math.PI/2&&i.x===b.x&&i.y<b.y&&c.x>i.x&&(V=e+H,i.x+=10,i.y+=10):(u=.5,d=0,V=e);1>d;){if(R=1>S?m(S,w,v):v,1!==L&&(L+=J,L>1&&(L=1)),q=i.x+Math.cos(e)*m(d,0,l),P=i.y+Math.sin(e)*m(d,0,l),q+=Math.sin(Q)*G,P+=Math.sin(Q)*G,n===o-2&&d===1-2*u&&(R=1),n==o-2?R=m(L,v,1):n==o-3&&M===k&&(R=m(L,1,v)),g.save(),0===n&&0===d)g.translate(q,P),g.scale(y,y),g.rotate(e+.1*Math.sin(Q)),g.translate(-(A.width/2),-(A.height/2)),g.drawImage(A,0,0);else if(n===o-1&&d===1-u){var X;W>0?(X=t,X.save()):X=g,M===k?(K+=I*a.deltaT*60,K>1&&(K=1)):(K+=I*a.deltaT*60,1>K&&(K=1)),1!==K&&M===j&&(X.save(),X.translate(q,P),X.rotate(V+.2*Math.sin(Q)),R=m(L,1,v),X.scale(R,R),X.translate(-C.x,-C.y),X.drawImage(z,0,0),X.restore()),e=c.angle(i),X.translate(m(K,c.x,i.x)+Math.sin(Q)*G,m(K,c.y,i.y)+Math.sin(Q)*G),r[n].z===h.zLayers.BRIDGES&&(O=!1),x=O?.7:.9,X.scale(x,x),X.rotate(e+.02*Math.sin(Q)),X.translate(-(B.width/2),-(B.height/2)),X.drawImage(B,0,0),X.restore()}else n>=0&&o-1>n&&(g.translate(q,P),g.rotate(V+.2*Math.sin(Q)),g.scale(R,R),g.translate(-C.x,-C.y),g.drawImage(z,0,0));g.restore(),d+=u,S+=.2,Q+=F,e!==T&&(V=e,i=r[n].clone())}T=e,W=g===t?h.zLayers.BRIDGES:0}D+=E,1===K&&N&&(f.fire("dragon.moveEnded"),N=!1),a.context.restore(),a.context.globalAlpha=1,s.globalAlpha=1},setPath:function(a){r=a,M===k&&(K=.2,L=0,N=!0)},getPath:function(){return r},getOverContext:function(){return t},destroy:function(){r.length=0,S(),b.remove(s)},clear:function(){r.splice(0,r.length),U.fadable.setAlpha(1)},fadeDragonOut:function(){U.fadable.fadeOut(function(){})}});return s.z=h.zLayers.OVER_BRIDGE,s.setPosition(e(h.game.position.x,h.game.position.y)),b.add(s),U}}),glue.module.create("js/game-objects/fortunecookie",["glue","glue/game","glue/event/system","js/game-objects/puzzle-piece","js/managers/hintsmanager","js/managers/puzzle-piece-manager","js/managers/levelmanager","js/utils"],function(a,b,c,d,e,f,g,h){"use strict";{var i,j,k,l,m,n,o;a.sugar}return o={init:function(){i=g,j=e,k=f,l=0,m=0,n=0},getPresent:function(){var a,b,c=[];for(var e in h.presents)h.presents.hasOwnProperty(e)&&c.push(h.presents[e]);return a=c[c.length*Math.random()<<0],n!=i.getCurrentRegion()&&(n=i.getCurrentRegion(),l=0,m=0),i.getCompletedLevelsNumber()%10!=0?a===h.presents.HINT?(l++,l>4&&(m++,a=h.presents.PUZZLE_PIECE)):(m++,m>5&&(l++,a=h.presents.HINT)):a=h.presents.PUZZLE_PIECE,a===h.presents.PUZZLE_PIECE?(b=d({content:{name:"puzzlePiece_"+i.getCurrentLevel().getName()}}),k.addPuzzlePiece()):a===h.presents.HINT&&j.addHint(),a}},o.init(),o}),glue.module.create("js/game-objects/goal-lotus",["glue","glue/game","glue/loader","glue/baseobject","glue/math/vector","glue/math/dimension","glue/component/spritable","glue/component/animatable","glue/component/rotatable","glue/component/scalable","js/gui/textbox","glue/event/system","js/utils","js/managers/audiomanager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=a.sugar;return function(a,f,l){var o,p,q,r,s,t,u,v,w,x=function(a,b,c){var d={x:0};TweenLite.to(d,c,{x:360,ease:Linear.easeIn,onUpdate:function(){a.rotatable.setAngleDegree(b===m.rotationDirections.CLOCKWISE?d.x:-d.x)},onComplete:function(){x(a,b,c)}})},y=d().add({init:function(){p=d(h).add({init:function(){p.animatable.setup({position:e(a,f),image:c.getAsset("lotusClosed"),animation:{frameCount:2,fps:2,animations:{open:{startFrame:0,endFrame:0},closed:{startFrame:1,endFrame:1}}}}),p.animatable.setAnimation("open"),o=p.animatable.getDimension(),p.setOrigin(e(o.width/2,o.height/2)),p.setPosition(e(m.game.position.x+a+o.x/2,m.game.position.y+f+o.y/2))},draw:function(a){p.base.draw(a)},destroy:function(){b.remove(q)}}),q=k({text:w,align:"center",font:m.fonts.numberFont,fontSize:40,fontColor:"#28256E",margin:e(20,20),textBaseline:"middle"}).add({init:function(){q.setPosition(e(40-m.level.tileWidth/2,25-m.level.tileHeight/2)),q.z=m.zLayers.PATH-1,q.setText(w)},update:function(){}}),s=d(g,i,j).add({init:function(){s.spritable.setup({image:c.getAsset("lotusOpen_Bottom")}),o=s.getDimension(),s.setOrigin(e(o.width/2,o.height/2)),s.setPosition(e(m.game.position.x+a+o.x,m.game.position.y+f+o.y))}}),t=d(g,i,j).add({init:function(){t.spritable.setup({image:c.getAsset("lotusOpen_Middle")}),o=t.getDimension(),t.setOrigin(e(o.width/2,o.height/2)),t.setPosition(e(m.game.position.x+a+o.x,m.game.position.y+f+o.y))}}),u=d(g,i,j).add({init:function(){u.spritable.setup({image:c.getAsset("lotusOpen_Top")}),o=u.getDimension(),u.setOrigin(e(o.width/2,o.height/2)),u.setPosition(e(m.game.position.x+a+o.x,m.game.position.y+f+o.y))}}),v=d(g,i,j).add({init:function(){v.spritable.setup({image:c.getAsset("lotusOpen_TopSeed")}),o=v.getDimension(),v.setOrigin(e(o.width/2,o.height/2)),v.setPosition(e(m.game.position.x+a+o.x,m.game.position.y+f+o.y))}}),r=d(g,i,j).add({init:function(){r.spritable.setup({image:c.getAsset("lotusClosed_Glow")}),o=r.getDimension(),r.setOrigin(e(o.width/2,o.height/2)),r.setPosition(e(m.game.position.x+a+o.x,m.game.position.y+f+o.y)),r.doGlow()},doGlow:function(){TweenLite.to(r.scalable.getScale(),.7,{x:1.5,y:1.5,ease:Quad.easeIn,onComplete:function(){TweenLite.to(r.scalable.getScale(),.5,{x:1,y:1,ease:Quad.easeIn,onComplete:function(){r.doGlow()}})}})}}),w=l.goalNumber?l.goalNumber:0,y.addChild(r),y.addChild(p),y.addChild(q),y.addChild(s),y.addChild(t),y.addChild(u),y.addChild(v),x(s,m.rotationDirections.CLOCKWISE,15),x(t,m.rotationDirections.CLOCKWISE,20),x(u,m.rotationDirections.COUNTER_CLOCKWISE,10),this.closeLotus(),this.stopGlowing()},getGoalNumber:function(){return w},openLotus:function(a){s.scalable.setScale(e(0,0)),t.scalable.setScale(e(0,0)),u.scalable.setScale(e(0,0)),TweenLite.to(s.scalable.getScale(),.37,{x:1,y:1,ease:Quad.easeOut,onComplete:function(){TweenLite.to(t.scalable.getScale(),.37,{x:1,y:1,ease:Quad.easeOut,onComplete:function(){TweenLite.to(u.scalable.getScale(),.37,{x:1,y:1,ease:Quad.easeOut,onComplete:function(){v.setVisible(!0),n.isFunction(a)&&a()}})}})}}),s.setVisible(!0),t.setVisible(!0),u.setVisible(!0)},closeLotus:function(){s.setVisible(!1),t.setVisible(!1),u.setVisible(!1),v.setVisible(!1)},startGlowing:function(){r.setVisible(!0)},stopGlowing:function(){r.setVisible(!1)},destroy:function(){y.removeChild(p),y.removeChild(q),y.removeChild(s),y.removeChild(t),y.removeChild(u),y.removeChild(v),y.removeChild(r)}});return y.z=m.zLayers.PATH-10,y}}),glue.module.create("js/game-objects/goalLotus",["glue","glue/game","glue/loader","glue/baseobject","glue/math/vector","glue/math/dimension","glue/component/spritable","glue/component/animatable","glue/component/rotatable","glue/component/scalable","js/gui/textbox","glue/event/system","js/utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";a.sugar;return function(a,f,l){var n,o,p,q,r,s,t,u,v,w=function(a,b,c){var d={x:0};TweenLite.to(d,c,{x:360,ease:Linear.easeIn,onUpdate:function(){a.rotatable.setAngleDegree(b===m.rotationDirections.CLOCKWISE?d.x:-d.x)},onComplete:function(){w(a,b,c)}})},x=d().add({init:function(){o=d(h).add({init:function(){o.animatable.setup({position:e(a,f),image:c.getAsset("lotusClosed"),animation:{frameCount:2,fps:2,animations:{open:{startFrame:0,endFrame:0},closed:{startFrame:1,endFrame:1}}}}),o.animatable.setAnimation("open"),n=o.animatable.getDimension(),o.setOrigin(e(n.width/2,n.height/2)),o.setPosition(e(m.game.position.x+a+n.x/2,m.game.position.y+f+n.y/2))},draw:function(a){o.base.draw(a)},destroy:function(){b.remove(p)}}),p=k({text:v,align:"center",font:m.fonts.numberFont,fontSize:40,fontColor:"#28256E",margin:e(20,20),textBaseline:"middle"}).add({init:function(){p.setPosition(e(40-m.level.tileWidth/2,25-m.level.tileHeight/2)),p.z=m.zLayers.PATH-1,p.setText(v)},update:function(){}}),r=d(g,i,j).add({init:function(){r.spritable.setup({image:c.getAsset("lotusOpen_Bottom")}),n=r.getDimension(),r.setOrigin(e(n.width/2,n.height/2)),r.setPosition(e(m.game.position.x+a+n.x,m.game.position.y+f+n.y))}}),s=d(g,i,j).add({init:function(){s.spritable.setup({image:c.getAsset("lotusOpen_Middle")}),n=s.getDimension(),s.setOrigin(e(n.width/2,n.height/2)),s.setPosition(e(m.game.position.x+a+n.x,m.game.position.y+f+n.y))}}),t=d(g,i,j).add({init:function(){t.spritable.setup({image:c.getAsset("lotusOpen_Top")}),n=t.getDimension(),t.setOrigin(e(n.width/2,n.height/2)),t.setPosition(e(m.game.position.x+a+n.x,m.game.position.y+f+n.y))}}),u=d(g,i,j).add({init:function(){u.spritable.setup({image:c.getAsset("lotusOpen_TopSeed")}),n=u.getDimension(),u.setOrigin(e(n.width/2,n.height/2)),u.setPosition(e(m.game.position.x+a+n.x,m.game.position.y+f+n.y))}}),q=d(g,i,j).add({init:function(){q.spritable.setup({image:c.getAsset("lotusClosed_Glow")}),n=q.getDimension(),q.setOrigin(e(n.width/2,n.height/2)),q.setPosition(e(m.game.position.x+a+n.x,m.game.position.y+f+n.y)),q.doGlow()},doGlow:function(){TweenLite.to(q.scalable.getScale(),.7,{x:1.5,y:1.5,ease:Quad.easeIn,onComplete:function(){TweenLite.to(q.scalable.getScale(),.5,{x:1,y:1,ease:Quad.easeIn,onComplete:function(){q.doGlow()}})}})}}),v=l.goalNumber?l.goalNumber:0,x.addChild(q),x.addChild(o),x.addChild(p),x.addChild(r),x.addChild(s),x.addChild(t),x.addChild(u),w(r,m.rotationDirections.CLOCKWISE,15),w(s,m.rotationDirections.CLOCKWISE,20),w(t,m.rotationDirections.COUNTER_CLOCKWISE,10),this.closeLotus(),this.stopGlowing()},getGoalNumber:function(){return v},openLotus:function(){r.scalable.setScale(e(0,0)),s.scalable.setScale(e(0,0)),t.scalable.setScale(e(0,0)),TweenLite.to(r.scalable.getScale(),.37,{x:1,y:1,ease:Quad.easeOut,onComplete:function(){TweenLite.to(s.scalable.getScale(),.37,{x:1,y:1,ease:Quad.easeOut,onComplete:function(){TweenLite.to(t.scalable.getScale(),.37,{x:1,y:1,ease:Quad.easeOut,onComplete:function(){u.setVisible(!0)}})}})}}),r.setVisible(!0),s.setVisible(!0),t.setVisible(!0)},closeLotus:function(){r.setVisible(!1),s.setVisible(!1),t.setVisible(!1),u.setVisible(!1)},startGlowing:function(){q.setVisible(!0)},stopGlowing:function(){q.setVisible(!1)},destroy:function(){x.removeChild(o),x.removeChild(p),x.removeChild(r),x.removeChild(s),x.removeChild(t),x.removeChild(u),x.removeChild(q)}});return x.z=m.zLayers.PATH-10,x}}),glue.module.create("js/game-objects/level",["glue","glue/game","glue/event/system","js/utils"],function(a,b,c,d){"use strict";var e=a.sugar;return function(a){var b,f,g,h,i,j,k,l,m={init:function(){a?(b=e.isDefined(a.id)?a.id:-1,f=e.isDefined(a.name)?a.name:"level_unknown",g=e.isDefined(a.region)?a.region:0,h=e.isDefined(a.levelState)?a.levelState:d.levelStates.LOCKED,k=e.isDefined(a.lastMoveScore)?a.lastMoveScore:0,l=e.isDefined(a.bestMoveScore)?a.bestMoveScore:0,i=e.isDefined(a.lastStarsCollected)?a.lastStarsCollected:0,j=e.isDefined(a.bestStarsCollected)?a.bestStarsCollected:0):(b=-1,f="level_unknown",g=0,h=d.levelStates.LOCKED,k=0,l=0,i=0,j=0),c.fire("level.initialized",m)},getId:function(){return b},getName:function(){return f},setName:function(a){if(!e.isString(a))throw"value should be a string";f=a},getRegion:function(){return g},setRegion:function(a){if(!e.isNumber(a))throw"value should be a number";g=a},getState:function(){return h},setState:function(a){if(!e.isString(a))throw"value should be a string";h=a},getLastStarsCollected:function(){return i},setLastStarsCollected:function(a){if(!e.isNumber(a))throw"value should be a string";i=a},getBestStarsCollected:function(){return j},setBestStarsCollected:function(a){if(!e.isNumber(a))throw"value should be a string";j=a},getLastMoveScore:function(){return k},setLastMoveScore:function(a){if(!e.isNumber(a))throw"value should be a string";k=a},getBestMoveScore:function(){return l},setBestMoveScore:function(a){if(!e.isNumber(a))throw"value should be a string";l=a}};return m}}),glue.module.create("js/game-objects/puzzle-piece",["glue","glue/game","glue/event/system","js/utils"],function(a,b,c){"use strict";var d=a.sugar;return function(a){var b,e,f={init:function(){a?(b=d.isDefined(a.name)?a.name:"puzzlePiece_unknown",e=d.isDefined(a.content)?a.content:{}):(b="puzzlePiece_unknown",e={}),c.fire("puzzlepiece.initialized",f)},getName:function(){return b},setName:function(a){if(!d.isString(a))throw"value should be an object";b=a},getContent:function(){return e},setContent:function(a){if(!d.isObject(a))throw"value should be a string";e=a}};return f.init(),f}}),glue.module.create("js/game-objects/tile",["glue","glue/loader","glue/game","glue/baseobject","glue/math/vector","glue/math/dimension","glue/component/hoverable","glue/component/clickable","glue/component/animatable","glue/component/spritable","glue/component/rotatable","glue/component/scalable","glue/event/system","js/utils","js/gui/textbox"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";var p=a.sugar,q=function(a,b){return Math.floor(a+Math.random()*(b-a+1))};return function(a,l,o){var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=function(){var f,g=d(j,k).add({init:function(){g.spritable.setup({image:b.getAsset("onewayArrow")}),f=g.getDimension(),g.setOrigin(e(f.width/2,f.height/2)),g.setPosition(e(n.game.position.x+a+n.level.tileWidth/2,n.game.position.y+l+n.level.tileWidth/2)),z===n.directions.LEFT?g.rotatable.setAngleDegree(90):z===n.directions.UP?g.rotatable.setAngleDegree(180):z===n.directions.RIGHT&&g.rotatable.setAngleDegree(270)},update:function(){},draw:function(a){K.isCrossed()||g.base.draw(a)}}),h=d(j,k).add({init:function(){h.spritable.setup({image:b.getAsset("onewayTop")}),f=h.getDimension(),h.setOrigin(e(f.width/2,f.height/2)),h.setPosition(e(n.game.position.x+a+f.width/2-8,n.game.position.y+l+f.height/2-5)),z===n.directions.LEFT?h.rotatable.setAngleDegree(90):z===n.directions.UP?h.rotatable.setAngleDegree(180):z===n.directions.RIGHT&&h.rotatable.setAngleDegree(270)},update:function(){}}),i=d(j,k).add({init:function(){i.spritable.setup({image:b.getAsset("onewayBottom")}),f=i.getDimension(),i.setOrigin(e(f.width/2,f.height/2)),i.setPosition(e(a+f.width/2-10,l+f.height/2-5)),z===n.directions.LEFT?i.rotatable.setAngleDegree(90):z===n.directions.UP?i.rotatable.setAngleDegree(180):z===n.directions.RIGHT&&i.rotatable.setAngleDegree(270)},draw:function(a){i.base.draw(a)},update:function(){},destroy:function(){c.remove(h),c.remove(g)}});return h.z=n.zLayers.BRIDGES,g.z=n.zLayers.BRIDGES+1,c.add(h),c.add(g),i},H=function(){var f=d(j).add({init:function(){f.spritable.setup({image:b.getAsset("bridge"),position:e(n.game.position.x+a-7,n.game.position.y+l-7)})},destroy:function(){c.remove(g),c.remove(h)}}),g=d(j).add({init:function(){g.spritable.setup({image:b.getAsset("bridge_verticalArrow")}),C=g.getDimension(),g.setOrigin(e(C.width/2,C.height/2)),g.setPosition(e(n.game.position.x+a+n.level.tileWidth/2,n.game.position.y+l+n.level.tileWidth/2))},update:function(){},draw:function(a){F&&(p.isDefined(y)&&0!==y.length&&(1!==y.length||K.getLastCrossedDirection()!==n.directions.LEFT&&K.getLastCrossedDirection()!==n.directions.RIGHT)||g.base.draw(a))}}),h=d(j).add({init:function(){h.spritable.setup({image:b.getAsset("bridge_horizontalArrow")}),C=h.getDimension(),h.setOrigin(e(C.width/2,C.height/2)),h.setPosition(e(n.game.position.x+a+n.level.tileWidth/2,n.game.position.y+l+n.level.tileWidth/2))},update:function(){},draw:function(a){F&&(p.isDefined(y)&&0!==y.length&&(1!==y.length||K.getLastCrossedDirection()!==n.directions.UP&&K.getLastCrossedDirection()!==n.directions.DOWN)||h.base.draw(a))}});return g.z=n.zLayers.BRIDGES-1,h.z=n.zLayers.BRIDGES+1,c.add(g),c.add(h),c.add(f),f},I=function(){var c=d(i).add({init:function(){c.animatable.setup({position:e(a-6,l-6),image:b.getAsset("walls"),animation:{frameCount:3,frameWidth:92,frameHeight:92,fps:3,animations:{0:{startFrame:0,endFrame:0},1:{startFrame:1,endFrame:1},2:{startFrame:2,endFrame:2}}}}),c.animatable.setAnimation(q(0,2))}});return c},J=function(){var f=d(i).add({init:function(){f.animatable.setup({image:b.getAsset("tilesSand"),position:e(a,l),animation:{frameWidth:n.level.tileWidth,frameHeight:n.level.tileHeight,fps:3,animations:{0:{startFrame:0,endFrame:0},1:{startFrame:1,endFrame:1},2:{startFrame:2,endFrame:2},3:{startFrame:3,endFrame:3},4:{startFrame:4,endFrame:4},5:{startFrame:5,endFrame:5},6:{startFrame:6,endFrame:6},7:{startFrame:7,endFrame:7},8:{startFrame:8,endFrame:8},9:{startFrame:9,endFrame:9},10:{startFrame:10,endFrame:10},11:{startFrame:11,endFrame:11},12:{startFrame:12,endFrame:12},13:{startFrame:13,endFrame:13},14:{startFrame:14,endFrame:14}}}}),f.grassTile.init(),f.animatable.setAnimation(q(0,14))},destroy:function(){c.remove(g)}}),g=d(i).add({init:function(){g.animatable.setup({image:b.getAsset("tilesSand"),position:e(n.game.position.x+a,n.game.position.y+l),animation:{frameWidth:n.level.tileWidth,frameHeight:n.level.tileHeight,fps:q(3,7),animations:{crack:{startFrame:15,endFrame:19}}}}),g.animatable.setAnimation("crack")},draw:function(a){F&&g.base.draw(a)}});return g.z=n.zLayers.GROUND+1,c.add(g),f.grassTile=d(i).add({init:function(){f.grassTile.animatable.setup({image:b.getAsset("tilesGrass"),position:e(a,l),frameCount:16,animation:{frameWidth:n.level.tileWidth,frameHeight:n.level.tileHeight,fps:3,animations:{0:{startFrame:0,endFrame:0},1:{startFrame:1,endFrame:1},2:{startFrame:2,endFrame:2},3:{startFrame:3,endFrame:3},4:{startFrame:4,endFrame:4},5:{startFrame:5,endFrame:5},6:{startFrame:6,endFrame:6},7:{startFrame:7,endFrame:7},8:{startFrame:8,endFrame:8},9:{startFrame:9,endFrame:9},10:{startFrame:10,endFrame:10},11:{startFrame:11,endFrame:11},12:{startFrame:12,endFrame:12},13:{startFrame:13,endFrame:13},14:{startFrame:14,endFrame:14},15:{startFrame:15,endFrame:15}}}}),f.grassTile.animatable.setAnimation(q(0,15))}}),f},K=d(g,h).add({init:function(){r=p.isDefined(o.id)?o.id:-1,s=p.isDefined(o.name)?o.name:"unknown",t=p.isDefined(o.type)?o.type:n.tileTypes.REGULAR,x=p.isDefined(o.goalNumber)?o.goalNumber:-1,z=p.isDefined(o.direction)?o.direction:n.directions.NODIR,u=p.isDefined(o.z)?o.z:n.zLayers.GROUND,A={top:{},bottom:{},left:{},right:{}},t!==n.tileTypes.ONE_WAY&&(z=n.directions.NODIR),y=[],K.z=u,K.setPosition(e(a,l)),K.setDimension(f(n.level.tileWidth,n.level.tileWidth)),B=K.getPosition(),C=K.getDimension(),D=J(),D.z=K.z,t!==n.tileTypes.REGULAR&&(t===n.tileTypes.BRIDGE?(E=H(),E.z=n.zLayers.BRIDGES,E.init()):t===n.tileTypes.BLOCK?(E=I(),E.z=n.zLayers.BLOCK,E.init()):t===n.tileTypes.GOAL||(t===n.tileTypes.ONE_WAY?(E=G(),E.z=n.zLayers.GROUND,E.init()):E=null)),D.init(),m.fire("tile.initialized",K)},getId:function(){return r},getName:function(){return s},setName:function(a){if(!p.isString(a))throw"value should be a string";s=a},getType:function(){return t},setType:function(a){if(!p.isString(a))throw"value should be a string";t=a},isCrossed:function(){return y.length>0?!0:!1},setCrossed:function(a,b){if(!p.isBoolean(a))throw"value should be a boolean";if(a){if(0===y.length&&(w=v),p.isDefined(b)){if(!p.isNumber(b))throw"value should be a number";y.push(t===n.tileTypes.BRIDGE&&y.length<2?b:b)}}else v=w,y.length>0&&y.pop()},getPreviousTile:function(){return v},setPreviousTile:function(a){v=a},getGoalNumber:function(){return x},setGoalNumber:function(a){x=a},getDirection:function(){return z},setDirection:function(a){if(!p.isString(a))throw"value should be a string";z=a},getCrossedDirections:function(){return y},getLastCrossedDirection:function(){return y[y.length-1]},getNeighbors:function(){return A},setNeighbors:function(a){if(!p.isObject(a))throw"value should be an object";A=a},handleHoverOver:function(){m.fire("tile.hoverOver",K)},hoverOver:function(){m.fire("tile.interpolateHoverOver",K)},hoverOut:function(){m.fire("tile.hoverOut",K)},pointerDown:function(a){K.getBoundingBox().hasPosition(a.position)&&m.fire("tile.pointerDown",K)},pointerUp:function(){m.fire("tile.pointerUp",K)},showFeedback:function(a){a?(F=!0,t===n.tileTypes.REGULAR):(F=!1,t===n.tileTypes.REGULAR)},update:function(a){this.base.update(a)},draw:function(){},getBaseTile:function(){return D},getTopTile:function(){return E},destroy:function(){p.isDefined(E)&&(E.destroy&&E.destroy(),c.remove(E)),p.isDefined(D)&&c.remove(D)}});return K}}),glue.module.create("js/game-objects/tilemap",["glue/game","glue/math/vector","glue/math/dimension","glue/baseobject","glue/component/hoverable","glue/component/clickable","js/game-objects/context","js/utils","glue/component/fadable","glue/event/system"],function(a,b,c,d,e,f,g,h,i,j){"use strict";return function(e,f,k,l){var m,n,o=(b(e,f),c(k,l),{base:g(k,l),levelComplete:g(k,l),block:g(k,l)}),p=function(){o.levelComplete.fadable.fadeIn(function(){})},q=function(){j.on("tilemanager.showWinTransition",p)},r=d().add({init:function(){r.setDimension(c(k,l)),i(o.levelComplete),o.levelComplete.fadable.setAlpha(0)},add:function(a){r.addChild(a)},forceTileHover:function(a){var b,c,d=r.getChildren(),e=d.length;for(b=0;e>b;++b)c=d[b],c.getBoundingBox().hasPosition(a)&&c.handleHoverOver(a)},preRender:function(){var b;if(!window.unitTestingFlag){n||(n=r.getChildren());for(var c=0;c<n.length;++c)b=n[c],b.getBaseTile()&&(m=o.base.getContext(),b.getBaseTile().draw({context:m,deltaT:0}),b.getBaseTile().grassTile.draw({context:o.levelComplete.getContext(),deltaT:0})),"undefined"!=typeof b.getTopTile()&&(b.getType()===h.tileTypes.BLOCK?(m=o.block.getContext(),b.getTopTile().draw({context:m})):(m=o.base.getContext(),b.getTopTile().draw({context:m,deltaT:0})));r.z=10,o.base.z=h.zLayers.GROUND,o.block.z=h.zLayers.BLOCKS,o.base.setPosition(h.game.position),o.block.setPosition(h.game.position),o.levelComplete.setPosition(h.game.position),a.add(o.base),a.add(o.levelComplete),a.add(o.block)}},destroy:function(){if(n){for(var b=0;b<n.length;++b)n[b].destroy();n.length=0,m=null}for(var b in o)a.remove(o[b]);j.off("tilemanager.showWinTransition",p)}});return q(),r}}),glue.module.create("js/game-objects/timer",["glue"],function(a){"use strict";var b=a.sugar,c=[],d=[],e=function(){return window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,16)}}(),f=function(){return(new Date).getTime()},g=function(a){c[c.length]=a},h=function(a){var b,e=c.indexOf(a);e>=0&&(b=c.splice(e,1),d[d.length]=b[0])},i=function(){for(var a=0,b=f();a<c.length;)c[a].update(b),++a;e(i)},j=function(){var a,b=l.MAX_TIMER_POOL;for(a=0;b>a;++a)d[d.length]=k();i()},k=function(){var a,c,d,e={startTimeout:function(h,i){if(!b.isFunction(h))throw"Callback must be a function";c=h,a=i||0,d=f(),g(e)},update:function(b){b-d>a&&(c(),h(e),c=null)}};return e},l={MAX_TIMER_POOL:200,setTimeout:function(a,b){d.pop().startTimeout(a,b)}};return j(),l}),glue.module.create("js/gui/click-button",["glue","glue/game","glue/baseobject","glue/math/dimension","glue/math/vector","glue/event/system","glue/component/animatable","glue/component/clickable","glue/component/hoverable","glue/component/scalable","glue/component/fadable","js/utils","js/gui/textbox"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=a.sugar;return function(a,b,d){if(!n.isNumber(a)||!n.isNumber(b)||!n.isObject(d))throw"Arguments for Click Button are invalid";var o,p,q=!1,r=c(g,h,i,j,k).add({init:function(){this.animatable.setup({position:e(a,b),image:d.image,animation:{frameCount:d.frameCount?d.frameCount:2,animations:{idle:{startFrame:0,endFrame:0},inactive:{startFrame:1,endFrame:1}}}}),this.isFadable=d.fadable||!0,this.z=d.z||l.zLayers.GUI,this.name=d.name||"clickbutton",n.isBoolean(d.active)||(d.active=!0),this.animatable.setAnimation(d.active!==!0&&d.frameCount>=3?"inactive":"idle"),n.isObject(d.origin)?n.isVector(d.origin)&&this.setOrigin(d.origin):(this.setPosition(e(this.getPosition().x+this.animatable.getDimension().width/2,this.getPosition().y+this.animatable.getDimension().height/2)),this.setOrigin(e(this.animatable.getDimension().width/2,this.animatable.getDimension().height/2))),d.text&&(o=m({text:d.text,align:"center",font:d.textFont?d.textFont:void 0,fontSize:d.textFontSize?d.textFontSize:void 0,fontColor:d.textFontColor?d.textFontColor:void 0,margin:d.textMargin?d.textMargin:void 0,textBaseline:"middle",shadowColor:d.shadowColor?d.shadowColor:void 0,shadowBlur:d.shadowBlur?d.shadowBlur:void 0,shadowOffsetX:d.shadowOffsetX?d.shadowOffsetX:void 0,shadowOffsetY:d.shadowOffsetY?d.shadowOffsetY:void 0,maxWidth:this.animatable.getDimension().width,maxHeight:this.animatable.getDimension().height}),p=m({text:d.text,align:"center",font:d.textFont?d.textFont:void 0,fontSize:d.textFontSize?d.textFontSize:void 0,fontColor:"#3B3B3B",margin:d.textMargin?d.textMargin:void 0,textBaseline:"middle",maxWidth:this.animatable.getDimension().width,maxHeight:this.animatable.getDimension().height}),o.setDraw(!0),p.setDraw(!1),o.z=this.z+1,p.z=this.z+1,this.addChild(o),this.addChild(p),o.setPosition(d.textOffset?d.textOffset:e(0,0)),p.setPosition(d.textOffset?d.textOffset:e(0,0))),n.isFunction(d.onInit)&&d.onInit()},draw:function(a){n.isFunction(d.onDraw)?d.onDraw(a):(this.base.draw(a),q&&(a.context.globalCompositeOperation="lighter",this.isFadable&&this.fadable.setAlpha(.3),this.base.draw(a),this.isFadable&&this.fadable.setAlpha(1),a.context.globalCompositeOperation="source-over"))},getClickDown:function(){return this.isActive()?d.clickDown:void 0},getClickUp:function(){return this.isActive()?d.clickUp:void 0},pointerDown:function(a){this.isActive()&&d.active===!0&&this.animatable.getBoundingBox().hasPosition(a.position)&&(d.clickDown&&d.clickDown(),q=!0,window.unitTestingFlag&&f.fire("clickbutton.clicked",r))},pointerUp:function(a){this.isActive()&&d.active===!0&&(this.animatable.getBoundingBox().hasPosition(a.position)&&d.clickUp&&q&&(d.clickUp(),window.unitTestingFlag&&f.fire("clickbutton.released",r)),q=!1)},pointerMove:function(a){this.isActive()&&d.active===!0&&(this.animatable.getBoundingBox().hasPosition(a.position)?(this.frameCount>=2&&this.animatable.setAnimation("hovered"),this.scalable.setScale(e(d.pushScale?d.pushScale:1.1,d.pushScale?d.pushScale:1.1)),n.isObject(o),window.unitTestingFlag&&f.fire("clickbutton.hovered",r)):(this.animatable.setAnimation("idle"),this.scalable.setScale(e(1,1)),n.isObject(o),window.unitTestingFlag&&f.fire("clickbutton.unhovered",r)))},setActivation:function(a){n.isBoolean(a)&&(d.active=a,a===!0?(o.setDraw(!0),p.setDraw(!1),this.animatable.setAnimation("idle")):a===!1&&(o.setDraw(!1),p.setDraw(!0),this.animatable.setAnimation("inactive")))},getActivation:function(){return d.active},update:function(a){n.isFunction(d.onUpdate)?d.onUpdate(a):this.base.update(a)},getTextBox:function(){return o},setAnimation:function(a){this.animatable.setAnimation(a)}});return r}}),glue.module.create("js/gui/dragon-effect",["glue","glue/loader","glue/baseobject","glue/math/vector","js/utils","js/game-objects/timer","glue/component/fadable"],function(a,b,c,d,e,f,g){"use strict";var h,i=function(){return function(){var a=d(),b=.5,c=!1,e=.5;return{start:function(b){c||(a.copy(b),c=!0)},draw:function(d){c&&(d.globalAlpha=e,d.save(),d.translate(a.x,a.y),d.scale(b,b),d.drawImage(h,-h.width/2,-h.height/2),d.restore(),8>b?b+=.025:c=!1,d.globalAlpha=1)}}}}();return function(){var a=65,j=b.getAsset("dragonFront"),k=b.getAsset("dragonMiddle"),l=b.getAsset("dragonEnd"),m=[],n=(d(),Math.PI/180),o=d(e.game.GAME_WIDTH/2,e.game.GAME_HEIGHT/2),p=e.game.GAME_WIDTH/2,q=90*Math.PI/180,r=0,s=0,t=3.5,u=5,v=[d(e.game.GAME_WIDTH/2,e.game.GAME_HEIGHT/2+1.4*p)],w=[],x=0,y=document.createElement("canvas"),z=y.getContext("2d"),A=!1,B=!0,C=function(){var a,b=w.length;for(a=0;b>a;++a)w[a].draw(z)},D=function(){x<w.length&&(w[x].start(m[0]),++x,f.setTimeout(D,200))},E=c(g).add({init:function(){var c,f=15;for(c=0;f>c;++c)m.push(d(e.game.GAME_WIDTH/2,-65+c*-a));for(y.width=e.game.GAME_WIDTH,y.height=e.game.GAME_HEIGHT,c=0;20>c;++c)w.push(i());h=b.getAsset("dragon_particle"),A=!1,x=0,this.fadable.setAlpha(1)},update:function(b){{var c,f,g,h,i=m.length;d()}for(c=0;i>c;++c)i>c+1&&(r*=.01,g=m[c],h=m[c+1],f=g.angle(h),h.x=g.x+Math.cos(f)*a,h.y=g.y+Math.sin(f)*a,h._angle=f,0===c&&(g._angle=f));g=m[0],s<=v.length-1?(f=g.angle(v[s]),g.x+=6*Math.cos(f),g.y+=6*Math.sin(f),g.distance(v[s])<=6.5&&(s>0&&(B=!1),++s),g.y>0&&0===s&&!A&&(D(),A=!0),g.x+=t):1===s&&(g.x=o.x+Math.cos(q)*p,g.y=o.y+1.4*Math.sin(q)*p,q+=n,q>Math.PI*(.2+u)&&v.push(d(e.game.GAME_WIDTH/2,-e.game.GAME_HEIGHT))),this.base.update(b)},draw:function(a){var b,c,d=m.length,e=a.context;if(e.globalAlpha=this.fadable.getAlpha(),e.drawImage(y,0,0),(B||0===this.fadable.getAlpha())&&(C(),d>0))for(b=0;d>b;++b)c=m[b],e.save(),e.translate(c.x,c.y),e.rotate(c._angle-Math.PI),0===b?e.drawImage(j,-j.width/2,-j.height/2):b===d-1?e.drawImage(l,-l.width/2,-l.height/2):(b===d-2?e.scale(.7,.7):b===d-2&&e.scale(.8,.8),e.drawImage(k,-k.width/2,-k.height/2)),e.restore();e.globalAlpha=1},destroy:function(){m.length=0,z.clearRect(0,0,y.width,y.height),w.length=0,s=0,v.length=0}});return E.z=e.zLayers.GUI+52,E}}),glue.module.create("js/gui/game-complete",["glue","glue/game","glue/loader","glue/baseobject","glue/event/system","glue/math/vector","glue/component/spritable","glue/component/fadable","glue/component/tweenable","js/gui/click-button","js/gui/textbox","js/gui/dragon-effect","js/utils","js/managers/tilemanager","js/managers/apimanager","js/managers/savestate-manager","glue/director","js/managers/audiomanager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return function(){var a,i,s,t,u=l(),v=!1,w=d(g,h).add({init:function(){this.spritable.setup({position:f(0,0),image:c.getAsset("popupOverlay")}),this.z=m.zLayers.GUI+50,this.fadable.setFadeSpeed(3),this.fadable.setAlpha(0)
}}),x=d(g).add({init:function(){this.spritable.setup({position:f(0,-960),image:c.getAsset("popupPagode")}),this.z=m.zLayers.GUI+53}}),y=k({text:"Game Complete!",font:m.fonts.mainFont,fontSize:400,fontColor:"#140A49",margin:f(16,16),align:"center",textBaseline:"middle",maxWidth:380,maxHeight:80,z:m.zLayers.GUI+56}).add({init:function(){this.setPosition(f(320,220))}}),a=d(g).add({init:function(){this.spritable.setup({position:f(18,300),image:c.getAsset("gameCompleteTextBar")})}}),z=k({text:"Congratulations!",font:m.fonts.mainFont,fontSize:400,fontColor:"#140A49",margin:f(16,16),align:"center",textBaseline:"middle",maxWidth:500,maxHeight:80,z:m.zLayers.GUI+56}).add({init:function(){this.setPosition(f(320,355))}}),A=j(167,425,{image:c.getAsset("button_wide"),text:"New Game",textFont:m.fonts.mainFont,textFontSize:27,textFontColor:"#FFFFFF",textMargin:f(16,10),shadowColor:"#000000",shadowBlur:0,shadowOffsetX:2,shadowOffsetY:2,z:m.zLayers.GUI+55,frameCount:2,pushScale:1.02,clickUp:function(){v&&(e.fire("gamecomplete.showNewGameConfirmation",!0),I("newGame"))},name:"buttonNewGame"}),B=j(167,525,{image:c.getAsset("button_wide"),text:"More Games",textFont:m.fonts.mainFont,textFontSize:27,textFontColor:"#FFFFFF",textMargin:f(16,10),shadowColor:"#000000",shadowBlur:0,shadowOffsetX:2,shadowOffsetY:2,z:m.zLayers.GUI+55,frameCount:2,pushScale:1.02,clickUp:function(){v&&(o.openBrandLink(),e.fire("gamecomplete.showMoreGames",!0))},name:"buttonMoreGames"}),C=j(190,638,{image:c.getAsset("buttonLevelSelect"),z:m.zLayers.GUI+55,frameCount:1,pushScale:1.02,clickUp:function(){v&&(e.fire("pause.levelselect",!0),H(!0),q.showScreen("LevelSelect"))},name:"buttonLevelSelect"}),D=j(340,638,{image:c.getAsset("buttonPuzzle"),z:m.zLayers.GUI+55,frameCount:1,pushScale:1.02,clickUp:function(){v&&(H(!0),e.fire("gamecomplete.scrollPaintings",4*m.game.GAME_WIDTH))},name:"buttonReplay"}),E="",F=d(h).add({init:function(){i=k({text:"Are you sure you want to quit?\nYou will lose all your progress",align:"center",font:m.fonts.textFont,fontSize:60,fontColor:"#28256E",margin:f(16,16),textBaseline:"middle",maxWidth:350,maxHeight:250}).add({init:function(){this.setPosition(f(m.game.GAME_WIDTH/2,470)),this.z=m.zLayers.GUI+50,this.setText("Are you sure you want to quit?\n\nYou will lose all your progress")}}),s=j(182,631,{image:c.getAsset("buttonNo"),fadable:!1,z:m.zLayers.GUI+60,frameCount:1,pushScale:1.02,clickUp:function(){J()},name:"buttonNo"}),t=j(355,631,{image:c.getAsset("buttonYes"),fadable:!1,z:m.zLayers.GUI+60,frameCount:1,pushScale:1.02,clickUp:function(){switch(E){case"newGame":window.unitTestingFlag||(e.fire("pause.home",!0),H(!0),p.clear(),q.showScreen("MainMenuScreen"));break;case"home":window.unitTestingFlag||(e.fire("pause.home",!0),H(!1),n.unloadCurrentLevel(),q.showScreen("MainMenuScreen"));break;case"levelSelect":window.unitTestingFlag||(e.fire("pause.levelselect",!0),H(!0),n.unloadCurrentLevel(),q.showScreen("LevelSelect"))}},name:"buttonYes"}),F.addChild(i),F.addChild(s),F.addChild(t)}}),G=function(){r.playSound("sfx_page_move"),w.fadable.fade(function(){},0,1),TweenLite.to(x.getPosition(),1,{y:0,ease:Quad.easeOut,onComplete:function(){v=!0,e.fire("gamecomplete.shown",!0),b.add(u)}})},H=function(a){r.playSound("sfx_page_move"),w.fadable.fade(function(){},1,0),u.fadable.fadeOut(function(){b.remove(u)}),TweenLite.to(x.getPosition(),1,{y:-960,ease:Quad.easeIn,onComplete:function(){v=!0,e.fire("gamecomplete.hidden",!0),v=!1,a===!0&&(x.getChildren().length=0,b.remove(w),b.remove(x))}})},I=function(b){x.getChildren();E=b,i.setText("newGame"===b?"Are you sure you want to start a new game?\n\nAll your saved progress will be deleted":"Are you sure you want to quit?\n\nYou will lose all your progress"),a.setActive(!1),z.setActive(!1),A.setActive(!1),B.setActive(!1),C.setActive(!1),D.setActive(!1),a.setVisible(!1),z.setVisible(!1),A.setVisible(!1),B.setVisible(!1),C.setVisible(!1),D.setVisible(!1),i.setVisible(!0),t.setVisible(!0),s.setVisible(!0),i.fadable.setAlpha(0),i.fadable.setFadeSpeed(2),i.fadable.fadeIn(function(){t.setActive(!0),s.setActive(!0)})},J=function(){var b=x.getChildren();index=b.indexOf(i),a.setVisible(!0),z.setVisible(!0),A.setVisible(!0),B.setVisible(!0),C.setVisible(!0),D.setVisible(!0),t.setActive(!1),s.setActive(!1),i.setVisible(!1),t.setVisible(!1),s.setVisible(!1),i.fadable.setAlpha(1),i.fadable.setFadeSpeed(2),i.fadable.fadeOut(function(){a.setActive(!0),z.setActive(!0),A.setActive(!0),B.setActive(!0),C.setActive(!0),D.setActive(!0)})},K=function(a){switch(a.name){case"buttonReplay":var b=buttonReplay.getClickUp();b();break;case"buttonLevelSelect":var b=C.getClickUp();b();break;case"buttonMoreGames":var b=B.getClickUp();b()}},L={setup:function(){e.on("paintings.gameEnded",this.show),e.on("clickbutton.released",K),b.add(w),b.add(x),x.addChild(y),x.addChild(D),x.addChild(B),x.addChild(C),x.addChild(A),x.addChild(a),x.addChild(z),x.addChild(F),J()},show:function(){e.fire("gamecomplete.showing"),G()},hide:function(){e.fire("gamecomplete.hiding"),H(!0)},getButtonMoreGames:function(){return B},getButtonReplay:function(){return buttonReplay},getButtonLevelSelect:function(){return C},destroy:function(){J(),H(!0),e.off("clickbutton.released",K),e.off("paintings.gameEnded",this.show),e.fire("gamecomplete.destroyed",!0),b.remove(w),b.remove(x),b.remove(u)}};return L}}),glue.module.create("js/gui/level-complete",["glue","glue/game","glue/loader","glue/baseobject","glue/director","glue/event/system","glue/math/vector","glue/component/rotatable","glue/component/scalable","glue/component/spritable","glue/component/fadable","js/gui/click-button","js/managers/levelmanager","js/managers/hintsmanager","js/managers/audiomanager","js/managers/tilemanager","js/utils","js/managers/apimanager","js/gui/textbox","js/game-objects/timer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return function(){var u,v,w,x,y,z=a.sugar,A=["Do good, reap good. Do evil, reap evil.","Wherever you go, go with all your heart.","It does not matter how slowly you go, as long as you do not stop.","To see what is right and not to do it is want of courage, or of principle.","An oppressive government is more to be feared than a tiger.","We should feel sorrow, but not sink under its oppression.","Study the past, if you would divine the future.","To be wronged is nothing, unless you continue to remember it.","What you do not want done to yourself, do not do to others.","The cautious seldom err.","Never give a sword to a man who cant dance.","The person attempting to travel two roads at once will get nowhere.","The coming of honor or disgrace must be a reflection of ones inner power.","Pride and excess bring disaster for man.","Happiness is the absence of the striving for happiness.","Life comes from the earth, and life returns to the earth.","I know the joy of fish in the river through my own joy, as I walk along the same river.","The supreme art of war is to subdue the enemy without fighting.","Pretend inferiority and encourage your enemys arrogance.","Know thyself. Know thy enemy. A thousand battles, a thousand victories.","The journey of a thousand miles begins with a single step.","Music in the soul can be heard by the universe.","Knowing others is wisdom. Knowing yourself is enlightenment.","Great acts are made up of small deeds.","To lead people, walk behind them.","An ant on the move does more than a dozing ox.","From caring comes courage.","Respond intelligently even to unintelligent treatment.","The words of truth are always a paradox.","Truth uttered before its time is always dangerous.","Friendship is one mind in two bodies.","We live not as we wish to, but as we can.","Every duty is a charge, but the charge of oneself is the root of all others.","No matter if it is a white cat or a black cat. As long as it can catch mice, it is a good cat.","All men are brothers.","Good luck seldom walks in pairs, but bad things never walk alone."],B=d(j,k).add({init:function(){this.spritable.setup({position:g(0,0),image:c.getAsset("popupOverlay")}),this.z=q.zLayers.GUI+80,this.fadable.setFadeSpeed(3),this.fadable.setAlpha(0)}}),C=d(j).add({init:function(){this.spritable.setup({position:g(0,-960),image:c.getAsset("popupPagode")}),this.z=q.zLayers.GUI+81},update:function(a){u&&this.base.update(a)},draw:function(a){u&&C.base.draw(a)}}),D=d(k).add({init:function(){this.fadable.setAlpha(1),this.setPosition(g(0,0))}}),E=d(k).add({init:function(){this.fadable.setAlpha(0),this.setPosition(g(0,0))}}),F=d(j).add({init:function(){this.spritable.setup({position:g(200,185),image:c.getAsset("levelCompleteText")}),this.z=q.zLayers.GUI+85}}),G=l(268,631,{name:"buttonReplay",image:c.getAsset("buttonReplay"),z:q.zLayers.GUI+85,frameCount:1,pushScale:1.02,clickUp:function(){(x||window.unitTestingFlag)&&(window.unitTestingFlag||(p.unloadCurrentLevel(),p.loadLevelTiles(m.getCurrentLevel()),"music_level"!=o.getCurrentlyPlayingMusic()&&o.playMusic("music_level",!0),hideLevelComplete()),f.fire("levelcomplete.replay",!0))}}),H=l(172,763,{name:"buttonNext",text:"Next",textFont:"japanese_brushregular",textFontSize:40,textFontColor:"#FFFFFF",textMargin:g(16,16),textOffset:g(-40,0),shadowColor:"#000000",shadowBlur:0,shadowOffsetX:2,shadowOffsetY:2,image:c.getAsset("buttonWide"),z:q.zLayers.GUI+85,frameCount:2,pushScale:1.02,clickUp:function(){(x||window.unitTestingFlag)&&(o.playSound("sfx_button_click"),switchToPresent())}}),I=d(j).add({init:function(){this.spritable.setup({position:g(60,-18),image:c.getAsset("buttonArrow")})}}),J=d(j).add({init:function(){this.spritable.setup({position:g(195,500),image:c.getAsset("resultScreen")}),this.z=q.zLayers.GUI+84}}),K=s({text:"Moves:\nBest:",font:"japanese_brushregular",fontSize:31,fontColor:"#28256E",maxWidth:254,maxHeight:129,margin:g(5,5)}).add({init:function(){this.setPosition(g(30,33))}}),L=s({font:"japanese_brushregular",fontSize:31,fontColor:"#28256E",align:"center",maxWidth:254,maxHeight:129,margin:g(5,5)}).add({init:function(){this.setPosition(g(190,33))}}),M=d(j).add({init:function(){this.spritable.setup({position:g(145,350),image:c.getAsset("starsContainer")}),this.z=q.zLayers.GUI+84}}),N=[d(j,h,i).add({init:function(){this.spritable.setup({position:g(67,95),image:c.getAsset("filledStar")})},draw:function(a){u&&y>=1&&this.base.draw(a)},update:function(a){u&&this.base.update(a)}}),d(j,h,i).add({init:function(){this.spritable.setup({position:g(177,67),image:c.getAsset("filledStar")})},draw:function(a){u&&y>=2&&this.base.draw(a)},update:function(a){u&&this.base.update(a)}}),d(j,h,i).add({init:function(){this.spritable.setup({position:g(289,95),image:c.getAsset("filledStar")})},draw:function(a){u&&y>=3&&this.base.draw(a)},update:function(a){u&&this.base.update(a)}})],O=[d(j,h,i,k).add({init:function(){this.spritable.setup({position:g(212,445),image:c.getAsset("starGlow")})},draw:function(a){u&&y>=1&&this.base.draw(a)},update:function(a){u&&this.base.update(a)}}),d(j,h,i,k).add({init:function(){this.spritable.setup({position:g(322,417),image:c.getAsset("starGlow")})},draw:function(a){u&&y>=2&&this.base.draw(a)},update:function(a){u&&this.base.update(a)}}),d(j,h,i,k).add({init:function(){this.spritable.setup({position:g(434,445),image:c.getAsset("starGlow")})},draw:function(a){u&&y>=3&&this.base.draw(a)},update:function(a){u&&this.base.update(a)}})],P=s({font:q.fonts.textFont,fontSize:30,fontColor:"#28256E",align:"center",margin:g(15,5),text:"You have unlocked the next chapter.\n\nClick the scroll to see it, or Next to continue playing!",maxWidth:350,maxHeight:400}).add({init:function(){this.setPosition(g(320,355))}}),Q=s({font:q.fonts.textFont,fontSize:30,fontColor:"#28256E",align:"center",margin:g(15,5),text:"You got a present:",maxWidth:350,maxHeight:40}).add({init:function(){this.setPosition(g(320,355))}}),R=s({font:q.fonts.textFont,fontSize:30,fontColor:"#28256E",align:"center",maxWidth:350,maxHeight:100,margin:g(5,5),text:"You got a hint"}).add({init:function(){this.setPosition(g(320,392))}}),S=s({font:q.fonts.textFont,fontSize:30,fontColor:"#28256E",align:"center",maxWidth:350,maxHeight:100,margin:g(5,5),text:'"Fear is the path to the dark side."'}).add({init:function(){this.setPosition(g(320,530))}}),T=s({font:q.fonts.textFont,fontSize:30,fontColor:"#28256E",align:"center",maxWidth:350,maxHeight:300,margin:g(5,5),text:""}).add({init:function(){this.setPosition(g(320,400))}}),U=d(j,i).add({init:function(){this.spritable.setup({image:c.getAsset("buttonHint"),position:g(320,455)}),this.setOrigin(g(66,0))}}),V=l(182,638,{name:"buttonLevelSelect",image:c.getAsset("buttonLevelSelect"),z:q.zLayers.GUI+85,frameCount:1,pushScale:1.02,clickUp:function(){(x||window.unitTestingFlag)&&(hideLevelComplete(!0),p.unloadCurrentLevel(),e.showScreen("LevelSelect"))}}),W=l(355,638,{name:"buttonStoryBook",image:c.getAsset("buttonPuzzle"),z:q.zLayers.GUI+85,frameCount:1,pushScale:1.02,clickUp:function(){(x||window.unitTestingFlag)&&(f.fire("pause.puzzle",!0),hideLevelComplete(!0),p.unloadCurrentLevel(),e.showScreen("Paintings"))}}),X=l(355,638,{name:"buttonNextLevel",image:c.getAsset("button_arrow_right"),z:q.zLayers.GUI+85,frameCount:2,pushScale:1.02,clickUp:function(){if(x||window.unitTestingFlag){o.playSound("sfx_button_click");var a=m.getNextLevel();z.isDefined(a)&&!z.isEmpty(a)&&m.setCurrentLevel(a),r.requestGameBreak(),hideLevelComplete(),f.fire("levelcomplete.loadnextlevel",!0),f.fire("levelcomplete.nextlevel",!0)}}});return buttonContinue=l(172,763,{name:"buttonContinue",image:c.getAsset("buttonWide"),z:q.zLayers.GUI+85,frameCount:2,text:"Next",textFont:q.fonts.mainFont,textFontSize:40,textFontColor:"#FFFFFF",textMargin:g(16,16),textOffset:g(-40,0),shadowColor:"#000000",shadowBlur:0,shadowOffsetX:2,shadowOffsetY:2,pushScale:1.02,clickUp:function(){if(x||window.unitTestingFlag){var a=m.getNextLevel();z.isDefined(a)&&!z.isEmpty(a)&&m.setCurrentLevel(a),r.requestGameBreak(),hideLevelComplete(),f.fire("levelcomplete.loadnextlevel",!0),f.fire("levelcomplete.nextlevel",!0)}}}),buttonContinueStory=l(172,763,{name:"buttonContinueStory",image:c.getAsset("buttonWide"),z:q.zLayers.GUI+85,frameCount:2,text:"Scroll",textFont:q.fonts.mainFont,textFontSize:40,textFontColor:"#FFFFFF",textMargin:g(16,16),textOffset:g(-5,-5),shadowColor:"#000000",shadowBlur:0,shadowOffsetX:2,shadowOffsetY:2,pushScale:1.02,clickUp:function(){(x||window.unitTestingFlag)&&(o.stopAllMusic(),f.fire("pause.puzzle",!0),hideLevelComplete(!0),p.unloadCurrentLevel(),e.showScreen("Paintings"))}}),buttonContinueArrow=d(j).add({init:function(){this.spritable.setup({position:g(60,-18),image:c.getAsset("buttonArrow")})}}),switchToPresent=function(){var a={a:1};TweenLite.to(a,.2,{a:0,onUpdate:function(){D.fadable.setAlpha(a.a),O[0].fadable.setAlpha(a.a),O[1].fadable.setAlpha(a.a),O[2].fadable.setAlpha(a.a),H.fadable.setAlpha(a.a)},onComplete:function(){if(D.setActive(!1),E.setActive(!0),m.getCurrentLevel().getId()===q.game.NUMBER_OF_LEVELS-1||m.getNextLevel().getId()%10!==0){X.setVisible(!1),X.setActive(!1),buttonContinueStory.setVisible(!1),buttonContinueStory.setActive(!1),P.setVisible(!1),P.setActive(!1);var b=Math.ceil(5*Math.random());if(m.getCurrentLevel().getId()===q.game.NUMBER_OF_LEVELS-1)U.setVisible(!1),U.setActive(!1),S.setActive(!1),S.setVisible(!1),T.setVisible(!0),T.setText("Congratulations!\nYour quest is complete!\n\nNow finish the legend's final chapter..."),R.setVisible(!1),R.setActive(!1),buttonContinueStory.setVisible(!0),buttonContinueStory.setActive(!0),buttonContinue.setVisible(!1),buttonContinue.setActive(!1),X.setActive(!1),W.setActive(!1),X.setVisible(!1),W.setVisible(!1),V.setActive(!1),V.setVisible(!1),Q.setVisible(!1),Q.setActive(!1);else if(3>=b)U.spritable.setImage(c.getAsset("buttonFortuneCookie")),U.scalable.setScale(g(.75,.75)),U.setPosition(g(320,355)),S.setVisible(!0),S.setText(A[Math.floor(Math.random()*A.length)]),R.setVisible(!1),R.setActive(!1),Q.setVisible(!1),Q.setActive(!1);else{for(var d=Math.ceil(3*Math.random()),e=0;d>e;e++)n.addHint();U.spritable.setImage(c.getAsset("buttonHint")),U.scalable.setScale(g(1,1)),U.setPosition(g(320,455)),R.setText(d+" Hint"+(1!==d?"s":"")),S.setVisible(!1)}U.setOrigin(g(U.getDimension().width/2,0))}else W.setVisible(!1),W.setActive(!1),Q.setVisible(!1),Q.setActive(!1),R.setVisible(!1),R.setActive(!1),S.setVisible(!1),S.setActive(!1),U.setVisible(!1),U.setActive(!1),buttonContinue.setVisible(!1),buttonContinue.setActive(!1);TweenLite.to(a,.2,{a:1,onUpdate:function(){E.fadable.setAlpha(a.a),buttonContinue.fadable.setAlpha(a.a),W.fadable.setAlpha(a.a),V.fadable.setAlpha(a.a),buttonContinueStory.fadable.setAlpha(a.a),X.fadable.setAlpha(a.a)}})}})},resetLayout=function(){D.setActive(!0),D.fadable.setAlpha(1),O[0].fadable.setAlpha(1),O[1].fadable.setAlpha(1),O[2].fadable.setAlpha(1),H.fadable.setAlpha(1),E.setActive(!1),E.fadable.setAlpha(0),buttonContinue.fadable.setAlpha(0),W.fadable.setAlpha(0),V.fadable.setAlpha(0),buttonContinueStory.fadable.setAlpha(0),X.fadable.setAlpha(0),P.setVisible(!0),P.setActive(!0),buttonContinueStory.setVisible(!0),buttonContinueStory.setActive(!0),X.setVisible(!0),X.setActive(!0),V.setVisible(!0),V.setActive(!0),W.setVisible(!0),W.setActive(!0),Q.setVisible(!0),Q.setActive(!0),R.setVisible(!0),R.setActive(!0),S.setVisible(!0),S.setActive(!0),U.setVisible(!0),U.setActive(!0),buttonContinue.setVisible(!0),buttonContinue.setActive(!0),T.setVisible(!1)},showLevelComplete=function(){o.playSound("sfx_page_move");var a=N[0],b=N[1],c=N[2],d=O[0],e=O[1],h=O[2];C.init(),u=!0,a.setOrigin(g(a.spritable.getImage().width/2,a.spritable.getImage().height/2)),b.setOrigin(g(b.spritable.getImage().width/2,b.spritable.getImage().height/2)),c.setOrigin(g(c.spritable.getImage().width/2,c.spritable.getImage().height/2)),a.scalable.setScale(g(0,0)),b.scalable.setScale(g(0,0)),c.scalable.setScale(g(0,0)),d.setOrigin(g(d.spritable.getImage().width/2,d.spritable.getImage().height/2)),e.setOrigin(g(e.spritable.getImage().width/2,e.spritable.getImage().height/2)),h.setOrigin(g(h.spritable.getImage().width/2,h.spritable.getImage().height/2)),d.scalable.setScale(g(0,0)),e.scalable.setScale(g(0,0)),h.scalable.setScale(g(0,0)),d.fadable.setAlpha(1),e.fadable.setAlpha(1),h.fadable.setAlpha(1),y=m.getCurrentLevel().getLastStarsCollected(),L.setText(m.getCurrentLevel().getLastMoveScore()+"\n"+m.getCurrentLevel().getBestMoveScore()),TweenLite.to(C.getPosition(),1,{y:0,ease:Quad.easeOut,onComplete:function(){switch(m.getCurrentLevel().setState(q.levelStates.COMPLETED),x=!0,f.fire("levelcomplete.shown"),y){case 1:o.playSound("sfx_stars1");break;case 2:o.playSound("sfx_stars2");break;case 3:o.playSound("sfx_stars3")}animateStar(a,d),t.setTimeout(function(){animateStar(b,e)},100),t.setTimeout(function(){animateStar(c,h)},200)}}),B.fadable.fade(function(){},0,1)},hideLevelComplete=function(a){o.playSound("sfx_page_move"),x=!1,B.fadable.fade(function(){},1,0),TweenLite.to(C.getPosition(),1,{y:-960,ease:Quad.easeIn,onComplete:function(){u=!1,a&&(b.remove(C),b.remove(B)),f.fire("levelcomplete.hidden")}})},animateStar=function(a,b){var c={x:0};TweenLite.to(c,.7,{x:360,ease:Quad.easeIn,onUpdate:function(){a.rotatable.setAngleDegree(c.x)}}),TweenLite.to(a.scalable.getScale(),.7,{x:1.5,y:1.5,ease:Quad.easeIn,onComplete:function(){TweenLite.to(a.scalable.getScale(),.5,{x:1,y:1,ease:Quad.easeIn,onComplete:function(){x=!0}})}});var d={x:Math.round(360*Math.random()),y:1};b.rotatable.setAngleDegree(d.x),TweenLite.to(b.scalable.getScale(),.7,{x:1,y:1,ease:Quad.easeIn,onComplete:function(){TweenLite.to(d,2,{x:d.x+360,ease:Quad.easeOut,onUpdate:function(){b.rotatable.setAngleDegree(d.x)}})}})},onClickUp=function(a){switch(a.name){case"buttonReplay":var b=G.getClickUp();b();break;case"buttonNext":var b=H.getClickUp();b()}},object={setup:function(a){f.on("tilemanager.levelsucceded",this.show),f.on("clickbutton.released",onClickUp);var a=a?a:{};u=!1,v=a.nextLevel||-1,w=a.currentLevel||-1,b.add(B),b.add(C),0===C.getChildren().length&&(C.addChild(F),C.addChild(D),D.addChild(G),D.addChild(H),H.addChild(I),D.addChild(O[0]),D.addChild(O[1]),D.addChild(O[2]),D.addChild(M),M.addChild(N[0]),M.addChild(N[1]),M.addChild(N[2]),D.addChild(J),J.addChild(K),J.addChild(L),C.addChild(E),E.addChild(P),E.addChild(Q),E.addChild(R),E.addChild(S),E.addChild(U),E.addChild(V),E.addChild(W),buttonContinue.addChild(buttonContinueArrow),E.addChild(buttonContinue),E.addChild(buttonContinueStory),E.addChild(X),E.addChild(T)),x=window.unitTestingFlag?!0:!1},getButtonReplay:function(){return G},getButtonNext:function(){return H},show:function(){resetLayout(),f.fire("levelcomplete.showing"),showLevelComplete()},hide:function(){f.fire("levelcomplete.hiding"),hideLevelComplete()},destroy:function(){b.remove(B),hideLevelComplete(!0),f.off("clickbutton.released",onClickUp),f.off("tilemanager.levelsucceded",this.show)}},object}}),glue.module.create("js/gui/pause",["glue","glue/game","glue/loader","glue/baseobject","glue/event/system","glue/math/vector","glue/component/spritable","glue/component/fadable","glue/component/tweenable","js/gui/click-button","js/gui/toggle-button","js/gui/textbox","js/utils","js/managers/apimanager","js/managers/tilemanager","js/managers/audiomanager","js/managers/savestate-manager","glue/director"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return function(){var a,s,t,u=!1,v=!1,w=d(g,h).add({init:function(){this.spritable.setup({position:f(0,0),image:c.getAsset("popupOverlay")}),this.z=m.zLayers.GUI+50,this.fadable.setFadeSpeed(3),this.fadable.setAlpha(0),this.updateWhenPaused=!0}}),x=d(g,i).add({init:function(){this.spritable.setup({position:f(0,-960),image:c.getAsset("popupPagode")}),this.z=m.zLayers.GUI+51},update:function(a){v&&this.base.update(a)},draw:function(a){v&&this.base.draw(a)},updateWhenPaused:!0}),y=(d(g).add({init:function(){this.spritable.setup({position:f(0,0),image:c.getAsset("examplePause")}),this.z=m.zLayers.GUI+54}}),d(g).add({init:function(){this.spritable.setup({position:f(210,205),image:c.getAsset("pauseText")}),this.z=m.zLayers.GUI+55},updateWhenPaused:!0})),z=j(483,275,{image:c.getAsset("button_howToPlay"),frameCount:1,pushScale:1.02,z:m.zLayers.GUI+4,clickUp:function(){p.playSound("sfx_button_click"),L("howToPlay")},name:"howToPlayButton"}),A=k(493,385,{image:c.getAsset("buttonSound"),z:m.zLayers.GUI+55,frameCount:2,pushScale:1.02,onToggle:function(a){u&&(p.muteSound(a===!0?!0:!1),p.playSound("sfx_button_mute"),e.fire("pause.toggleSound",!0))},name:"buttonSound"}),B=k(493,465,{image:c.getAsset("buttonMusic"),z:m.zLayers.GUI+55,frameCount:2,pushScale:1.02,onToggle:function(a){u&&(a===!0?p.muteMusic(!0):(p.muteMusic(!1),"GameScreen"===r.getActiveScreen().getName()?p.playMusic("music_level",!0):p.playMusic("music_mainmenu",!0)),p.playSound("sfx_button_mute"),e.fire("pause.toggleMusic",!0))},name:"buttonMusic"}),C=j(170,390,{image:c.getAsset("buttonPlaySmall"),z:m.zLayers.GUI+55,frameCount:1,pushScale:1.02,clickUp:function(){u&&(p.playSound("sfx_button_click"),u=!1,e.fire("pause.resume",!0),K())},name:"buttonPlay"}),D=j(165,500,{image:c.getAsset("button_moregames"),z:m.zLayers.GUI+55,frameCount:1,pushScale:1.02,clickUp:function(){u&&(p.playSound("sfx_button_click"),n.openMoreGames(),e.fire("pause.showMoreGames",!0))},name:"buttonMoreGames"}),E=j(153,631,{image:c.getAsset("buttonPuzzle"),z:m.zLayers.GUI+55,frameCount:1,pushScale:1.02,clickUp:function(){(u||window.unitTestingFlag)&&(p.playSound("sfx_button_click"),L("puzzle"),e.fire("pause.showPuzzle",!0))},name:"buttonPuzzle"}),F=j(268,631,{image:c.getAsset("buttonHome"),z:m.zLayers.GUI+55,frameCount:1,pushScale:1.02,clickUp:function(){(u||window.unitTestingFlag)&&(p.playSound("sfx_button_click"),L("home"),e.fire("pause.showHome",!0))},name:"buttonLevelSelect"}),G=j(384,631,{image:c.getAsset("buttonLevelSelect"),z:m.zLayers.GUI+55,frameCount:1,pushScale:1.02,clickUp:function(){(u||window.unitTestingFlag)&&(p.playSound("sfx_button_click"),L("levelSelect"),e.fire("pause.showLevelSelect",!0))},name:"buttonLevelSelect"}),H="",I=d(h).add({init:function(){a=l({text:"Are you sure you want to leave the game?\n\nYou'll lose your level progress.",align:"center",font:m.fonts.textFont,fontSize:60,fontColor:"#28256E",margin:f(16,16),textBaseline:"middle",maxWidth:350,maxHeight:250}).add({init:function(){this.setPosition(f(m.game.GAME_WIDTH/2,470)),this.z=m.zLayers.GUI+50,this.setText("Are you sure you want to leave the game?\n\nYou'll lose your level progress.")}}),s=j(182,631,{image:c.getAsset("buttonNo"),fadable:!1,z:m.zLayers.GUI+60,frameCount:1,pushScale:1.02,clickUp:function(){p.playSound("sfx_button_cancel"),M()},name:"buttonNo"}),t=j(355,631,{image:c.getAsset("buttonYes"),fadable:!1,z:m.zLayers.GUI+60,frameCount:1,pushScale:1.02,clickUp:function(){switch(e.fire("confirmation.agreed",{}),H){case"howToPlay":window.unitTestingFlag||(e.fire("pause.home",!0),K(!0),o.unloadCurrentLevel(),r.showScreen("HowToPlay"));break;case"puzzle":e.fire("pause.showPuzzle",!0),window.unitTestingFlag||(e.fire("pause.puzzle",!0),K(!0),o.unloadCurrentLevel(),r.showScreen("Paintings"));break;case"home":window.unitTestingFlag||(e.fire("pause.home",!0),K(!0),o.unloadCurrentLevel(),r.showScreen("MainMenuScreen"));break;case"levelSelect":window.unitTestingFlag||(e.fire("pause.levelselect",!0),K(!0),o.unloadCurrentLevel(),r.showScreen("LevelSelect"))}},name:"buttonYes"}),I.addChild(a),I.addChild(s),I.addChild(t)}}),J=function(){p.playSound("sfx_page_move"),v=!0,w.fadable.fade(function(){},0,1),M(),TweenLite.to(x.getPosition(),1,{y:0,ease:Quad.easeOut,onComplete:function(){u=!0,e.fire("pause.shown",!0)}})},K=function(a){p.playSound("sfx_page_move"),w.fadable.fade(function(){},1,0),b.resume(),TweenLite.to(x.getPosition(),1,{y:-960,ease:Quad.easeIn,onComplete:function(){e.fire("pause.hidden",!0),u=!1,a&&(x.getChildren().length=0,b.remove(x),b.remove(w))}})},L=function(b){x.getChildren();H=b,C.setActive(!1),D.setActive(!1),E.setActive(!1),F.setActive(!1),G.setActive(!1),z.setActive(!1),C.setVisible(!1),D.setVisible(!1),E.setVisible(!1),F.setVisible(!1),G.setVisible(!1),z.setVisible(!1),a.setVisible(!0),t.setVisible(!0),s.setVisible(!0),a.fadable.setAlpha(0),a.fadable.setFadeSpeed(2),a.fadable.fadeIn(function(){t.setActive(!0),s.setActive(!0)})},M=function(){var b=x.getChildren();index=b.indexOf(a),C.setVisible(!0),D.setVisible(!0),E.setVisible(!0),F.setVisible(!0),G.setVisible(!0),z.setVisible(!0),t.setActive(!1),s.setActive(!1),a.setVisible(!1),t.setVisible(!1),s.setVisible(!1),a.fadable.setAlpha(1),a.fadable.setFadeSpeed(2),a.fadable.fadeOut(function(){C.setActive(!0),D.setActive(!0),E.setActive(!0),F.setActive(!0),G.setActive(!0),z.setActive(!0)})},N=function(a){switch(a.name){case"buttonPlay":var b=C.getClickUp();b&&b();break;case"buttonHowToPlay":var b=z.getClickUp();b&&b();break;case"buttonMoreGames":var b=D.getClickUp();b&&b();break;case"buttonPuzzle":var b=E.getClickUp();b&&b();break;case"buttonLevelSelect":var b=G.getClickUp();b&&b()}},O=function(a){switch(a.name){case"buttonSound":var b=A.getOnToggle();b(A.getToggleState());break;case"buttonMusic":var b=B.getOnToggle();b(B.getToggleState())}},P={setup:function(){e.on("game.pause",this.show),e.on("clickbutton.released",N),e.on("togglebutton.toggle",O),b.add(w),b.add(x),x.addChild(y),x.addChild(C),x.addChild(z),x.addChild(B),x.addChild(A),n.isAvailable()?x.addChild(D):C.setPosition(f(320,500)),x.addChild(E),x.addChild(F),x.addChild(G),x.addChild(I),B.setToggleState(q.load("muteMusic")?!0:!1),A.setToggleState(q.load("muteSound")?!0:!1),t.setActive(!1),s.setActive(!1)},getButtonPlay:function(){return C},getButtonMoreGames:function(){return D},getButtonMusic:function(){return B},getButtonSound:function(){return A},getButtonPuzzle:function(){return E},getButtonLevelSelect:function(){return G},show:function(){b.pause(),J()},hide:function(){K()},destroy:function(){M(),K(!0),e.off("game.pause",this.show),e.off("clickbutton.released",N),e.off("togglebutton.toggle",O)}};return P}}),glue.module.create("js/gui/textbox",["glue","glue/math/vector","glue/math/dimension","glue/math/rectangle","glue/baseobject","glue/component/scalable","glue/component/rotatable","glue/component/fadable"],function(a,b,c,d,e,f,g,h){"use strict";return function(d){var i,j,k,l,m,n,o,p,q=a.sugar,r="",s=!0,t=!0,u="normal",v=["black","white"],w="left",x="arial",y=37,z="black",A=[0],B=0,C=["black"],D=[!1],E="top",F=[],G=b(0,0),H=0,I=null,J=document.createElement("canvas"),K=J.getContext("2d"),L=1,M=1,N="source-over",O=function(a){var b,c,e;if(a.gradient&&(l=a.gradient),a.gradientColors)for(v=[],b=0,c=a.gradientColors.length;c>b;++b)v[b]=a.gradientColors[b];for(a.overlaySprite&&(I=a.overlaySprite,I.initialized||(I.init(),I.initialized=!0)),a.align&&(w=a.align),q.isDefined(a.ySpacing)&&(H=a.ySpacing),a.font&&(x=a.font),q.isDefined(a.fontSize)&&(y=a.fontSize),a.fontColor&&(z=a.fontColor),a.textBaseline&&(E=a.textBaseline),q.isDefined(a.fontWeight)&&(u=a.fontWeight),q.isDefined(a.lineWidth)&&(A=q.isArray(a.lineWidth)?a.lineWidth:[a.lineWidth]),a.strokeStyle&&(C=q.isArray(a.strokeStyle)?a.strokeStyle:[a.strokeStyle]),a.innerStroke&&(D=q.isArray(a.innerStroke)?a.innerStroke:[a.innerStroke]),e=Math.max(A.length,C.length,D.length);A.length<e;)A.push(0);for(;C.length<e;)C.push("black");for(;D.length<e;)D.push(!1);for(B=0,b=0,c=A.length;c>b;++b)B=Math.max(B,2*A[b]);q.isDefined(a.shadowColor)&&(m=a.shadowColor),q.isDefined(a.shadowBlur)&&(n=a.shadowBlur),q.isDefined(a.shadowOffsetX)&&(o=a.shadowOffsetX),q.isDefined(a.shadowOffsetY)&&(p=a.shadowOffsetY),q.isDefined(a.linebreaks)&&(t=a.linebreaks),j=q.isDefined(a.maxWidth)?a.maxWidth:null,k=q.isDefined(a.maxHeight)?a.maxHeight:null,q.isDefined(a.margin)&&(G=a.margin),a.textID?(i=a.textID,V.setTextID(i,j,k)):V.setText(a.text?d.text:r)},P=function(){{var a,d,e,f,g,h=b(B/2,B/2),i=V.getOrigin();V.getPosition()}switch(J.width=L+B+2*G.x,J.height=M+B+2*G.y,V.setDimension(c(J.width,J.height)),V.updateBoundingBox(),I&&(g=J.width/I.getDimension().width,I.scalable&&I.scalable.setScale(b(g,g))),w){default:case"left":i.x=0;break;case"center":i.x=G.x+L/2;break;case"right":i.x=G.x+L}switch(E){default:case"top":i.y=0;break;case"middle":i.y=M/2;break;case"bottom":i.y=M}for(S(K),a=0;a<F.length;++a){for(K.fillStyle=q.isDefined(F[a].gradient)?F[a].gradient:z,e=h.x+i.x,f=h.y+(a+1)*y+G.y+H*a,K.globalCompositeOperation="source-over",m&&(K.shadowColor=m,K.shadowBlur=n,K.shadowOffsetX=o,K.shadowOffsetY=p),K.fillText(F[a].string,e,f),q.isEmpty(I)||(K.globalCompositeOperation="source-atop",I.setPosition(b(e,f-y)),I.draw({canvas:J,context:K})),K.globalCompositeOperation="source-atop",d=0;d<A.length;++d)A[d]&&D[d]&&(K.lineWidth=2*A[d],K.strokeStyle=C[d],K.strokeText(F[a].string,e,f));for(K.globalCompositeOperation="destination-over",d=A.length-1;d>=0;--d)A[d]&&!D[d]&&(K.lineWidth=2*A[d],K.strokeStyle=C[d],K.strokeText(F[a].string,e,f))}R(K)},Q=function(a){s&&a.context.drawImage(J,0,0)},R=function(a){a.textAlign="left",a.textBaseline="bottom",a.lineWidth=0,a.strokeStyle="black",a.fillStyle="black",a.globalCompositeOperation=N,a.restore()},S=function(a){a.save(),a.textAlign=w,a.textBaseline="bottom",a.font=u+" "+y.toString()+"px "+x,N=a.globalCompositeOperation},T=function(){var a,b,c,d,e,f,g,h,i=(""+r).split("\n");for(F.length=[],L=1,M=1,S(K),c=0;c<i.length;++c){if(b=i[c],a=K.measureText(b).width,t&&!q.isEmpty(j)&&a>j){for(d=0;a>j;)if(++d,f=b.slice(0,b.length-d),a=K.measureText(f).width,d===b.length){d=b.length-1;break}h=f.lastIndexOf(" "),h>0&&h!=f.length&&(d+=f.length-h),g=b.slice(b.length-d,b.length),b=b.slice(0,b.length-d)," "===g.charAt(0)&&(g=g.slice(1)),0!=g.length&&i.splice(c+1,0,g),a=K.measureText(b).width}a>L&&(L=a),e=U(a,c),F.push({string:b,width:a,gradient:e}),M+=y+H}},U=function(a,b){var c,d,e,f,g,h={x:0,y:0},i={x:0,y:0};if(l){switch(f=(y+H)*b,g=(y+H)*(b+1),l){default:case"top-down":h.x=0,h.y=f,i.x=0,i.y=g;break;case"down-top":h.x=0,h.y=g,i.x=0,i.y=f;break;case"left-right":h.x=0,h.y=0,i.x=a,i.y=0;break;case"right-left":h.x=a,h.y=0,i.x=0,i.y=0;break;case"topleft-downright":h.x=0,h.y=f,i.x=a,i.y=g;
break;case"topright-downleft":h.x=a,h.y=f,i.x=0,i.y=g;break;case"downleft-topright":h.x=0,h.y=g,i.x=a,i.y=f;break;case"downright-topleft":h.x=a,h.y=g,i.x=0,i.y=f}for(h.x+=B/2,h.y+=B/2,i.x+=B/2,i.y+=B/2,c=K.createLinearGradient(h.x,h.y,i.x,i.y),e=0;e<v.length;++e)d=e*(1/(v.length-1)),c.addColorStop(d,v[e]);return c}},V=e(f,g,h).add({getText:function(){return r},setText:function(a,b){for(b&&O(b),r=a,T();y>0&&(!q.isEmpty(j)&&L>j||!q.isEmpty(k)&&M>k);)y-=1,T();P()},setTextID:function(a){i=a},setDraw:function(a){q.isBoolean(a)&&(s=a)}});return V.register("draw",Q,"spritable"),d&&O(d),V}}),glue.module.create("js/gui/toggle-button",["glue","glue/game","glue/baseobject","glue/math/dimension","glue/math/vector","glue/event/system","glue/component/animatable","glue/component/clickable","glue/component/hoverable","glue/component/scalable","glue/component/fadable","js/utils","js/gui/textbox"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=a.sugar;return function(a,d,i){if(!n.isNumber(a)||!n.isNumber(d)||!n.isObject(i))throw"Arguments for Toggle Button are invalid";var o,p=!1,q=!1,r=c(g,h,j,k).add({init:function(){this.animatable.setup({position:e(a,d),image:i.image,animation:{frameCount:i.frameCount?i.frameCount:5,animations:{idle:{startFrame:0,endFrame:0},toggled:{startFrame:1,endFrame:1},hovered:{startFrame:2,endFrame:2},toggled_hovered:{startFrame:3,endFrame:3},inactive:{startFrame:4,endFrame:4}}}}),this.z=i.z||l.zLayers.GUI,this.name=i.name||"togglebutton",this.frameCount=i.frameCount?i.frameCount:5,n.isBoolean(i.active)||(i.active=!0),this.animatable.setAnimation(i.active!==!0?"inactive":"idle"),n.isObject(i.origin)?n.isVector(i.origin)&&this.setOrigin(i.origin):(this.setPosition(e(this.getPosition().x+this.animatable.getDimension().width/2,this.getPosition().y+this.animatable.getDimension().height/2)),this.setOrigin(e(this.animatable.getDimension().width/2,this.animatable.getDimension().height/2))),i.text&&(o=m({text:i.text,align:"center",textBaseline:"middle",maxWidth:this.animatable.getDimension().width,maxHeight:this.animatable.getDimension().height}),o.z=this.z+1,b.add(o))},getOnToggle:function(){return i.onToggle},getToggleState:function(){return p},setToggleState:function(a){n.isBoolean(a)&&(p=a,this.animatable.setAnimation(a?"toggled":"idle"))},pointerDown:function(a){i.active===!0&&this.animatable.getBoundingBox().hasPosition(a.position)&&(q=!0)},pointerUp:function(a){i.active===!0&&(this.animatable.getBoundingBox().hasPosition(a.position)&&i.onToggle&&q&&(p=!p,i.onToggle(p),this.animatable.setAnimation(p?"toggled":"idle"),window.unitTestingFlag&&f.fire("togglebutton.toggle",r)),q=!1)},pointerMove:function(a){i.active===!0&&(this.animatable.getBoundingBox().hasPosition(a.position)?(this.frameCount>2&&this.animatable.setAnimation(p?"toggled_hovered":"hovered"),this.scalable.setScale(e(i.pushScale?i.pushScale:1.1,i.pushScale?i.pushScale:1.1)),n.isObject(o)&&o.scalable.setScale(e(i.pushScale?i.pushScale:1.1,i.pushScale?i.pushScale:1.1)),window.unitTestingFlag&&f.fire("togglebutton.hovered",r)):(this.animatable.setAnimation(p?"toggled":"idle"),this.scalable.setScale(e(1,1)),n.isObject(o)&&o.scalable.setScale(e(1,1)),window.unitTestingFlag&&f.fire("togglebutton.unhovered",r)))},setActivation:function(a){n.isBoolean(a)&&(i.active=a,a===!0?this.animatable.setAnimation(p?"toggled":"idle"):a===!1&&this.animatable.setAnimation("inactive"))},getActivation:function(){return i.active},update:function(a){this.base.update(a),n.isObject(o)&&o.setPosition(e(this.getPosition().x,this.getPosition().y))},getTextBox:function(){return o},destroy:function(){n.isObject(o)&&b.remove(o)}});return r}}),glue.module.get(["glue","glue/game","glue/loader","glue/event/system","glue/math/dimension","glue/math/vector","glue/director","js/assetlist","js/managers/tilemanager","js/managers/pathmanager","js/managers/apimanager","js/utils","js/screens/mainmenu","js/screens/splashscreen","js/screens/game","js/screens/how-to-play","js/screens/levelselect","js/screens/paintings","js/game-objects/timer","js/screens/credits"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";var u=a.sugar,v=function(){b.setup({name:"Flow",canvas:{id:"canvas",dimension:e(l.game.GAME_WIDTH,l.game.GAME_HEIGHT)},develop:{debug:!1},asset:h,sort:!0,sortType:b.SORT_TYPE_STABLE},function(){var a=m(),b=n(),c=o(),d=p(),e=q(),f=r(),h=t();g.addScreen(a),g.addScreen(b),g.addScreen(c),g.addScreen(d),g.addScreen(f),g.addScreen(e),g.addScreen(h),g.showScreen("SplashScreen"),s.setTimeout(function(){a.setDoorSpeed(300)},500)})};u.isDefined(window.GameAPI)?window.GameAPI.loadAPI(function(a){var b=a.Branding.getLogo().image;k.setAPI(a),u.isDefined(b)&&(h.remoteImage={brandLogo:b}),v()}):v()}),glue.module.create("js/managers/apimanager",["glue","glue/game"],function(a,b){"use strict";var c=null,d=a.sugar,e=function(){return null!==c&&!d.isDefined(c.Branding.getLink("more_games").error)&&!d.isDefined(c.Branding.getLogo().error)};return{isAvailable:e,setAPI:function(a){c=a},getAPI:function(){return c},openMoreGames:function(){e()&&c.Branding.getLink("more_games").action()},openBrandLink:function(){e()&&c.Branding.getLogo().action()},requestGameBreak:function(a,f){e()&&c.GameBreak.request(function(){b.pause(),d.isFunction(a)&&a()},function(){b.resume(),d.isFunction(f)&&f()})}}}),glue.module.create("js/managers/audiomanager",["glue","glue/loader","glue/event/system","js/assetlist","js/managers/savestate-manager"],function(a,b,c,d,e){var f,g,h=a.sugar,i=e.load("muteSound")||!1,j=e.load("muteMusic")||!1,k=function(a,b){var c,d,e;if(h.isDefined(g))for(h.isDefined(b)&&g.loop(b),g.play(a),c=0,d=g._audioNode.length;d>c;++c)if(e=g._audioNode[c],e._sprite===a){e.timerID=g._onendTimer[g._onendTimer.length-1];break}};obj={name:"audioManager",setVolume:function(){},playSound:function(a,b){i||k(a,b||!1)},stopSound:function(a){var b,c,d;if(h.isDefined(g))for(b=0,c=g._audioNode.length;c>b;++b)d=g._audioNode[b],d._sprite!==a||d.paused||g.stop(d.id,d.timerID)},getCurrentlyPlayingMusic:function(){return f},playMusic:function(a,b){j||(f=a,k(a,b),n=a)},stopMusic:function(a){var b,c,d;if(h.isDefined(g))for(b=0,c=g._audioNode.length;c>b;++b)d=g._audioNode[b],d._sprite!==a||d.paused||g.stop(d.id,d.timerID)},muteSound:function(a){i=a,e.save("muteSound",a),i&&this.stopAllSound()},muteMusic:function(a){j=a,e.save("muteMusic",a),j&&obj.stopAllMusic()},stopAllSound:function(){var a,b,c;if(h.isDefined(g))for(a=0,b=g._audioNode.length;b>a;++a)c=g._audioNode[a],c._sprite&&"sfx"===c._sprite.substring(0,3)&&!c.paused&&g.stop(c.id,c.timerID)},stopAllMusic:function(){var a,b,c;if(h.isDefined(g))for(a=0,b=g._audioNode.length;b>a;++a)c=g._audioNode[a],c._sprite&&"music"===c._sprite.substring(0,5)&&!c.paused&&g.stop(c.id,c.timerID)},init:function(){g=b.getAsset("flow_music")},getMusic:function(){return music},getSound:function(){return sound}};{var l,m,n="",o=!0,p=function(a){a?(l=i,m=j,obj.muteMusic(!0),obj.muteSound(!0),o=!1):o||(i=l,j=m,obj.playMusic(n),o=!0)};document.getElementById("screen")}return"hidden"in document?document.addEventListener("visibilitychange",function(){p(document.hidden)},!1):"mozHidden"in document?document.addEventListener("mozvisibilitychange",function(){p(document.mozHidden)},!1):"webkitHidden"in document?document.addEventListener("webkitvisibilitychange",function(){p(document.webkitHidden)},!1):"msHidden"in document?document.addEventListener("msvisibilitychange",function(){p(document.msHidden)},!1):"onpagehide"in window?(window.addEventListener("pagehide",function(){p(!0)},!1),window.addEventListener("pageshow",function(){p(!1)},!1)):"onblur"in document?(window.addEventListener("blur",function(){p(!0)},!1),window.addEventListener("focus",function(){p(!1)},!1),o=!0):"onfocusout"in document&&(window.addEventListener("focusout",function(){p(!0)},!1),window.addEventListener("focusin",function(){p(!1)},!1)),obj}),glue.module.create("js/managers/hintsmanager",["glue","glue/game","glue/loader","glue/event/system","js/game-objects/context","glue/math/vector","js/managers/levelmanager","js/managers/tilemanager","js/managers/savestate-manager","js/utils","js/game-objects/timer"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l,m,n,o,p=!1,q=!1,r=a.sugar,s=function(){var a=i.load("hints");return window.unitTestingFlag?void(l=0):void(p||(p=!0,m=0,n=e(b.canvas.getDimension().width,b.canvas.getDimension().height),l=r.isDefined(a)&&!r.isEmpty(a)?a:0,n.z=j.zLayers.PATH-1,b.add(n)))},t=function(){d.on("confirmation.agreed",y),d.on("tilemanager.levelsucceded",y)},u=function(){i.save("hints",l)},v=function(){var a,b,d,e=!1,f=[];if(!window.unitTestingFlag){for(b=c.getJSON("levels_data"),a=0;a<b.levels_data.length&&!e;++a)d=b.levels_data[a],d.level_name===g.getCurrentLevel().getName()&&(e=!0,f=d.solution);r.isEmpty(f)||x(f)}},w=function(a,b,c){var d={x:j.level.tileWidth/2,y:j.level.tileHeight/2};q&&(a.save(),a.translate(j.game.position.x,j.game.position.y),a.beginPath(),a.moveTo(b.x+d.x,b.y+d.y),a.lineTo(c.x+d.x,c.y+d.y),a.strokeStyle="#32b7a9",a.stroke(),a.closePath(),a.fillStyle="#32b7a9",a.arc(b.x+d.x,b.y+d.y,12,0,2*Math.PI),a.fill(),a.restore())},x=function(a){q=!0,o=n.getContext(),o.lineWidth=10;var b=0,c=function(){b<a.length-1&&h.getTileById(a[b])&&w(o,h.getTileById(a[b]).getPosition(),h.getTileById(a[b+1]).getPosition()),b<a.length?(b++,k.setTimeout(c,200)):3>=m&&k.setTimeout(y,1e3*m)};c()},y=function(a){q=!1,window.unitTestingFlag||(r.isDefined(a)&&(m=0),n.getContext().clearRect(0,0,b.canvas.getDimension().width,b.canvas.getDimension().height))};return t(),{init:function(){s()},addHint:function(){999>l&&l++,window.unitTestingFlag||u(),d.fire("hintsmanager.hintsUpdated",l)},useHint:function(){l>0&&(m++,q||(v(),l--)),window.unitTestingFlag||u(),d.fire("hintsmanager.hintsUpdated",l)},getHints:function(){return l},setHints:function(a){l=a}}}),glue.module.create("js/managers/interpolationmanager",["glue/math","glue/math/vector"],function(a,b){"use strict";var c,d,e,f,g,h,i=a(),j=function(a,b,c){return(c-b)*a+b},k=function(a,b,c){return(a-b)/(c-b)},l=function(a,b){return a.x===b.x&&a.y===b.y},m=function(a){var b,c=f.length;for(b=0;c>b;++b)if(a.x===f[b].x&&a.y===f[b].y)return!0;return!1},n=function(a){var b=f[f.length-1];return"undefined"!=typeof b?a.x===b.x||a.y===b.y?!0:!1:!0},o=function(){{var a,b;f.length}for(a=0;a<f.length;++a)b=f[a],q(b),b.x=Math.floor(b.x*c),b.y=Math.floor(b.y*c);return f},p=function(a){if(!m(a))if(n(a))f.push(a);else{var c=b(a.x-h,a.y);p(c),p(a)}},q=function(a){for(var b=0,c=0;c<f.length;++c)l(a,f[c])&&(++b,b>1&&f.splice(c,1))},r={interpolatePath:function(a,l,n){for(c=n||1,d=0,e=Math.floor(a.distance(l)/c),f=[],h=i.sign(l.x-a.x),g=0;e>g;++g)d=b(Math.round(j(k(g,0,e),Math.floor(a.x/c),Math.floor(l.x/c))),Math.round(j(k(g,0,e),Math.floor(a.y/c),Math.floor(l.y/c)))),p(d);return d=b(Math.round(Math.floor(l.x/c)),Math.round(Math.floor(l.y/c))),m(d)||p(d),f=o()}};return r}),glue.module.create("js/managers/levelmanager",["glue","glue/game","glue/loader","glue/screen","glue/director","glue/event/system","glue/math/vector","glue/baseobject","glue/component/spritable","glue/component/clickable","js/game-objects/level","js/managers/savestate-manager","js/utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n,o,p,q,r,s=a.sugar,t=!1,u=0,v=0,w=0,x=0,y=function(){t||(m.game.NUMBER_OF_LEVELS=m.game.NUMBER_OF_REGIONS*m.game.NUMBER_OF_LEVELS_PER_REGION,n=[],o=[],r=!1,t=!0,u=0,v=0,w=0,x=0,f.fire("levelManager.initialized"))},z=function(){var a,b,c=0;for(n=[],m.game.NUMBER_OF_LEVELS=m.game.NUMBER_OF_REGIONS*m.game.NUMBER_OF_LEVELS_PER_REGION,a=0;a<m.game.NUMBER_OF_LEVELS;++a)a%m.game.NUMBER_OF_LEVELS_PER_REGION===0&&0!=a&&c++,b=k({id:a,name:"level_"+a,region:c,levelState:m.levelStates.LOCKED,lastStarsCollected:0,bestStarsCollected:0,lastMoveScore:0,bestMoveScore:0}),b.init(),n.push(b);n[0].setState(m.levelStates.UNLOCKED),q=0,p=n[0]},A=function(){var a,b,c,d=0;if(n=[],c=D(),s.isDefined(c)&&!s.isEmpty(c)){for(a=0;a<m.game.NUMBER_OF_LEVELS;++a)a%m.game.NUMBER_OF_LEVELS_PER_REGION===0&&0!=a&&d++,b=k({id:a,name:"level_"+a,region:d,levelState:c[a].levelState,lastStarsCollected:c[a].lastStarsCollected,bestStarsCollected:c[a].bestStarsCollected,lastMoveScore:c[a].lastMoveScore,bestMoveScore:c[a].bestMoveScore}),b.init(),n.push(b);q=F().getRegion(),p=F()}else z()},B=function(a){var b,d,e,f,g,h,i,j=-1,k=-1;for(f=!1,d=c.getJSON("levels_data"),b=0;b<d.levels_data.length&&!f;++b)e=d.levels_data[b],e.level_name===p.getName()&&(f=!0,p=n[b],j=e.star2_moves,k=e.star3_moves);f&&(i=p.getBestMoveScore(),h=p.getBestStarsCollected(),p.setLastMoveScore(a),s.isDefined(i)?0===i?p.setBestMoveScore(a):i>a&&p.setBestMoveScore(a):p.setBestMoveScore(a),g=a>j?1:a>k&&j>=a?2:3,p.getState()===m.levelStates.UNLOCKED&&p.setState(m.levelStates.COMPLETED),p.setLastStarsCollected(g),s.isDefined(h)?0===h?p.setBestStarsCollected(g):g>h&&p.setBestStarsCollected(g):p.setBestStarsCollected(g))},C=function(){var a,b,c,d=[];if(!window.unitTestingFlag){for(c=H(),c&&c.getState()!=m.levelStates.COMPLETED&&c.setState(m.levelStates.UNLOCKED),a=0;a<m.game.NUMBER_OF_LEVELS;++a)b=n[a],s.isDefined(b)&&(d[a]={id:a,name:"level_"+a,region:b.getRegion(),levelState:b.getState(),lastMoveScore:b.getLastMoveScore(),lastStarsCollected:b.getLastStarsCollected(),bestMoveScore:b.getBestMoveScore(),bestStarsCollected:b.getBestStarsCollected()});s.isDefined(d)&&l.save("levels",d)}},D=function(){return l.load("levels")},E=function(a){var b,c;for(b=0;b<n.length;++b)if(c=n[b],c.getName()===a)return c},F=function(){var a,b;for(a=0;a<n.length;++a)if(b=n[a],b.getState()===m.levelStates.UNLOCKED)return b;return b},G=function(){return s.isDefined(n[p.getId()-1])?n[p.getId()-1]:null},H=function(){return s.isDefined(n[p.getId()+1])?n[p.getId()+1]:null},I=function(){var a,b,c=0;for(a=0;a<n.length;++a)b=n[a],b.getState()===m.levelStates.COMPLETED&&c++;return c},J=function(){window.unitTestingFlag||A()},K=function(){f.on("levelcomplete.saveLevels",C),f.on("tilemanager.levelsucceded",C),f.on("tilemanager.gameEnded",C),f.on("tilemanager.setLevelData",B)},L=function(){for(var a=0;a<o.length;++a)b.remove(o[a]);o=[]};return K(),{init:function(){y()},firstLevelsInitialization:function(){z()},setTestLevels:function(){var a,b;for(z(),a=0;a<m.game.NUMBER_OF_LEVELS;++a)b=n[a],b.setState(m.levelStates.UNLOCKED)},getLevels:function(){return A(),n},getCurrentLevel:function(){return p},getPreviousLevel:function(){return G()},getNextLevel:function(){return H()},setCurrentLevel:function(a){if(!s.isObject(a))throw"value should be an object";p=a},getLevelByName:function(a){return E(a)},getCompletedLevelsNumber:function(){return I()},getCurrentRegion:function(){return q},showLevelButtons:function(){J()},getLevelButtons:function(){return o},saveLevels:C,destroy:function(){f.off("levelcomplete.saveLevels",C),f.off("tilemanager.levelsucceded",C),f.off("tilemanager.gameEnded",C),f.off("tilemanager.setLevelData",B),L()}}}),glue.module.create("js/managers/pathmanager",["glue","glue/game","glue/event/system","glue/math/vector","js/utils","js/game-objects/dragon","js/game-objects/timer"],function(a,b,c,d,e,f,g){"use strict";return function(){var h=a.sugar,i=[],j=[],k=[],l=f(),m=!1,n=document.createElement("canvas").getContext("2d"),o=function(a,b){var c,d=[],e=a.length;for(c=0;e>c;++c)a[c]===b&&d.push(c);return d},p=function(a){g.setTimeout(function(){var b,f,g,h,l,n,p=a.length;if(k=a,k.length!==j.length)for(j=a.slice(),i.splice(0,i.length),m?m=!1:c.fire("dragon.moveFront"),b=0;p>b;++b)h=e.zLayers.GROUND,g=a[b],l=g.getCrossedDirections(),g.getType()===e.tileTypes.BRIDGE&&(l.length>1?(n=o(a,g),n[0]===b?h=l[0]===e.directions.LEFT||l[0]===e.directions.RIGHT?1e3:0:n[1]===b&&(h=l[1]===e.directions.LEFT||l[1]===e.directions.RIGHT?1e3:0)):(n=o(a,g),n[0]===b&&(l[0]===e.directions.LEFT||l[0]===e.directions.RIGHT)&&(h=e.zLayers.BRIDGES))),f=d(g.getPosition().x+g.getDimension().width/2,g.getPosition().y+g.getDimension().height/2),f.z=h,f.type=g.getType(),u.addPoint(f)},1)},q=function(){c.fire("pathmanager.returnPath",i)},r=function(){c.fire("dragon.moveBack"),m=!0},s=function(){u.clear()},t=function(){l.fadeDragonOut()},u={z:e.zLayers.PATH,debug:!1,value:0,init:function(){n.lineCap="round",n.canvas.width=e.game.GAME_WIDTH,n.canvas.height=e.game.GAME_HEIGHT,c.on("tilemanager.levelEnded",q),c.on("tilemanager.rebuildPath",r),c.on("tilemanager.updatePath",p),c.on("tilemanager.resetPath",s),c.on("tilemanager.levelsucceded",s),c.on("tilemanager.showWinTransition",t),l.z=u.z,b.add(l)},draw:function(a){if(u.debug){var b,c,d=i.length,e=a.context;if(d>0){for(c=i[0],e.lineWidth=20,e.globalAlpha=.5,e.beginPath(),e.strokeStyle="#ff0000",e.moveTo(c.x,c.y),b=1;d>b;++b)c=i[b],e.lineTo(c.x,c.y);e.stroke(),e.closePath(),e.globalAlpha=1}}},getPath:function(){return i},addPoint:function(a){h.isVector(a)&&(i.push(a),l.setPath(i),c.fire("pathmanager.pointAdded",i))},clear:function(){i.splice(0,i.length),n.clearRect(0,0,n.canvas.width,n.canvas.height),l.clear()},getDragon:function(){return l},destroy:function(){c.off("tilemanager.levelEnded",q),c.off("tilemanager.rebuildPath",r),c.off("tilemanager.updatePath",p),c.off("tilemanager.levelsucceded",s),c.off("tilemanager.resetPath",s),c.off("tilemanager.showWinTransition",t),b.remove(l)}};return u}}),glue.module.create("js/managers/puzzle-piece-manager",["glue","glue/game","glue/loader","glue/event/system","glue/math/vector","js/game-objects/puzzle-piece","js/utils"],function(a){"use strict";var b,c=(a.sugar,function(){b=[]}),d=function(){};return d(),{init:function(){c()},addPuzzlePiece:function(a){b.push(a)},getPuzzlePieces:function(){return b}}}),glue.module.create("js/managers/savestate-manager",["glue","glue/game","glue/event/system","js/utils"],function(a){"use strict";var b,c,d=(a.sugar,function(){}),e=function(){c=!0,f()},f=function(){try{b=window.localStorage}catch(a){c=!1,alert("Your cookies are not activate.\nYou are not allowed to save data."),b={data:{},setItem:function(a,c){b.data[a]=c},getItem:function(a){return b.data[a]}}}},g=function(){};return e(),{init:function(){d()},save:function(a,d){c?b.setItem(document.URL+a,JSON.stringify(d)):b.setItem(document.URL+a,d)},load:function(a){return c?JSON.parse(b.getItem(document.URL+a)):b.getItem(document.URL+a)},clear:function(){for(var a in b)-1!==a.indexOf(document.URL)&&b.removeItem(a)},destroy:function(){g()}}}),glue.module.create("js/managers/tilemanager",["glue","glue/game","glue/loader","glue/baseobject","glue/event/system","glue/math/vector","js/game-objects/tile","js/game-objects/goal-lotus","glue/component/spritable","glue/component/scalable","glue/component/fadable","js/managers/levelmanager","js/managers/audiomanager","js/utils","js/game-objects/tilemap","js/game-objects/timer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W=a.sugar,X=function(){r=!1,s=-1,t=-1,u=-1,x=-1,y=0,z=0,A=0,B=!1,C=!1,D=0,E=!1,F=!1,J=0,K=[],G=[],H=[],M=!1,N=!1,w=!1,S=!1,T=1,R=f(0,0),V=!1,Q=d(i,j,k).add({init:function(){this.spritable.setup({position:R,image:c.getAsset("cursorGlow")}),this.scalable.setScale(f(T,T)),this.z=n.zLayers.PATH-10},draw:function(a){M&&n.isRunningOnMobile()&&S&&this.base.draw(a)},pointerDown:function(a){Q.setPosition(f(a.position.x-c.getAsset("cursorGlow").width*T/2,a.position.y-c.getAsset("cursorGlow").height*T/2))},pointerMove:function(a){R=f(a.position.x,a.position.y),K.length>0&&K[K.length-1].getBoundingBox().hasPosition(f(a.position.x-n.game.position.x,a.position.y-n.game.position.y))&&(S=!0),Q.setPosition(f(a.position.x-c.getAsset("cursorGlow").width*T/2,a.position.y-c.getAsset("cursorGlow").height*T/2))}}),v=l.getCurrentLevel(),b.add(Q),e.fire("tilemanager.movesUpdated",D)},Y=function(){e.on("tile.interpolateHoverOver",xb),e.on("tile.initialized",_),e.on("tile.pointerDown",ab),e.on("tile.pointerUp",bb),e.on("tile.hoverOver",cb),e.on("tile.hoverOut",db),e.on("dragon.moveEnded",gb),e.on("levelcomplete.shown",$),e.on("levelcomplete.loadnextlevel",yb),e.on("goallotus.openComplete",Z)},Z=function(){e.fire("tilemanager.levelsucceded",D)},$=function(){(l.getCompletedLevelsNumber()<n.game.NUMBER_OF_LEVELS||l.getCurrentLevel().getId()!==n.game.NUMBER_OF_LEVELS-1)&&(zb(),X(),window.unitTestingFlag||wb(l.getNextLevel()))},_=function(a){var b=0;if(G&&(G.push(a),y++,a.getType()!=n.tileTypes.BLOCK&&(a.getType()===n.tileTypes.BRIDGE?z+=2:z++),!r&&y>=s*t)){for(r=!0,b=0;b<G.length;++b)-1!=G[b].getGoalNumber()&&A++;O=!1,P=!1,e.fire("tilemanager.levelLoaded",G)}},ab=function(a){var b;a&&!w&&(-1!==K.indexOf(a)&&K[K.length-1].getId()!==a.getId()&&m.playSound("sfx_return"),1===a.getGoalNumber()&&(S=!0,K.length>1&&(hb(!1),ib()),M=!0,b=rb(a),a.setNeighbors(b),qb(a,n.directions.NODIR),m.playSound("sfx_walking"),m.stopSound("sfx_crumbling_paper")),w||(a.isCrossed()&&1!=a.getGoalNumber()&&(e.fire("tilemanager.selectTile",a),M=!0,b=rb(a),a.setNeighbors(b),a.getId()!=K[K.length-1].getId()?(S=!0,pb(a)):E=!0),m.stopSound("sfx_crumbling_paper"))),e.fire("tilemanager.pointerDown",a)},bb=function(a){E=!1,e.fire("tilemanager.pointerUp",a),M=!1},cb=function(a){var b;b=rb(a),a.setNeighbors(b),1!=a.getGoalNumber()&&mb(a)&&!w&&K.length>0&&(I=K[0],M&&(C?a.getId()===K[K.length-1].getPreviousTile().getId()&&pb(a):(a.setPreviousTile(K.length>0?K[K.length-1]:a),a.isCrossed()&&a.getType()!==n.tileTypes.BRIDGE?K.length>=2&&a.getId()===K[K.length-2].getId()&&(K.length>0&&!E&&e.fire("tilemanager.movesUpdated",D),F||(F=!0,D++,e.fire("tilemanager.movesUpdated",D)),K[K.length-2].getType()===n.tileTypes.GOAL?(m.stopSound("sfx_walking"),m.playSound("sfx_return")):m.playSound("sfx_return"),pb(a)):ob(a)?(kb(a.getLastCrossedDirection(),jb(a))?pb(a):(F=!1,qb(a,jb(a))),E||(E=!0,D++,e.fire("tilemanager.movesUpdated",D)),a.getType()===n.tileTypes.GOAL&&(m.stopSound("sfx_walking"),m.playSound("sfx_number_collisions"))):m.stopSound("sfx_walking")),!C||B||V?(m.stopSound("sfx_crumbling_paper"),V=!1):(m.playSound("sfx_crumbling_paper",!0),V=!0))),e.fire("tilemanager.hoverOver",a)},db=function(){},eb=function(a){return a===J+1?!0:!1},fb=function(){var a;return!w&&K&&(K.length>0&&(a=K[K.length-1]),W.isDefined(a)&&eb(a.getGoalNumber())&&(K.length===z&&(B=!0),J=a.getGoalNumber(),J===A&&(B?hb(!1,!0):hb(!0),C=!0),B&&C))?(w=!0,void e.fire("tilemanager.setLevelData",D)):void(w=!1)},gb=function(){var a,b=1,c=function(b){b<=H.length&&(a=sb(b),a.stopGlowing(),b===H.length?a.openLotus(function(){p.setTimeout(function(){e.fire("goallotus.openComplete",D)},800)}):a.openLotus(),p.setTimeout(function(a){return function(){++a,c(a)}}(b),250))};w&&(e.fire("tilemanager.showWinTransition",D),c(b))},hb=function(a,b){var c,d;if(N=a,a)for(c=0;c<G.length;++c)d=G[c],d.isCrossed()&&d.getType()!==n.tileTypes.BRIDGE||d.showFeedback(!0);else for(b&&(m.playSound("sfx_grassland"),m.playSound("sfx_blossom")),K.length!=z&&"music_level"!=m.getCurrentlyPlayingMusic()&&(m.stopAllMusic(),m.playMusic("music_level",!0)),c=0;c<G.length;++c)d=G[c],d.showFeedback(!1)},ib=function(){var a;for(a=0;a<K.length;++a)K[a].setCrossed(!1);J=1,K=[],B=!1,C=!1,E=!1,O=!1,P=!1,hb(!1),e.fire("tilemanager.resetPath")},jb=function(a){var b=a.getPreviousTile();return W.isDefined(b)?a.getNeighbors().top&&b.getId()===a.getNeighbors().top.getId()?n.directions.DOWN:a.getNeighbors().bottom&&b.getId()===a.getNeighbors().bottom.getId()?n.directions.UP:a.getNeighbors().left&&b.getId()===a.getNeighbors().left.getId()?n.directions.RIGHT:a.getNeighbors().right&&b.getId()===a.getNeighbors().right.getId()?n.directions.LEFT:n.directions.NODIR:n.directions.NODIR},kb=function(a,b){return a===n.directions.UP&&b===n.directions.DOWN?!0:a===n.directions.DOWN&&b===n.directions.UP?!0:a===n.directions.LEFT&&b===n.directions.RIGHT?!0:a===n.directions.RIGHT&&b===n.directions.LEFT?!0:!1},lb=function(a,b){if(b===n.directions.UP||b===n.directions.DOWN){if(a===n.directions.LEFT||a===n.directions.RIGHT)return!0}else if(!(b!==n.directions.LEFT&&b!==n.directions.RIGHT||a!==n.directions.UP&&a!==n.directions.DOWN))return!0;return!1},mb=function(a){var b=!1,c=!1,d=!1,e=!1,f=K[K.length-1];return W.isDefined(f)?(W.isEmpty(a.getNeighbors().top)||(b=a.getNeighbors().top.getId()===f.getId()),W.isEmpty(a.getNeighbors().bottom)||(c=a.getNeighbors().bottom.getId()===f.getId()),W.isEmpty(a.getNeighbors().left)||(d=a.getNeighbors().left.getId()===f.getId()),W.isEmpty(a.getNeighbors().right)||(e=a.getNeighbors().right.getId()===f.getId()),b||c||d||e):!0},nb=function(a){var b=!1,c=!1,d=!1,e=!1,f=a.getPreviousTile();return W.isDefined(f)?(a.getNeighbors().top&&(b=a.getNeighbors().top.getId()===f.getId()),a.getNeighbors().bottom&&(c=a.getNeighbors().bottom.getId()===f.getId()),a.getNeighbors().left&&(d=a.getNeighbors().left.getId()===f.getId()),a.getNeighbors().right&&(e=a.getNeighbors().right.getId()===f.getId()),b||c||d||e):!0},ob=function(a){var b=!1;return L=a.getPreviousTile(),a.getType()===n.tileTypes.BLOCK?b=!1:a.getType()===n.tileTypes.GOAL?b=eb(a.getGoalNumber())?L.getType()===n.tileTypes.BRIDGE&&lb(jb(a),L.getLastCrossedDirection())?!1:!0:J===a.getGoalNumber()?L.getType()===n.tileTypes.BRIDGE&&lb(jb(a),L.getLastCrossedDirection())?!1:!0:!1:a.getType()===n.tileTypes.ONE_WAY?W.isDefined(L)&&(a.getDirection()===n.directions.UP?b=a.getNeighbors().bottom.getId()===L.getId()?!0:a.isCrossed()?!0:!1:a.getDirection()===n.directions.DOWN?b=a.getNeighbors().top.getId()===L.getId()?!0:a.isCrossed()?!0:!1:a.getDirection()===n.directions.LEFT?b=a.getNeighbors().right.getId()===L.getId()?!0:a.isCrossed()?!0:!1:a.getDirection()===n.directions.RIGHT&&(b=a.getNeighbors().left.getId()===L.getId()?!0:a.isCrossed()?!0:!1)):b=a.getType()===n.tileTypes.BRIDGE?W.isDefined(L)?L.getType()===n.tileTypes.BRIDGE||L.getType()===n.tileTypes.ONE_WAY?lb(jb(a),L.getLastCrossedDirection())?!1:nb(a)?!0:!1:!0:!1:W.isDefined(L)?L.getType()===n.tileTypes.ONE_WAY?lb(jb(a),L.getDirection())?!1:!0:L.getType()===n.tileTypes.BRIDGE&&lb(jb(a),L.getLastCrossedDirection())?!1:!0:!0,b},pb=function(a){var b,c,d,f;if(e.fire("tilemanager.selectTile",a),B=!1,C=!1,N&&hb(!1),K.length>1)for(E||(E=!0,D++),e.fire("tilemanager.movesUpdated",D),b=K.length-1;b>=0;--b)if(d=K[b],d.getId()===a.getId()){for(c=b+1;c<K.length;++c)K[c].setCrossed(!1);for(e.fire("tilemanager.rebuildPath"),e.fire("tilemanager.updatePath",K),K.splice(b+1,K.length-(b+1)),c=K.length-1;c>=0;--c)if(d=K[c],-1!=d.getGoalNumber()){for(J=d.getGoalNumber(),b=0;b<H.length;++b)f=sb(H[b].getGoalNumber()),f.closeLotus(),f.stopGlowing();return f=sb(J+1),void f.startGlowing()}}},qb=function(a,b){var c,d;e.fire("tilemanager.selectTile",a),a.getCrossedDirections().length<2&&(a.z=b!==n.directions.RIGHT&&b!==n.directions.LEFT||a.getType()!==n.tileTypes.BRIDGE?n.zLayers.GROUND:n.zLayers.BRIDGES,c=sb(a.getGoalNumber()),d=sb(a.getGoalNumber()+1),a.getType()===n.tileTypes.GOAL&&(W.isDefined(c)&&c.stopGlowing(),W.isDefined(d)&&d.startGlowing()),0===K.length?(a.setCrossed(!0,b),K.push(a),e.fire("tilemanager.updatePath",K)):b!=n.directions.NODIR&&(a.setCrossed(!0,b),K.push(a),e.fire("tilemanager.updatePath",K))),m.playSound("sfx_walking"),fb()},rb=function(a){var b,c,d,e,f,g=a.getId();return b=g>=0&&s>g?null:tb(g-s),c=g>=s*t-s&&s*t>g?null:tb(g+s),d=g%s===0?null:tb(g-1),e=g%s===s-1?null:tb(g+1),f={top:b,bottom:c,left:d,right:e}},sb=function(a){var b,c;for(b=0;b<H.length;++b)if(c=H[b],c.getGoalNumber()===a)return c},tb=function(a){var b,c=null;for(b=0;b<G.length;++b)if(c=G[b],c.getId()===a)return c;return void 0},ub=function(a){var b,c,d,e="regular",f=-1;if(a>n.tileSets.regular.length?(e="goal",a-=n.tileSets.regular.length):e="regular","regular"===e)switch(a){case 1:c=n.tileTypes.REGULAR,d=n.directions.NODIR;break;case 2:c=n.tileTypes.ONE_WAY,d=n.directions.UP;break;case 3:c=n.tileTypes.ONE_WAY,d=n.directions.DOWN;break;case 4:c=n.tileTypes.ONE_WAY,d=n.directions.LEFT;break;case 5:c=n.tileTypes.ONE_WAY,d=n.directions.RIGHT;break;case 6:c=n.tileTypes.BRIDGE,d=n.directions.NODIR;break;case 7:c=n.tileTypes.BLOCK,d=n.directions.NODIR;break;default:c=n.tileTypes.BLOCK,d=n.directions.NODIR}else if("goal"===e)switch(a){case 1:c=n.tileTypes.GOAL,f=1;break;case 2:c=n.tileTypes.GOAL,f=2;break;case 3:c=n.tileTypes.GOAL,f=3;break;case 4:c=n.tileTypes.GOAL,f=4;break;case 5:c=n.tileTypes.GOAL,f=5;break;case 6:c=n.tileTypes.GOAL,f=6;break;default:c=n.tileTypes.BLOCK,f=-1}return b={type:c,direction:d,goalNumber:f,z:n.zLayers.GROUND}},vb=function(){var a,b;for(a=0;a<q.tilesets.length;++a)b=q.tilesets[a],"editor_regular_tileset"===b.name?n.tileSets.regular.length=b.imagewidth/b.tilewidth:"editor_goal_tileset"===b.name&&(n.tileSets.goal.length=b.imagewidth/b.tilewidth)},wb=function(a){var d,e,i;if(D=0,u=-1,q=c.getJSON(a.getName()),q)for(vb(),x=n.level.tileWidth,d=0;d<q.layers.length&&-1===u;++d)"tiles"===q.layers[d].name&&(s=q.layers[0].width,t=q.layers[0].height,n.level.levelWidth=s,n.level.levelHeight=t,u=d);if(W.isDefined(U)&&b.remove(U),U=o(0,0,n.level.levelWidth*n.level.tileWidth,n.level.levelHeight*n.level.tileHeight),-1!=u)for(i=0;t>i;++i)for(e=0;s>e;++e){var j,k,l=i*s+e,m=ub(q.layers[u].data[l]);m.id=l,m.name=l+"-"+m.type,j=g(e*x,i*x,m),m.type===n.tileTypes.GOAL&&(k=h(e*x,i*x,{goalNumber:m.goalNumber}),k.setPosition(f(n.game.position.x+e*x+x/2,n.game.position.y+i*x+x/2)),H.push(k),b.add(k)),U.add(j)}U.setPosition(f(n.game.position.x,n.game.position.y)),b.add(U),U.preRender()},xb=function(a){var b,c=K[K.length-1];if(c){b=n.interpolatePath(c.getPosition(),a.getPosition(),n.level.tileWidth);for(var d=0;d<b.length;++d)U.forceTileHover(b[d].add(f(n.level.tileWidth/2,n.level.tileHeight/2)))}},yb=function(){"music_level"!==m.getCurrentlyPlayingMusic()&&(m.stopAllMusic(),m.playMusic("music_level",!0))},zb=function(){var a;if(r){for(a=G.length-1;a>=0;--a)b.remove(G[a]),G.pop();G=[]}for(a=0;a<H.length;++a)b.remove(H[a]);H.length=0,b.remove(Q),b.remove(U),e.fire("tilemanager.levelUnloaded",G)},Ab=function(){var a;for(a=0;a<H.length;++a)b.remove(H[a]);H.length=0,b.remove(Q),e.off("tile.interpolateHoverOver",xb),e.off("tile.initialized",_),e.off("tile.pointerDown",ab),e.off("tile.pointerUp",bb),e.off("tile.hoverOver",cb),e.off("tile.hoverOut",db),e.off("dragon.moveEnded",gb),e.off("levelcomplete.shown",$),e.off("levelcomplete.loadnextlevel",yb),e.off("goallotus.openComplete",Z)};return{init:function(){X()},setup:function(){Y()},retry:function(){D=0,ib()},loadLevelTiles:function(a){X(),wb(a)},unloadCurrentLevel:function(){zb()},getLevelTiles:function(){return G},getTileById:function(a){return tb(a)},destroy:function(){Ab()}}}),glue.module.create("js/screens/credits",["glue","glue/game","glue/screen","glue/director","glue/loader","glue/baseobject","js/gui/toggle-button","glue/event/system","glue/component/spritable","glue/component/animatable","glue/component/fadable","glue/component/movable","glue/component/rotatable","glue/math/vector","js/gui/click-button","js/managers/apimanager","js/managers/audiomanager","js/game-objects/timer","js/utils","js/gui/textbox"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";a.sugar;return function(){var a=c("Credits"),b=!0,g=!0,j=!1,k=!1,u=175,v=0,w=u,x=!1,y=!0,z=f(i).add({init:function(){z.spritable.setup({position:n(20,170),image:e.getAsset("howtoplay_background")}),z.z=0}}),A=(o(193,757,{image:e.getAsset("buttonHome"),frameCount:1,pushScale:1.02,z:5001,clickUp:function(){N(),L()}}),f(i).add({init:function(){A.spritable.setup({position:n(0,0),image:e.getAsset("entrance")}),A.z=5e3}})),B=f(i,l).add({init:function(){B.spritable.setup({position:n(0,0),image:e.getAsset("doorLeft")}),B.movable.setMoveSpeed(300),B.z=12},update:function(a){B.base.update(a),B.movable.atTarget()&&B.moving&&(B.callback&&B.callback(),B.moving=!1)}}),C=f(i,l).add({init:function(){C.spritable.setup({position:n(320,0),image:e.getAsset("doorRight")}),C.moving=!0,C.movable.setMoveSpeed(300),C.z=12}}),D=o(36,34,{image:e.getAsset("buttonHome"),frameCount:1,pushScale:1.02,z:5001,clickUp:function(){y&&(h.fire("credits.showMenu"),L(function(){N(),r.setTimeout(function(){d.showScreen("MainMenuScreen")
},250)}))},name:"creditsButton"}),E=o(36,533,{image:e.getAsset("button_arrow_left"),frameCount:2,pushScale:1.02,z:6e3,name:"buttonLeft",clickDown:function(){k=!0,j=!1,x=!1,v=u},clickUp:function(){x=!0},onUpdate:function(a){E.setAnimation("idle"),g&&E.setAnimation("inactive"),E.base.draw(a)},onInit:function(){m(E),E.rotatable.setAngleDegree(270)}}),F=o(499,533,{image:e.getAsset("button_arrow_right"),frameCount:2,pushScale:1.02,z:6e3,name:"buttonRight",clickDown:function(){j=!0,k=!1,x=!1,v=-u},clickUp:function(){x=!0},onUpdate:function(a){F.setAnimation("inactive"),b&&F.setAnimation("idle"),F.base.update(a)},onInit:function(){m(F),F.rotatable.setAngleDegree(270)}}),G=f().add({update:function(a){j&&this.getPosition().y-v*a.deltaT>=-350&&0!==v&&(x&&(v+=w),v>=0?(j=!1,v=0):this.setPosition(n(this.getPosition().x,this.getPosition().y+v*a.deltaT))),k&&this.getPosition().y+v*a.deltaT<=0&&0!==v&&(x&&(v-=w),0>=v?(k=!1,v=0):this.setPosition(n(this.getPosition().x,this.getPosition().y+v*a.deltaT))),g=this.getPosition().y>=-2?!1:!0,b=this.getPosition().y<=-245?!1:!0}}),H=t({text:"Credits",align:"center",font:s.fonts.mainFont,fontSize:60,fontColor:"#28256E",margin:n(25,25)}).add({init:function(){this.setPosition(n(s.game.GAME_WIDTH/2,250))}}),I=t({text:"Production\nMarice Hanraets\n\nGame Design\nNatalie Donohue\nPim Heitkamp\n\nProgramming\nMarco Colombo\nFelipe Alfonso\nRiko Ophorst\n\nArt\nSonja van Vuure\n\nQuality Assurance\nJan-Arnout Mager\n\nSpecial thanks\nHernan Zhou\nTom van de Merbel\nJeroen Reurings\nWillem Vermaak",align:"center",font:s.fonts.textFont,fontSize:30,fontColor:"#28256E",margin:n(25,25)}).add({init:function(){this.setPosition(n(s.game.GAME_WIDTH/2,350))}}),J=o(36,844,{image:e.getAsset("brandLogo"),frameCount:1,pushScale:1.02,z:s.zLayers.GUI+4,clickUp:function(){h.fire("mainmenu.showZibbo"),p.openBrandLink()},name:"zibboButton"}),K=function(a){q.playSound("sfx_doors_open"),B.moving=!0,B.callback=a,B.setPosition(n(0,0)),C.setPosition(n(320,0)),B.movable.setTarget(n(-321,0)),C.movable.setTarget(n(642,0)),E.z=6e3,F.z=6e3},L=function(a){q.playSound("sfx_door_close"),B.moving=!0,B.callback=a,B.setPosition(n(-321,0)),C.setPosition(n(642,0)),B.movable.setTarget(n(0,0)),C.movable.setTarget(n(320,0)),E.z=2,F.z=2},M=function(){D.fadable.fade(function(){},0,1),J.fadable.fade(function(){},0,1)},N=function(){D.fadable.fade(function(){},1,0),J.fadable.fade(function(){},1,0)};return m(F),m(E),a.addObject(z),a.addObject(G),a.addObject(F),a.addObject(E),a.addObject(B),a.addObject(C),a.addObject(A),a.addObject(D),G.addChild(H),G.addChild(I),p.isAvailable()&&a.addObject(J),a.z=0,a.onShow=function(){D.fadable.setFadeSpeed(5),J.fadable.setFadeSpeed(5),M(),K()},a.init=function(){},a.destroy=function(){},a}}),glue.module.create("js/screens/game",["glue/game","glue/screen","glue/director","glue/loader","glue/event/system","glue/baseobject","glue/math/vector","glue/component/spritable","glue/component/rotatable","js/managers/apimanager","js/managers/tilemanager","js/managers/pathmanager","js/managers/hintsmanager","js/managers/levelmanager","js/managers/audiomanager","js/managers/savestate-manager","js/gui/level-complete","js/gui/pause","js/gui/click-button","js/utils","js/gui/textbox","js/game-objects/timer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return function(){var c,w=n,x=k,y=q(),z=r(),A=!0,B=b("GameScreen"),C=function(){A=!0},D=function(){A=!1},E=function(a){$.setText(a)},F=function(a){K.setText(a)},G=function(){n.getNextLevel()&&J.setText("Level "+(n.getNextLevel().getId()+1))},H=s(525,34,{image:d.getAsset("buttonPause"),z:t.zLayers.GUI+10,frameCount:1,pushScale:1.02,clickUp:function(){A&&(A=!1,e.fire("game.pause",!0))},name:"buttonPause"}),I=s(468,807,{image:d.getAsset("buttonHint"),z:t.zLayers.GUI+10,frameCount:1,pushScale:1.02,clickUp:function(){A&&(o.playSound("sfx_prompt"),m.useHint())},name:"buttonPause"}),J=u({text:"Level",align:"center",font:"japanese_brushregular",fontSize:60,fontColor:"#28256E",margin:g(20,20),textBaseline:"middle",lineWidth:5,strokeStyle:"yellow"}).add({init:function(){this.setPosition(g(t.game.GAME_WIDTH/2,66)),this.z=t.zLayers.GUI+50,this.setText("Level "+(n.getCurrentLevel().getId()+1))}}),K=u({text:"0",align:"center",font:"japanese_brushregular",fontSize:60,fontColor:"#28256E",margin:g(16,16),textBaseline:"middle",lineWidth:5,strokeStyle:"yellow"}).add({init:function(){this.setPosition(g(0,0))}}),L=f(h).add({init:function(){this.spritable.setup({position:g(t.game.position.x-20,t.game.position.y-20),image:d.getAsset("tilesBase")}),this.z=t.zLayers.GROUND-1}}),M=f(h).add({init:function(){this.spritable.setup({position:g(0,0),image:d.getAsset("mountain")}),this.z=t.zLayers.GUI-2}}),N=f(h).add({init:function(){this.spritable.setup({position:g(0,0),image:d.getAsset("curtain")}),this.z=t.zLayers.GUI+1}}),O=f(h).add({init:function(){this.spritable.setup({position:g(0,0),image:d.getAsset("tileoverlay")}),this.z=t.zLayers.GUI-3}}),P=f(h,i).add({angle:{x:0},init:function(){this.spritable.setup({position:g(0,t.game.position.y),image:d.getAsset("cloud0")}),this.z=t.zLayers.GUI-2,this.setPosition(g(t.game.GAME_WIDTH/2,t.game.GAME_HEIGHT/2)),this.setOrigin(g(this.spritable.getImage().width/2,this.spritable.getImage().height/2)),Q(),R()}}),Q=function(){TweenLite.to(P.getPosition(),5,{y:P.getPosition().y-30,ease:Linear.easeIn,onComplete:function(){TweenLite.to(P.getPosition(),5,{y:P.getPosition().y+30,ease:Linear.easeIn,onComplete:function(){Q()}})}})},R=function(){TweenLite.to(P.angle,60,{x:360,ease:Linear.easeIn,onUpdate:function(){P.rotatable&&P.rotatable.setAngleDegree(P.angle.x)},onComplete:function(){P.angle.x=0,R()}})},S=f(h).add({init:function(){this.spritable.setup({position:g(153,763),image:d.getAsset("cloud4")}),this.originalPosition=g(153,763),this.z=t.zLayers.GUI+1,Y(this)}}),T=f(h).add({init:function(){this.spritable.setup({position:g(-128,753),image:d.getAsset("cloud2")}),this.originalPosition=g(-128,753),this.z=t.zLayers.GUI+2,Y(this)}}),U=f(h).add({init:function(){this.spritable.setup({position:g(304,765),image:d.getAsset("cloud5")}),this.originalPosition=g(304,765),this.z=t.zLayers.GUI+3,Y(this)}}),V=f(h).add({init:function(){this.spritable.setup({position:g(381,870),image:d.getAsset("cloud6")}),this.originalPosition=g(381,870),this.z=t.zLayers.GUI+4,Y(this)}}),W=f(h).add({init:function(){this.spritable.setup({position:g(-37,850),image:d.getAsset("cloud4")}),this.originalPosition=g(-37,850),this.z=t.zLayers.GUI+5,Y(this)}}),X=f(h).add({init:function(){this.spritable.setup({position:g(54,850),image:d.getAsset("cloud5")}),this.originalPosition=g(54,850),this.z=t.zLayers.GUI+6,Y(this)}}),Y=function(a){var b=Math.floor(5*Math.random()+3);TweenLite.to(a.getPosition(),b,{x:a.getPosition().x+Math.floor(70*Math.random()-70),y:a.getPosition().y+Math.floor(20*Math.random()-20),ease:Quad.easeIn,onComplete:function(){TweenLite.to(a.getPosition(),b,{x:a.originalPosition.x,y:a.originalPosition.y,ease:Quad.easeOut,onComplete:function(){Y(a)}})}})},Z=f(h).add({init:function(){this.spritable.setup({position:g(346,821),image:d.getAsset("movesBackground")}),this.z=t.zLayers.GUI+10}}),$=u({text:"0",align:"center",font:"japanese_brushregular",fontSize:60,fontColor:"#28256E",margin:g(16,16),textBaseline:"middle",maxWidth:90,maxHeight:90}).add({init:function(){this.setPosition(g(55,50))}}),_=u({text:"Hints",align:"center",font:"japanese_brushregular",fontSize:60,fontColor:"#FFFFFF",margin:g(20,20),textBaseline:"middle",lineWidth:5,strokeStyle:"yellow"}),ab=u({text:"Moves",align:"center",font:"japanese_brushregular",fontSize:60,fontColor:"#FFFFFF",margin:g(16,16),textBaseline:"middle"}),bb=s(224,821,{name:"buttonReplay",image:d.getAsset("buttonReplay"),z:t.zLayers.GUI+10,frameCount:1,pushScale:1.02,clickUp:function(){A&&(window.unitTestingFlag||(o.playSound("sfx_refresh"),$.setText(0),k.retry()))}}),cb=s(20,834,{image:d.getAsset("brandLogo"),frameCount:1,pushScale:1.02,z:t.zLayers.GUI+100,clickUp:function(){j.isAvailable()&&(e.fire("mainmenu.showZibbo"),j.openBrandLink())},name:"zibboButton"});return _.setPosition(g(200,800)),_.setText("Hints"),ab.setPosition(g(450,800)),ab.setText("Moves"),B.getObjectByName=function(a){for(var b=B.getObjects(),c=0;c<b.length;c++)if(b[c].name===a)return b[c];return!1},B.init=function(){x.setup(),x.loadLevelTiles(w.getCurrentLevel()),y.setup(),z.setup(),c=l(),a.add(c),K.setText(m.getHints()),e.on("tilemanager.showWinTransition",D),e.on("levelcomplete.shown",G),e.on("tilemanager.levelLoaded",G),e.on("pause.resume",C),e.on("pause.levelselect",C),e.on("pause.home",C),e.on("levelcomplete.showing",D),e.on("levelcomplete.hidden",C),e.on("levelcomplete.levelselect",C),e.on("tilemanager.movesUpdated",E),e.on("hintsmanager.hintsUpdated",F),e.fire("game.playGame",!0),C(),o.stopAllMusic(),o.playSound("sfx_game_start",!1),v.setTimeout(function(){o.playMusic("music_level",!0)},p.load("muteSound")?0:1e3)},B.destroy=function(){y.destroy(),z.destroy(),x.destroy(),c.destroy(),a.remove(c),e.off("tilemanager.showWinTransition",D),e.off("levelcomplete.shown",G),e.off("pause.resume",C),e.off("pause.levelselect",C),e.off("pause.home",C),e.off("levelcomplete.showing",D),e.off("levelcomplete.hidden",C),e.off("levelcomplete.levelselect",C),e.off("tilemanager.movesUpdated",E),e.off("hintsmanager.hintsUpdated",F)},B.addObject(I),B.addObject(J),B.addObject(bb),B.addObject(H),B.addObject(L),B.addObject(M),B.addObject(N),B.addObject(O),B.addObject(P),B.addObject(S),B.addObject(T),B.addObject(U),B.addObject(V),B.addObject(W),B.addObject(X),B.addObject(Z),j.isAvailable()&&B.addObject(cb),Z.addChild($),I.addChild(K),B.z=0,B}}),glue.module.create("js/screens/how-to-play",["glue/director","glue/loader","glue/screen","glue/baseobject","glue/component/spritable","glue/component/movable","glue/component/fadable","glue/math/vector","glue/game","glue/event/system","js/gui/click-button","js/gui/textbox","js/utils","js/game-objects/timer","js/managers/audiomanager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";return function(){var p,q,r,s,t=i.canvas.getDimension(),u=!1,v=!1,w=h(0,0),x=["To complete a level, pass over every tile.","Go through each numbered sphere in order.","There are many bridges in the land.","You must cross over and under each bridge.","When you come to a one-way tile, you can only pass in the direction of the arrow.","You can not cross this tile any other way!"],y=0,z=d(e,f).add({init:function(){this.spritable.setup({position:h(0,t.height),image:b.getAsset("puzzle_textbar")}),this.z=1e3,this.movable.setMoveSpeed(300),this.movable.setTarget(h(0,t.height-b.getAsset("puzzle_textbar").height));var a=l({margin:h(10,15),font:m.fonts.textFont,text:x[0],align:"center",fontColor:"#fff",maxWidth:z.getDimension().width,maxHeight:z.getDimension().height});s=d(g).add({init:function(){this.addChild(a),this.fadable.setAlpha(1),this.fadable.setFadeSpeed(2)},changeText:function(){s.fadable.fadeOut(function(){a.setText(x[y]),s.fadable.fadeIn(function(){})})}}),a.setPosition(h(this.getDimension().width/2,60)),this.addChild(s)},setText:function(a){s.changeText(a)},destroy:function(){this.getChildren().length=0}}),A=d().add({init:function(){var a=d(e).add({init:function(){this.spritable.setup({position:h(t.width/2,t.height/2),image:b.getAsset("howtoplay_1")}),this.setOrigin(h(a.spritable.getImage().width/2,a.spritable.getImage().height/2))}});A.setDimension(t),A.addChild(a)}}),B=d().add({init:function(){var a=d(e).add({init:function(){this.spritable.setup({position:h(t.width/2,t.height/2),image:b.getAsset("howtoplay_2")}),this.setOrigin(h(a.spritable.getImage().width/2,a.spritable.getImage().height/2))}});B.setPosition(h(t.width,0)),B.setDimension(t),B.addChild(a)}}),C=d().add({init:function(){var a=d(e).add({init:function(){this.spritable.setup({position:h(t.width/2,t.height/2),image:b.getAsset("howtoplay_3")}),this.setOrigin(h(a.spritable.getImage().width/2,a.spritable.getImage().height/2))}});C.setPosition(h(2*t.width,0)),C.setDimension(t),C.addChild(a)}}),D=d().add({init:function(){var a=d(e).add({init:function(){this.spritable.setup({position:h(t.width/2,t.height/2),image:b.getAsset("howtoplay_4")}),this.setOrigin(h(a.spritable.getImage().width/2,a.spritable.getImage().height/2))}});D.setPosition(h(3*t.width,0)),D.setDimension(t),D.addChild(a)}}),E=d().add({init:function(){var a=d(e).add({init:function(){this.spritable.setup({position:h(t.width/2,t.height/2),image:b.getAsset("howtoplay_5")}),this.setOrigin(h(a.spritable.getImage().width/2,a.spritable.getImage().height/2))}});E.setPosition(h(4*t.width,0)),E.setDimension(t),E.addChild(a)}}),F=d().add({init:function(){var a=d(e).add({init:function(){this.spritable.setup({position:h(t.width/2,t.height/2),image:b.getAsset("howtoplay_6")}),this.setOrigin(h(a.spritable.getImage().width/2,a.spritable.getImage().height/2))}});F.setPosition(h(5*t.width,0)),F.setDimension(t),F.addChild(a)}}),G=d(f).add({init:function(){G.addChild(A),G.addChild(B),G.addChild(C),G.addChild(D),G.addChild(E),G.addChild(F),G.z=10,G.movable.setMoveSpeed(500)},update:function(a){G.base.update(a),window.unitTestingFlag&&G.movable.atTarget()&&P&&(j.fire("howtoplay.finishedScroll",G.getPosition().x),P=!1)}}),H={update:function(){0===w.x&&u?u=!1:u||0===w.x||(u=!0),w.x===-(G.getChildren().length-1)*t.width&&v?v=!1:w.x===-(G.getChildren().length-1)*t.width||v||(v=!0)}},I=k(36,695,{image:b.getAsset("button_arrow_left"),frameCount:2,pushScale:1.02,z:2e3,clickUp:function(){G.movable.atTarget()&&u&&(Q(t.width),y--,z.setText(x[y]))},onDraw:function(a){I.setAnimation(u?"inactive":"idle"),I.base.draw(a),a.context.globalAlpha=1},name:"buttonLeft"}),J=k(497,695,{image:b.getAsset("button_arrow_right"),frameCount:2,pushScale:1.02,z:2e3,clickUp:function(){G.movable.atTarget()&&v&&(y++,z.setText(x[y]),Q(-t.width))},onDraw:function(a){J.setAnimation(v?"idle":"inactive"),J.base.draw(a),a.context.globalAlpha=1},name:"buttonRight"}),K=k(36,34,{image:b.getAsset("button_arrow_left"),frameCount:2,pushScale:1.02,z:1e5,clickUp:function(){T()},name:"backToMainMenu"}),L=d(e).add({init:function(){L.spritable.setup({image:b.getAsset("howtoplay_background"),position:h(20,170)}),L.z=0}}),M=d(e).add({init:function(){M.spritable.setup({position:h(0,0),image:b.getAsset("entrance")}),M.z=13}}),N=d(e,f).add({init:function(){N.spritable.setup({position:h(0,0),image:b.getAsset("doorLeft")}),N.movable.setMoveSpeed(300),N.z=12},update:function(a){N.base.update(a),N.movable.atTarget()&&N.moving&&(N.moving=!1,R())}}),O=d(e,f).add({init:function(){O.spritable.setup({position:h(320,0),image:b.getAsset("doorRight")}),O.moving=!0,O.movable.setMoveSpeed(300),O.z=12}}),P=!1,Q=function(a){P=!0,w.x+=a,G.movable.setTarget(w)},R=function(){q?(i.add(I),i.add(J),i.add(H),H.update()):r=n.setTimeout(function(){window.unitTestingFlag||a.showScreen("MainMenuScreen")},250),window.unitTestingFlag&&j.fire("howtoplay.doorAction",q)},S=function(){o.playSound("sfx_door_open"),q=!0,N.moving=!0,N.movable.setTarget(h(-321,0)),O.movable.setTarget(h(642,0)),I.z=2e3,J.z=2e3},T=function(){o.playSound("sfx_door_close"),q=!1,N.moving=!0,N.movable.setTarget(h(0,0)),O.movable.setTarget(h(320,0)),I.z=2,J.z=2,z.movable.setTarget(h(0,t.height))},U=function(){T()},V=function(){S()},W=function(a){Q(a)},X=function(){j.on("howtoplay.closeDoor",U),j.on("howtoplay.openDoor",V),j.on("howtoplay.scrollTo",W)},Y=function(){j.off("howtoplay.closeDoor",U),j.off("howtoplay.openDoor",V),j.off("howtoplay.scrollTo",W)},p=c("HowToPlay");return p.addObject(L),p.addObject(G),p.addObject(N),p.addObject(O),p.addObject(M),p.addObject(K),p.z=0,p.init=function(){r=n.setTimeout(function(){S()},250),v=u=!0,window.unitTestingFlag||(w.x=0),G.setPosition(w),G.getChildren().length=0,window.unitTestingFlag&&X(),y=0,i.add(z)},p.update=function(){K.setAnimation("inactive")},p.destroy=function(){i.remove(I),i.remove(J),i.remove(H),i.remove(z),window.unitTestingFlag&&Y()},p}}),glue.module.create("js/screens/levelselect",["glue","glue/game","glue/screen","glue/director","glue/loader","glue/baseobject","js/gui/toggle-button","glue/event/system","glue/component/spritable","glue/component/animatable","glue/component/fadable","glue/component/movable","glue/math/vector","js/gui/click-button","js/managers/levelmanager","js/managers/audiomanager","js/managers/apimanager","js/managers/savestate-manager","js/game-objects/timer","js/utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";var u=a.sugar;return function(){var a,k,v,w,x,y,z,A=c("LevelSelect"),B=!1,C=e.getAsset("button_level"),D=m(0,-50),E=!1,F=!1,G=1,H=b.canvas.getDimension(),I=f(i).add({init:function(){this.spritable.setup({image:e.getAsset("paginationBackground"),position:m(320,700)}),this.setOrigin(m(143,0))}}),J=f(i).add({init:function(){this.spritable.setup({image:e.getAsset("paginationPage"),position:this.positions[this.currentIndex]}),this.setOrigin(m(143,0))},currentIndex:0,positions:[m(322,702),m(382,702),m(447,702),m(507,702),m(567,702)],setCurrentPage:function(a){S.setPosition(m(-H.width*a,S.getPosition().y)),D=m(-(H.width*a),-50),S.movable.setTarget(D),this.currentIndex=a,this.setPosition(this.positions[a])},increasePage:function(){this.setPosition(this.positions[++this.currentIndex])},decreasePage:function(){this.setPosition(this.positions[--this.currentIndex])}}),K=f(i).add({init:function(){K.spritable.setup({position:m(0,0),image:e.getAsset("background_levelselect")}),K.z=0}}),L=n(193,757,{image:e.getAsset("buttonHome"),frameCount:1,pushScale:1.02,z:5001,clickUp:function(){G=1,lb(),ib()}}),M=n(343,757,{image:e.getAsset("buttonPuzzle"),frameCount:1,pushScale:1.02,z:5001,clickUp:function(){G=2,lb(),ib()}}),N=f(i).add({init:function(){N.spritable.setup({position:m(0,0),image:e.getAsset("entrance")}),N.z=5e3}}),O=f(i,l).add({init:function(){O.spritable.setup({position:m(0,0),image:e.getAsset("doorLeft")}),O.movable.setMoveSpeed(300),O.z=12},update:function(a){O.base.update(a),O.movable.atTarget()&&O.moving&&(O.moving=!1,gb())}}),P=f(i,l).add({init:function(){P.spritable.setup({position:m(320,0),image:e.getAsset("doorRight")}),P.moving=!0,P.movable.setMoveSpeed(300),P.z=12}}),Q=n(36,533,{image:e.getAsset("button_arrow_left"),frameCount:2,pushScale:1.02,z:6e3,clickUp:function(){S.movable.atTarget()&&E&&(fb(H.width),J.decreasePage())},onDraw:function(a){Q.setAnimation(E?"inactive":"idle"),Q.base.draw(a)},name:"buttonLeft"}),R=n(499,533,{image:e.getAsset("button_arrow_right"),frameCount:2,pushScale:1.02,z:6e3,clickUp:function(){S.movable.atTarget()&&F&&(fb(-H.width),J.increasePage())},onDraw:function(a){R.setAnimation(F?"idle":"inactive"),R.base.draw(a)},name:"buttonRight"}),S=f(l).add({init:function(){S.movable.setMoveSpeed(600),this.z=2,S.getPosition().y=-50}}),T={},U={update:function(){0===D.x&&E?E=!1:E||0===D.x||(E=!0),D.x===-(S.getChildren().length-1)*H.width&&F?F=!1:D.x===-(S.getChildren().length-1)*H.width||F||(F=!0)}},V=31,W=10,X=60,Y=m(H.width/2-4*(C.width/2+V)/2,H.height/2-3*(C.height+V)/2),Z=g(429,34,{image:e.getAsset("buttonSound"),z:t.zLayers.GUI+4,frameCount:2,pushScale:1.02,onToggle:function(a){p.muteSound(a===!0?!0:!1),p.playSound("sfx_button_mute"),h.fire("mainmenu.toggleSound",!0)},name:"buttonSound"}),$=g(525,34,{image:e.getAsset("buttonMusic"),z:t.zLayers.GUI+4,frameCount:2,pushScale:1.02,onToggle:function(a){p.playSound("sfx_button_mute"),a===!0?p.muteMusic(!0):(p.muteMusic(!1),"GameScreen"===d.getActiveScreen().getName()?p.playMusic("music_level",!0):p.playMusic("music_mainmenu",!0)),h.fire("mainmenu.toggleMusic",!0)},name:"buttonMusic"}),_=n(36,844,{image:e.getAsset("brandLogo"),frameCount:1,pushScale:1.02,z:t.zLayers.GUI+4,clickUp:function(){h.fire("mainmenu.showZibbo"),q.openBrandLink()},name:"zibboButton"}),ab=function(a){var b,c=parseInt(a.replace(/[^0-9]/g,"")),d=[],e=z.length;if(!isNaN(c))for(b=0;e>b;++b)z[b].getRegion()===c&&d.push(z[b]);return d},bb=function(a,b){T.hasOwnProperty(a)||(T[a]=b,eb(a),S.addChild(b))},cb=function(a){var b=a.getParent(),c=a.getPosition().clone();if(!b)return c;for(;;){if(null===b||!u.isDefined(b.getParent()))return c;c.add(b.getPosition()),b=b.getParent()}},db=function(a,b,c,g,h){var i=z[g],k=n(a,b,{text:c,textFont:t.fonts.numberFont,textMargin:m(0,4),image:C,frameCount:2,pushScale:1.05,clickUp:function(){i.getState()!==t.levelStates.LOCKED&&S.movable.atTarget()&&(d.hideScreen("LevelSelect"),o.setCurrentLevel(i),d.showScreen("GameScreen"))},onDraw:function(a){var b=cb(k);b.x>0&&b.y>0&&b.x<H.width&&b.y<H.height&&(k.setAnimation(i.getState()===t.levelStates.LOCKED?"inactive":"idle"),k.base.draw(a))}}),l=f(j).add({init:function(){this.animatable.setup({position:m(0,0),image:e.getAsset("stars"),animation:{frameCount:4,animations:{amt1:{startFrame:1,endFrame:1},amt2:{startFrame:2,endFrame:2},amt3:{startFrame:3,endFrame:3},none:{startFrame:0,endFrame:0}}}}),this.animatable.setAnimation("amt"+h),this.setPosition(m(-6-C.width/4,40))},update:function(){this.animatable.setAnimation("amt"+i.getBestStarsCollected()),0===i.getBestStarsCollected()&&this.animatable.setAnimation("none")}});return k.addChild(l),k},eb=function(a){var b,c,d,e,f,g,h=T[a];if(u.isDefined(h))for(b=ab(a),d=b.length,c=0;d>c;++c)f=W+c%4*(C.width/2+V),g=~~(c/4)*(C.height+X),g/(C.height+X)===2&&(f+=C.width/2+V),e=db(Y.x+f,Y.y+g,parseInt(b[c].getName().replace("level_",""))+1,parseInt(b[c].getName().replace("level_","")),b[c].getBestStarsCollected()),h.addChild(e)},fb=function(a){D.x+=a,S.movable.setTarget(D),p.playSound("sfx_page")},gb=function(){B?"LevelSelect"===d.getActiveScreen().getName()&&(b.add(Q),b.add(R),b.add(U),U.update()):a=s.setTimeout(function(){b.remove(Q),b.remove(R),b.remove(U),d.showScreen(1===G?"MainMenuScreen":"Paintings")},250),window.unitTestingFlag},hb=function(){p.playSound("sfx_door_open"),B=!0,O.moving=!0,O.movable.setTarget(m(-321,0)),P.movable.setTarget(m(642,0)),Q.z=6e3,R.z=6e3},ib=function(){p.playSound("sfx_door_close"),B=!1,O.moving=!0,O.movable.setTarget(m(0,0)),P.movable.setTarget(m(320,0)),Q.z=2,R.z=2},jb=function(){for(var a in T)T[a].destroy(),delete T[a];S.getChildren().length=0,k=f().add({init:function(){this.name="region0",this.setDimension(H),this.z=3,this.position=this.getPosition()},destroy:function(){this.getChildren().length=0}}),v=f().add({init:function(){this.name="region1",this.setPosition(m(H.width,0)),this.setDimension(H),this.position=this.getPosition(),w.z=3},destroy:function(){this.getChildren().length=0}}),w=f().add({init:function(){this.name="region2",this.setPosition(m(2*H.width,0)),this.setDimension(H),this.position=this.getPosition(),this.z=3},destroy:function(){this.getChildren().length=0}}),x=f().add({init:function(){this.name="region3",this.setPosition(m(3*H.width,0)),this.position=this.getPosition(),this.setDimension(H),this.z=3},destroy:function(){this.getChildren().length=0}}),y=f().add({init:function(){this.name="region4",this.setPosition(m(4*H.width,0)),this.setDimension(H),this.position=this.getPosition(),this.z=3},destroy:function(){this.getChildren().length=0}})},kb=function(){$.fadable.fade(function(){},0,1),Z.fadable.fade(function(){},0,1),L.fadable.fade(function(){},0,1),M.fadable.fade(function(){},0,1),_.fadable.fade(function(){},0,1)},lb=function(){$.fadable.fade(function(){},1,0),Z.fadable.fade(function(){},1,0),L.fadable.fade(function(){},1,0),M.fadable.fade(function(){},1,0),_.fadable.fade(function(){},1,0)};return A.addObject(K),A.addObject(S),A.addObject(L),A.addObject(M),A.addObject(O),A.addObject(P),A.addObject(N),A.addObject(Z),A.addObject($),A.addObject(I),A.addObject(J),q.isAvailable()&&A.addObject(_),A.z=0,A.onShow=function(){$.setToggleState(r.load("muteMusic")?!0:!1),Z.setToggleState("false"===r.load("muteSound")?!0:!1),$.fadable.setFadeSpeed(3),Z.fadable.setFadeSpeed(3),L.fadable.setFadeSpeed(3),M.fadable.setFadeSpeed(3),_.fadable.setFadeSpeed(3),kb(),o.init(),o.showLevelButtons(),z=o.getLevels(),jb(),"music_mainmenu"!=p.getCurrentlyPlayingMusic()&&(p.stopAllMusic(),p.playMusic("music_mainmenu",!0)),hb(),F=E=!0,bb("region0",k),bb("region1",v),bb("region2",w),bb("region3",x),bb("region4",y),J.setCurrentPage(o.getCurrentRegion())},A.init=function(){},A.clearRegions=function(){jb()},A.destroy=function(){b.remove(Q),b.remove(R),b.remove(Z),b.remove($),b.remove(U)},A}}),glue.module.create("js/screens/mainmenu",["glue","glue/game","glue/baseobject","glue/screen","glue/director","glue/loader","glue/event/system","glue/math/dimension","glue/math/vector","glue/component/spritable","glue/component/movable","glue/component/rotatable","glue/component/clickable","glue/component/fadable","js/utils","js/gui/click-button","js/gui/toggle-button","js/gui/textbox","js/managers/levelmanager","js/managers/hintsmanager","js/managers/audiomanager","js/managers/apimanager","js/managers/savestate-manager","js/game-objects/timer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";return function(){var b,h,l=d("MainMenuScreen"),m=a.sugar,y=!0,z=!0,A=c(j).add({init:function(){this.spritable.setup({image:f.getAsset("mainmenu_background"),position:i(0,0)}),this.z=o.zLayers.GUI,this.name="background"}}),B=c(j).add({init:function(){this.spritable.setup({image:f.getAsset("entrance"),position:i(0,0)}),this.z=o.zLayers.GUI+6,this.name="entrance"}}),C=c(j).add({init:function(){this.spritable.setup({position:i(109,142),image:f.getAsset("logo")}),this.z=o.zLayers.GUI+3}}),D=[c(j).add({init:function(){this.spritable.setup({position:i(0,300),image:f.getAsset("mist")}),this.z=o.zLayers.GUI+1},update:function(){y&&(this.setPosition(i(this.getPosition().x-1,300)),this.getPosition().x<-1534&&this.setPosition(i(1534,300)))}}),c(j).add({init:function(){this.spritable.setup({position:i(1534,300),image:f.getAsset("mist")}),this.z=o.zLayers.GUI+1},update:function(){y&&(this.setPosition(i(this.getPosition().x-1,300)),this.getPosition().x<-1534&&this.setPosition(i(1534,300)))}})],E=c(j,n).add({init:function(){this.spritable.setup({position:i(5e3,5e3),image:f.getAsset("newGameUnderlay")}),this.fadable.setFadeSpeed(5),this.fadable.fade(function(){},0,0),this.z=o.zLayers.GUI+10}}),F=p(232,299,{image:f.getAsset("buttonYes"),pushScale:1.02,frameCount:1,clickUp:function(){z||E.fadable.fade(function(){var a=w.load("muteMusic"),b=w.load("muteSound");w.clear(),w.save("muteMusic",a),w.save("muteSound",b),t.setHints(0),z=!0,U()},1,0)}}),G=p(45,299,{image:f.getAsset("buttonNo"),pushScale:1.02,frameCount:1,clickUp:function(){z||E.fadable.fade(function(){E.setPosition(i(5e3,5e3)),Z(function(){}),T(),z=!0},1,0)}}),H=r({text:"Are you sure?\nYour progress will be lost.",align:"center",font:o.fonts.textFont,fontSize:30,fontColor:"#000000",margin:i(0,12),textBaseline:"middle",maxWidth:387,maxHeight:200}).add({init:function(){this.setPosition(i(193,193))}}),I=p(36,34,{image:f.getAsset("button_language"),frameCount:1,pushScale:1.02,z:o.zLayers.GUI+7,clickUp:function(){z&&g.fire("mainmenu.showLanguageSelect")},name:"languageButton"}),J=p(36,34,{image:f.getAsset("buttonCredits"),frameCount:1,pushScale:1.02,z:o.zLayers.GUI+7,clickUp:function(){z&&(g.fire("mainmenu.showCredits"),Y(function(){S(),x.setTimeout(function(){e.showScreen("Credits")},250)}))},name:"creditsButton"}),K=p(163,459,{image:f.getAsset("button_wide"),text:"Resume",textFont:o.fonts.mainFont,textFontSize:29,textFontColor:"#FFFFFF",textMargin:i(16,10),shadowColor:"#000000",shadowBlur:0,shadowOffsetX:2,shadowOffsetY:2,pushScale:1.02,z:o.zLayers.GUI+4,clickUp:function(){z&&(s.getLevels(),s.getCompletedLevelsNumber()===o.game.NUMBER_OF_LEVELS?window.unitTestingFlag||V():(U(),g.fire("mainmenu.showLevelSelect",!0)))},name:"playButton"}),L=p(163,561,{image:f.getAsset("button_wide"),text:"New Game",textFont:o.fonts.mainFont,textFontSize:27,textFontColor:"#FFFFFF",textMargin:i(16,10),shadowColor:"#000000",shadowBlur:0,shadowOffsetX:2,shadowOffsetY:2,pushScale:1.02,z:o.zLayers.GUI+4,clickUp:function(){z&&(null===w.load("levels")?U():X(),g.fire("mainmenu.showLevelSelect",!0))},name:"playButton"}),M=p(163,663,{image:f.getAsset("button_wide"),text:"How to play",textFont:o.fonts.mainFont,textFontSize:27,textFontColor:"#FFFFFF",textMargin:i(16,10),shadowColor:"#000000",shadowBlur:0,shadowOffsetX:2,shadowOffsetY:2,pushScale:1.02,z:o.zLayers.GUI+4,clickUp:function(){z&&(u.playSound("sfx_button_click"),g.fire("mainmenu.showLanguageSelect"),W())},name:"languageButton"}),N=c(j).add({init:function(){this.spritable.setup({image:f.getAsset("map_background"),position:i(5e3,0)}),this.z=o.zLayers.GUI+4,this.name="mapBackground"}}),O=c(j).add({init:function(){this.spritable.setup({image:f.getAsset("doorLeft"),position:i(0,0)}),this.z=o.zLayers.GUI+6,this.name="doorLeft"}}),P=c(j,k).add({init:function(){this.movable.setMoveSpeed(300),this.spritable.setup({image:f.getAsset("doorRight"),position:i(320,0)}),this.z=o.zLayers.GUI+6,this.name="doorRight"},update:function(a){this.base.update(a),O.setPosition(i(-321+(642-this.getPosition().x),O.getPosition().y)),this.movable.atTarget()&&this.moving&&(this.callback(),this.moving=!1)}}),Q=q(429,34,{image:f.getAsset("buttonSound"),frameCount:2,z:o.zLayers.GUI+7,pushScale:1.02,onToggle:function(a){z&&(u.muteSound(a===!0?!0:!1),u.playSound("sfx_button_mute")),g.fire("mainmenu.toggleSound",!0)},name:"buttonSound"}),R=q(525,34,{image:f.getAsset("buttonMusic"),frameCount:2,z:o.zLayers.GUI+7,pushScale:1.02,onToggle:function(a){z&&(u.playSound("sfx_button_mute"),a===!0?u.muteMusic(!0):(u.muteMusic(!1),"GameScreen"===e.getActiveScreen().getName()?u.playMusic("music_level",!0):u.playMusic("music_mainmenu",!0))),g.fire("mainmenu.toggleMusic",!0)},name:"buttonMusic"}),S=function(){I.fadable.fade(function(){},1,0),L.fadable.fade(function(){},1,0),K.fadable.fade(function(){},1,0),Q.fadable.fade(function(){},1,0),R.fadable.fade(function(){},1,0),M.fadable.fade(function(){},1,0),J.fadable.fade(function(){},1,0),v.isAvailable()&&(h.fadable.fade(function(){},1,0),b.fadable.fade(function(){},1,0))},T=function(){I.fadable.fade(function(){},0,1),L.fadable.fade(function(){},0,1),K.fadable.fade(function(){},0,1),Q.fadable.fade(function(){},0,1),R.fadable.fade(function(){},0,1),M.fadable.fade(function(){},0,1),J.fadable.fade(function(){},0,1),v.isAvailable()&&(h.fadable.fade(function(){},0,1),b.fadable.fade(function(){},0,1))},U=function(){Y(function(){e.hideScreen("MainMenuScreen"),s.showLevelButtons();for(var a,b=s.getLevels(),c=0;c<b.length;c++)if(b[c].getState()===o.levelStates.UNLOCKED){a=b[c];break}m.isDefined(a)||(a=b[b.length-1]),s.setCurrentLevel(a),e.showScreen("GameScreen")})},V=function(){Y(function(){P.moving=!1,y=!1,S(),x.setTimeout(function(){e.showScreen("LevelSelect")},250)})},W=function(){Y(function(){P.moving=!1,y=!1,S(),x.setTimeout(function(){e.showScreen("HowToPlay")},250)})},X=function(){Y(function(){P.moving=!1,y=!1,S(),z=!1,E.setPosition(i(130,274)),E.fadable.fade(function(){},0,1)})},Y=function(a){u.playSound("sfx_door_close"),P.movable.setTarget(i(320,0)),P.callback=a,P.moving=!0},Z=function(a){u.playSound("sfx_door_open"),P.movable.setTarget(i(642,0)),P.callback=a,P.moving=!0},$=function(a){switch(a.name){case"playButton":K.getClickUp()();break;case"moreGamesButton":h.getClickUp()();break;case"zibboButton":b.getClickUp()();break;case"languageButton":I.getClickUp()();break;case"mapBackground":N.onClick()}},_=function(){v.isAvailable()&&(h=p(163,765,{image:f.getAsset("button_wide"),text:"More Games",textFont:o.fonts.mainFont,textFontSize:27,textFontColor:"#FFFFFF",textMargin:i(16,10),shadowColor:"#000000",shadowBlur:0,shadowOffsetX:2,shadowOffsetY:2,pushScale:1.02,z:o.zLayers.GUI+7,clickUp:function(){z&&(u.playSound("sfx_button_click"),g.fire("mainmenu.showMoreGames"),v.openMoreGames())},name:"moreGamesButton"}),b=p(36,844,{image:f.getAsset("brandLogo"),frameCount:1,pushScale:1.02,z:o.zLayers.GUI+7,clickUp:function(){z&&(u.playSound("sfx_button_click"),g.fire("mainmenu.showZibbo"),v.openBrandLink())},name:"zibboButton"}),l.addObject(h),l.addObject(b))};return l.getObjectByName=function(a){for(var b=l.getObjects(),c=0;c<b.length;c++)if(b[c].name===a)return b[c];
return!1},l.hideDoors=function(a){Z(a)},l.showDoors=function(a){Y(a)},l.setDoorSpeed=function(a){P.movable.setMoveSpeed(a)},l.onShow=function(){R.setToggleState(w.load("muteMusic")?!0:!1),Q.setToggleState(w.load("muteSound")?!0:!1),I.fadable.setFadeSpeed(5),L.fadable.setFadeSpeed(5),M.fadable.setFadeSpeed(5),K.fadable.setFadeSpeed(5),Q.fadable.setFadeSpeed(5),R.fadable.setFadeSpeed(5),J.fadable.setFadeSpeed(5),v.isAvailable()&&(h.fadable.setFadeSpeed(5),b.fadable.setFadeSpeed(5)),T(),null===w.load("levels")?(K.setActivation(!1),K.setPosition(i(320,1e3)),L.setPosition(i(320,514)),M.setPosition(i(320,616)),h.setPosition(i(320,718)),h.z=o.zLayers.GUI+4):(K.setActivation(!0),K.setPosition(i(320,512)),L.setPosition(i(320,614)),M.setPosition(i(320,718)),h.setPosition(i(320,820)),h.z=o.zLayers.GUI+7)},l.init=function(){s.init(),t.init(),g.on("clickbutton.released",$),Z(function(){}),y=!0,"music_mainmenu"!=u.getCurrentlyPlayingMusic()&&(u.stopAllMusic(),u.playMusic("music_mainmenu",!0))},l.destroy=function(){g.off("clickbutton.released",$)},l.addObject(A),l.addObject(R),l.addObject(Q),l.addObject(D[0]),l.addObject(D[1]),l.addObject(N),l.addObject(E),l.addObject(K),l.addObject(L),l.addObject(M),l.addObject(J),l.addObject(C),l.addObject(O),l.addObject(P),l.addObject(B),l.z=0,_(),E.addChild(G),E.addChild(F),E.addChild(H),l}}),glue.module.create("js/screens/paintings",["glue","glue/director","glue/loader","glue/screen","glue/baseobject","glue/component/spritable","glue/component/movable","glue/component/scalable","glue/component/fadable","glue/math/vector","glue/game","glue/event/system","js/gui/click-button","js/gui/textbox","js/utils","js/game-objects/timer","js/managers/levelmanager","js/managers/audiomanager","js/gui/game-complete"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";return function(){var t,u,v,w,x,y,z,A=a.sugar,B=k.canvas.getDimension(),C=!1,D=!1,E=!1,F=j(0,0),G=["Complete level 10 to read this chapter.","Complete level 20 to read this chapter.","Complete level 30 to read this chapter.","Complete level 40 to read this chapter.","Complete level 50 to read this chapter."],H=["Play Chapter 1.","Play Chapter 2.","Play Chapter 3.","Play Chapter 4.","Play Chapter 5."],I=[["High in the clouds, I was. Until I saw a gray wisp from below","A young boys prayer to the Emperor for water.","But the winds sent it to me instead."],["And as I looked down upon the nation, I saw something dire.","A terrible drought. People dying. Life was all but dried up."],["I begged the Emperor to give his people water...","But he refused to help. He wanted to abandon them."],["So I swore to water the nation myself.","I summoned the mighty water dragon to join my quest."],["Together we rained water on the land, and the nation rose again...","As we returned to the clouds, thunder roared around us.","It was the Emperor. Hes coming for us. Now we must flee...","To be continued."]],J=[],K=0,L=0,M=e(f,g).add({init:function(){this.spritable.setup({position:j(0,B.height),image:c.getAsset("puzzle_textbar")}),this.z=1e3,this.movable.setMoveSpeed(300),this.movable.setTarget(j(0,B.height-c.getAsset("puzzle_textbar").height));var a=n({margin:j(10,15),font:o.fonts.textFont,align:"center",fontColor:"#fff",maxWidth:M.getDimension().width,maxHeight:M.getDimension().height});z=e(i).add({init:function(){this.addChild(a),this.fadable.setAlpha(1),this.fadable.setFadeSpeed(2)},changeChapterText:function(){a.setText(P.isActive()?H[K]:G[K])},playStoryText:function(){L===I[K].length?$(J[K],J[K].getChildren().length):z.fadable.fadeOut(function(){var b=I[K][L];a.setText(b),z.fadable.fadeIn(function(){L++,p.setTimeout(z.playStoryText,73*b.length)})})},setText:function(b){a.setText(b)}}),x=2,a.setPosition(j(this.getDimension().width/2,60)),this.changeChapterText(),this.addChild(z)},changeChapterText:function(){A.isDefined(z)&&z.fadable.fadeOut(function(){z.changeChapterText(),z.fadable.fadeIn(function(){})})},setText:function(a){A.isDefined(z)&&z.fadable.fadeOut(function(){z.setText(a),z.fadable.fadeIn(function(){})})},playStoryText:function(){z.playStoryText()},destroy:function(){this.getChildren().length=0}}),N=e(g).add({init:function(){N.z=10,N.movable.setMoveSpeed(500)},update:function(a){N.base.update(a),window.unitTestingFlag||(N.movable.atTarget()&&X?(l.fire("paintings.finishedScroll",N.getPosition().x),X=!1,Y()):!E&&J[K].getChildren().length>1&&(J[K].getChildren().length=1))},setPaintings:function(){var a;for(a=0;a<J.length;++a)this.addChild(J[a])}}),O={update:function(){0===F.x&&C?C=!1:C||0===F.x||(C=!0),F.x===-(N.getChildren().length-1)*B.width&&D?D=!1:F.x===-(N.getChildren().length-1)*B.width||D||(D=!0)}},P=m(o.game.GAME_WIDTH/2-56,695,{image:c.getAsset("button_play_story"),frameCount:1,pushScale:1.02,z:o.zLayers.GUI,clickUp:function(){E||(L=0,Z(K+1,J[K]))},name:"buttonPlayStory"}).add({update:function(){P.setVisible(!E&&q.getCompletedLevelsNumber()>=10*(K+1)?!0:!1)}}),Q=m(36,o.game.GAME_HEIGHT/2-56,{image:c.getAsset("button_arrow_left"),frameCount:2,pushScale:1.02,z:2e3,clickUp:function(){N.movable.atTarget()&&C&&(_(B.width),K--)},onDraw:function(a){Q.setAnimation(C?"inactive":"idle"),Q.base.draw(a),a.context.globalAlpha=1},name:"buttonLeft"}),R=m(497,o.game.GAME_HEIGHT/2-56,{image:c.getAsset("button_arrow_right"),frameCount:2,pushScale:1.02,z:2e3,clickUp:function(){N.movable.atTarget()&&D&&(_(-B.width),K++)},onDraw:function(a){R.setAnimation(D?"idle":"inactive"),R.base.draw(a),a.context.globalAlpha=1},name:"buttonRight"}),S=m(36,34,{image:c.getAsset("buttonLevelSelect"),frameCount:1,pushScale:1.02,z:o.zLayers.GUI,clickUp:function(){S.setActive(!1),cb()},name:"levelSelectButton"}),T=e(f).add({init:function(){T.spritable.setup({image:c.getAsset("howtoplay_background"),position:j(20,170)}),T.z=0}}),U=e(f,h,i).add({init:function(){U.spritable.setup({position:j(0,0),image:c.getAsset("entrance")}),U.z=13,U.setOrigin(j(U.getDimension().width/2,U.getDimension().height/2)),U.setPosition(j(o.game.GAME_WIDTH/2,o.game.GAME_HEIGHT/2)),U.scalable.setScale(j(1,1)),U.fadable.setAlpha(1),U.fadable.setFadeSpeed(x)}}),V=e(f,g).add({init:function(){V.spritable.setup({position:j(0,0),image:c.getAsset("doorLeft")}),V.movable.setMoveSpeed(300),V.z=12},update:function(a){V.base.update(a),V.movable.atTarget()&&V.moving&&(V.moving=!1,ab())}}),W=e(f,g).add({init:function(){W.spritable.setup({position:j(320,0),image:c.getAsset("doorRight")}),W.moving=!0,W.movable.setMoveSpeed(300),W.z=12}}),X=!1,Y=function(){q.getCompletedLevelsNumber()>=10*(K+1)?(P.setActive(!0),P.setVisible(!0)):P.setActive(!1),M.changeChapterText()},Z=function(a,b){var d,g=0,h=function(g){p.setTimeout(function(g){return function(){++g,5>=g&&(d=e(f,i).add({init:function(){this.spritable.setup({image:c.getAsset(5>g?"painting"+a+"_"+g:"painting"+a+"c")}),this.fadable.setAlpha(0),this.fadable.fadeIn(function(){5===g&&M.playStoryText()})}}),b.addChild(d),d.setVisible(!0),h(g))}}(g),530)};v=!1,E=!0,P.setActive(!1),P.setVisible(!1),Q.setActive(!1),Q.setVisible(!1),R.setActive(!1),R.setVisible(!1),h(g)},$=function(a,b){var c,d=a.getChildren();p.setTimeout(function(b){return function(){--b,b>0&&(c=d[b],c.fadable.fadeOut(function(){1===b&&(v=!0,E=!1,M.setText(H[K]),P.setActive(!0),P.setVisible(!0),Q.setActive(!0),Q.setVisible(!0),R.setActive(!0),R.setVisible(!0),4===K&&(K=0,l.fire("paintings.gameEnded")))}),$(a,b))}}(b),530)},_=function(a){X=!0,F.x+=a,N.movable.setTarget(F),r.playSound("sfx_page")},ab=function(){v=!0,w?(k.add(Q),k.add(P),k.add(R),k.add(O),O.update(),TweenLite.to(U.scalable.getScale(),x/1.5,{x:2,y:2,ease:Quad.easeIn,onComplete:function(){}}),U.fadable.fadeOut(function(){})):y=p.setTimeout(function(){window.unitTestingFlag||b.showScreen("LevelSelect")},250),window.unitTestingFlag&&l.fire("paintings.doorAction",w)},bb=function(){r.playSound("sfx_door_open"),w=!0,V.moving=!0,V.movable.setTarget(j(-321,0)),W.movable.setTarget(j(642,0)),Q.z=2e3,R.z=2e3},cb=function(){U.fadable.setAlpha(1),U.fadable.setFadeSpeed(x/2),U.fadable.fadeIn(function(){}),TweenLite.to(U.scalable.getScale(),x/1.5,{x:1,y:1,ease:Linear.easeIn,onComplete:function(){r.playSound("sfx_door_close"),E=!0,P.setActive(!1),P.setVisible(!1),w=!1,V.moving=!0,V.movable.setTarget(j(0,0)),W.movable.setTarget(j(320,0)),Q.z=2,R.z=2,M.movable.setTarget(j(0,B.height))}})},db=function(){cb()},eb=function(){bb()},fb=function(a){_(a)},gb=function(){l.on("paintings.closeDoor",db),l.on("paintings.openDoor",eb),l.on("paintings.scrollTo",fb)},hb=function(){l.off("paintings.closeDoor",db),l.off("paintings.openDoor",eb),l.off("paintings.scrollTo",fb)},t=d("Paintings");return t.addObject(T),t.addObject(V),t.addObject(W),t.addObject(U),t.addObject(N),t.addObject(S),t.z=0,t.onShow=function(){var a,b=function(b){a=e().add({init:function(){var a=e(f).add({init:function(){this.spritable.setup({position:j(0,0),image:c.getAsset("painting"+b+"bw")})}});this.setDimension(B),this.addChild(a)}}),a.setPosition(j(o.game.GAME_WIDTH*(b-1),0)),J.push(a)};l.on("gamecomplete.scrollPaintings",_),E=!1,v=!1,K=q.getCurrentRegion(),N.getChildren().length=0,b(1),b(2),b(3),b(4),b(5),u=s(),u.setup(),N.setPaintings(),Y(),y=p.setTimeout(function(){bb()},250),D=!0,C=!0,window.unitTestingFlag||(F.x=-o.game.GAME_WIDTH*q.getCurrentRegion()),N.setPosition(F),window.unitTestingFlag&&gb(),S.setActive(!0),Q.setActive(!0),Q.setVisible(!0),R.setActive(!0),R.setVisible(!0),k.add(M),r.stopAllMusic(),r.playMusic("music_puzzle_mode",!0)},t.update=function(){},t.destroy=function(){l.off("gamecomplete.scrollPaintings",_),u.destroy(),k.remove(P),k.remove(Q),k.remove(R),k.remove(O),k.remove(M),window.unitTestingFlag&&hb(),J.length=0},t}}),glue.module.create("js/screens/splashscreen",["js/utils","glue/game","glue/loader","glue/director","glue/math/vector","glue/component/spritable","glue/component/fadable","js/managers/audiomanager","glue/screen","glue/math/dimension","js/gui/click-button","glue/baseobject","js/managers/apimanager"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.sugar;return function(){var j,m=b.canvas.getDimension(),n=l(f,g).add({init:function(){this.spritable.setup({position:e(a.game.GAME_WIDTH/2-241,200),image:c.getAsset("zibboLogo")})}}),o=l().add({timer:0,draw:function(a){a.context.fillStyle="#ffffff",a.context.fillRect(0,0,m.width,m.height)}}),p=i("SplashScreen").add({onShow:function(){h.init(),j=k(a.game.GAME_WIDTH/2-55,a.game.GAME_HEIGHT/2-48,{name:"brandingButton",image:c.getAsset("button_play_story"),z:a.zLayers.GUI+85,frameCount:1,pushScale:1.02,clickDown:function(){"GameScreen"===d.getActiveScreen().getName()?h.playMusic("music_level",!0):h.playMusic("music_mainmenu",!0),d.showScreen("MainMenuScreen")}}),j.z=2,n.fadable.setAlpha(0),n.fadable.setFadeSpeed(2),n.fadable.fadeIn(function(){j.setVisible(!0),j.setActive(!0)}),n.z=3,o.z=1,b.add(o),b.add(j),b.add(n),j.setVisible(!1)},onHide:function(){b.remove(o),b.remove(j),b.remove(n)}});return p}}),glue.module.create("js/utils",["js/managers/interpolationmanager"],function(a){"use strict";var b={fonts:{mainFont:"japanese_brushregular",numberFont:"japestyleplain",textFont:"gomoregular"},game:{position:{x:18,y:180},GAME_WIDTH:640,GAME_HEIGHT:960,NUMBER_OF_REGIONS:5,NUMBER_OF_LEVELS_PER_REGION:10,NUMBER_OF_LEVELS:0,NUMBER_OF_PUZZLE_PIECES:6},levelStates:{LOCKED:"locked",UNLOCKED:"unlocked",COMPLETED:"completed"},level:{levelWidth:0,levelHeight:0,tileWidth:75,tileHeight:75},directions:{NODIR:0,UP:1,DOWN:2,LEFT:3,RIGHT:4},rotationDirections:{CLOCKWISE:"clockwise",COUNTER_CLOCKWISE:"counterclockwise"},tileSets:{regular:{length:0},goal:{length:0}},tileTypes:{REGULAR:"regular",GOAL:"goal",ONE_WAY:"one_way",BRIDGE:"bridge",BLOCK:"block"},presents:{PUZZLE_PIECE:"puzzle_piece",HINT:"hint"},zLayers:{GROUND:0,PATH:100,HINTS:500,BRIDGES:1e3,OVER_BRIDGE:1100,BLOCKS:1500,GUI:5e3},isRunningOnMobile:function(){return"undefined"!=typeof window.orientation?!0:!1},interpolatePath:a.interpolatePath};return b});